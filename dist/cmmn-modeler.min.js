/*! cmmn-js - cmmn-modeler v0.5.3 | (c) 2014, 2015 camunda Services GmbH | bpmn.io/license */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.CmmnJS=e()}}(function(){var e;return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";function r(e){a.call(this,e),this.on("import.parse.complete",function(e){e.error||this._collectIds(e.definitions,e.context)},this),this.on("diagram.destroy",function(){this.moddle.ids.clear()},this)}var i=e(257),o=e(256),a=e(3),s=e(2),c='<?xml version="1.0" encoding="UTF-8"?><cmmn:definitions xmlns:dc="http://www.omg.org/spec/CMMN/20151109/DC" xmlns:di="http://www.omg.org/spec/CMMN/20151109/DI" xmlns:cmmndi="http://www.omg.org/spec/CMMN/20151109/CMMNDI" xmlns:cmmn="http://www.omg.org/spec/CMMN/20151109/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="Test" targetNamespace="http://bpmn.io/schema/cmmn"><cmmn:case id="Case_1"><cmmn:casePlanModel id="CasePlanModel_1" name="A CasePlanModel"><cmmn:planItem id="PlanItem_1" definitionRef="Task_1" /><cmmn:task id="Task_1" /></cmmn:casePlanModel></cmmn:case><cmmndi:CMMNDI><cmmndi:CMMNDiagram id="CMMNDiagram_1"><cmmndi:Size xsi:type="dc:Dimension" width="500" height="500" /><cmmndi:CMMNShape id="DI_CasePlanModel_1" cmmnElementRef="CasePlanModel_1"><dc:Bounds x="114" y="63" width="534" height="389" /><cmmndi:CMMNLabel /></cmmndi:CMMNShape><cmmndi:CMMNShape id="PlanItem_1_di" cmmnElementRef="PlanItem_1"><dc:Bounds x="150" y="96" width="100" height="80" /><cmmndi:CMMNLabel /></cmmndi:CMMNShape></cmmndi:CMMNDiagram></cmmndi:CMMNDI></cmmn:definitions>';i(r,a),t.exports=r,t.exports.Viewer=a,t.exports.NavigatedViewer=s,r.prototype.createDiagram=function(e){return this.importXML(c,e)},r.prototype._createModdle=function(e){var t=a.prototype._createModdle.call(this,e);return t.ids=new o([32,36,1]),t},r.prototype._collectIds=function(e,t){var n,r=e.$model,i=r.ids;i.clear();for(n in t.elementsById)i.claim(n,t.elementsById[n])},r.prototype._interactionModules=[e(121),e(226),e(229),e(50)],r.prototype._modelingModules=[e(127),e(144),e(185),e(201),e(10),e(12),e(16),e(20),e(44),e(52),e(66),e(56)],r.prototype._modules=[].concat(r.prototype._modules,r.prototype._interactionModules,r.prototype._modelingModules)},{10:10,12:12,121:121,127:127,144:144,16:16,185:185,2:2,20:20,201:201,226:226,229:229,256:256,257:257,3:3,44:44,50:50,52:52,56:56,66:66}],2:[function(e,t,n){"use strict";function r(e){o.call(this,e)}var i=e(257),o=e(3);i(r,o),t.exports=r,r.prototype._navigationModules=[e(229),e(226)],r.prototype._modules=[].concat(r.prototype._modules,r.prototype._navigationModules)},{226:226,229:229,257:257,3:3}],3:[function(e,t,n){"use strict";function r(e){var t=/unparsable content <([^>]+)> detected([\s\S]*)$/,n=t.exec(e.message);return n&&(e.message="unparsable content <"+n[1]+"> detected; this may indicate an invalid CMMN 1.1 diagram file"+n[2]),e}function i(e){return e+(l(e)?"px":"")}function o(e){e=s({},y,e),this.moddle=this._createModdle(e),this.container=this._createContainer(e),a(this.container),this._init(this.container,this.moddle,e)}function a(e){var t=x.BPMNIO_LOGO,n='<a href="http://bpmn.io" target="_blank" class="cjs-powered-by" title="Powered by bpmn.io" style="position: absolute; bottom: 15px; right: 15px; z-index: 100"><img src="data:image/png;base64,'+t+'"></a>',r=d(n);e.appendChild(r),_.bind(r,"click",function(e){x.open(),e.preventDefault()})}var s=e(398),c=e(402),u=e(395),l=e(392),p=e(257),d=e(415),f=e(418),h=e(419),m=e(100),g=e(76),v=e(69),y={width:"100%",height:"100%",position:"relative",container:"body"};p(o,m),t.exports=o,o.prototype.importXML=function(e,t){t=t||function(){};var n=this;e=this._emit("import.parse.start",{xml:e})||e,this.moddle.fromXML(e,"cmmn:Definitions",function(e,i,o){if(i=n._emit("import.parse.complete",{error:e,definitions:i,context:o})||i,e)return e=r(e),n._emit("import.done",{error:e}),t(e);var a=o.warnings;n.importDefinitions(i,function(e,r){var i=[].concat(a,r||[]);n._emit("import.done",{error:e,warnings:i}),t(e,i)})})},o.prototype.saveXML=function(e,t){t||(t=e,e={});var n=this.definitions;return n?void this.moddle.toXML(n,e,t):t(new Error("no definitions loaded"))},o.prototype.saveSVG=function(e,t){t||(t=e,e={});var n=this.get("canvas"),r=n.getDefaultLayer(),i=n._svg.select("defs"),o=r.innerSVG(),a=i&&i.outerSVG()||"",s=r.getBBox(),c='<?xml version="1.0" encoding="utf-8"?>\n<!-- created with cmmn-js / http://bpmn.io -->\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+s.width+'" height="'+s.height+'" viewBox="'+s.x+" "+s.y+" "+s.width+" "+s.height+'" version="1.1">'+a+o+"</svg>";t(null,c)},o.prototype.importDefinitions=function(e,t){try{this.definitions&&this.clear(),this.definitions=e,v.importCmmnDiagram(this,e,t)}catch(e){t(e)}},o.prototype.getModules=function(){return this._modules},o.prototype.destroy=function(){m.prototype.destroy.call(this),h(this.container)},o.prototype.on=function(e,t,n,r){return this.get("eventBus").on(e,t,n,r)},o.prototype.off=function(e,t){this.get("eventBus").off(e,t)},o.prototype._init=function(e,t,n){var r=n.modules||this.getModules(),i=n.additionalModules||[],o=[{cmmnjs:["value",this],moddle:["value",t]}],a=[].concat(o,r,i),u=s(c(n,"additionalModules"),{canvas:s({},n.canvas,{container:e}),modules:a});m.call(this,u)},o.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)},o.prototype._createContainer=function(e){var t,n=e.container;return n.get&&(n=n.get(0)),u(n)&&(n=f(n)),t=d('<div class="cjs-container"></div>'),s(t.style,{width:i(e.width),height:i(e.height),position:e.position}),n.appendChild(t),t},o.prototype._createModdle=function(e){var t=s({},this._moddleExtensions,e.moddleExtensions);return new g(t)},o.prototype._modules=[e(5),e(210),e(190)];var x=e(75),_=e(416)},{100:100,190:190,210:210,257:257,392:392,395:395,398:398,402:402,415:415,416:416,418:418,419:419,5:5,69:69,75:75,76:76}],4:[function(e,t,n){"use strict";function r(e,t){this._items={},this._referencedBy={},this._elementRegistry=e,this._eventBus=t,this._init()}function i(e){return s(e)||c(e)}function o(e){return u(e,["cmmn:PlanItemDefinition","cmmn:Sentry","cmmn:CaseFileItemDefinition"])}var a=e(74),s=a.getDefinition,c=a.getSentry,u=e(45).isAny,l=e(271),p=e(389);r.$inject=["elementRegistry","eventBus"],t.exports=r,r.prototype._init=function(e){var t=this._eventBus;t.on("diagram.destroy",500,this._clear,this),t.on("diagram.clear",500,this._clear,this)},r.prototype._clear=function(){this._items={},this._referencedBy={}},r.prototype.add=function(e){var t=this._items,n=e.id,r=this._referencedBy,o=i(e),a=o&&o.id;t[n]=e,o&&(r[a]=r[a]||[],r[a].indexOf(e)===-1&&r[a].push(e))},r.prototype.remove=function(e){var t=this._items,n=e.id,r=this._referencedBy,o=i(e),a=o&&o.id;if(delete t[n],o){var s=r[a]||[],c=s.indexOf(e);c!==-1&&s.splice(c,1),s.length||delete r[a]}},r.prototype.updateId=function(e,t){var n,r;"string"==typeof e&&(e=this.get(e)),n=o(e)?this._referencedBy:this._items,e&&(r=n[e.id],delete n[e.id],n[t]=r)},r.prototype.updateReference=function(e,t){var n=this._referencedBy,r=i(e),o=r&&r.id;if(r){var a=n[o]||[],s=a.indexOf(e);s!==-1&&a.splice(s,1),a.length||delete n[o]}if(t){var c=t.id;c&&(n[c]=n[c]||[],n[c].indexOf(e)===-1&&n[c].push(e))}},r.prototype.get=function(e){return this._items[e]},r.prototype.filter=function(e){var t=[];return this.forEach(function(n,r){e(n,r)&&t.push(n)}),t},r.prototype.getAll=function(){return this.filter(function(e){return e})},r.prototype.forEach=function(e){var t=this._items;l(t,function(t){return e(t,i(t))})},r.prototype.getReferences=function(e){var t=e.id||e;return(this._referencedBy[t]||[]).slice()},r.prototype.getShape=function(e){var t=e.id||e;return this._elementRegistry&&this._elementRegistry.get(t)},r.prototype.getShapes=function(e){function t(e){e&&n.push(e)}var n=[],r=this;if(p(e))l(e,function(e){t(r.getShape(e))});else if(o(e)){var i=r.getReferences(e);l(i,function(e){t(r.getShape(e))})}else t(r.getShape(e));return n}},{271:271,389:389,45:45,74:74}],5:[function(e,t,n){t.exports={__depends__:[e(8),e(71)],itemRegistry:["type",e(4)]}},{4:4,71:71,8:8}],6:[function(e,t,n){"use strict";function r(e,t,n){function r(e,t){J[e]=t}function i(e){return J[e]}function l(e){function t(e,t){var n=s({fill:"black",strokeWidth:1,strokeLinecap:"round",strokeDasharray:"none"},t.attrs),i=t.ref||{x:0,y:0},o=t.scale||1;"none"===n.strokeDasharray&&(n.strokeDasharray=[1e4,1]);var a=t.element.attr(n).marker(0,0,20,20,i.x,i.y).attr({markerWidth:20*o,markerHeight:20*o});return r(e,a)}t("association-start",{element:e.path("M 11 5 L 1 10 L 11 15"),attrs:{fill:"none",stroke:"black",strokeWidth:1.5},ref:{x:1,y:10},scale:.5}),t("association-end",{element:e.path("M 1 5 L 11 10 L 1 15"),attrs:{fill:"none",stroke:"black",strokeWidth:1.5},ref:{x:12,y:10},scale:.5})}function p(e,n,r){return o(n)||(r=n,n=[]),t.style(n||[],s(r,e||{}))}function M(e,t,n,r,i){a(r)&&(i=r,r=0),r=r||0,i=p(i,{stroke:"black",strokeWidth:2,fill:"white"});var o=t/2,s=n/2;return e.circle(o,s,Math.round((t+n)/4-r)).attr(i)}function P(e,t,n,r,i,o){return a(i)&&(o=i,i=0),i=i||0,o=p(o,{stroke:"black",strokeWidth:2,fill:"white"}),e.rect(i,i,t-2*i,n-2*i,r).attr(o)}function A(e,t,n,r){var i=t/2,o=n/2,a=[i,0,t,o,i,n,0,o];return r=p(r,{stroke:"black",strokeWidth:2,fill:"white"}),e.polygon(a).attr(r)}function R(e,t,n){return n=p(n,["no-fill"],{strokeWidth:2,stroke:"black"}),e.path(t).attr(n)}function k(e,t,n,r,i){r=r||20;var o=r,a=n,s=0,c=n-r,u=0,l=r,p=r,d=0,f=t-r,h=0,m=t,g=r,v=t,y=n-r,x=t-r,_=n,b=[o,a,s,c,u,l,p,d,f,h,m,g,v,y,x,_];return i=i||{},i.fill="white",i.stroke="black",i.strokeWidth=2,N(e,b,i)}function N(e,t,n){return e.polygon(t).attr(n)}function I(e,t,n){return n=p(n,["no-fill"],{stroke:"black",strokeWidth:2,fill:"none"}),T(t,n).appendTo(e)}function D(e){for(var t=e.waypoints,n="m  "+t[0].x+","+t[0].y,r=1;r<t.length;r++)n+="L"+t[r].x+","+t[r].y+" ";return n}function O(e,t,n){return Z.createText(e,t||"",n).addClass("djs-label")}function B(e,t,n){var r=E(t);return O(e,r,{box:t,align:n,padding:5})}function j(e,t,n){var r=E(t),i=O(e,r,{box:t,align:n,padding:5});return i.transform("translate("+K+",0)"),i}function L(e,t){var n=g(t),r=18,i=t.width/2-60,o=n.name,a=O(e,o,{box:{height:r,width:i},align:"left-top"}),s=60,c=40,u=a.getBBox().width,l=u+c;u<s&&(l=s+c);var p=[10,0,20,-r,l,-r,l+10,0],d=N(e,p,{fill:"white",stroke:"black",strokeWidth:2,fillOpacity:.95,"pointer-events":"all"});return a.before(d),a.transform("translate(25,"+(-r-1)+")"),a}function F(e,t,n){var r=E(t),i=!1,o=S(t);if(o){var a=d(t);o="["+o+"]",r?a&&(r=r+" "+o):(r=o,t.hidden=i=!a)}return t.hidden=t.labelTarget.hidden||i||!r,O(e,r,{box:t,align:n,style:{fontSize:"11px"}})}function z(e){return ee[e]}function U(e,t){var n=g(t),r=6,i=[];y(n)&&i.push({marker:"RequiredMarker",width:1}),_(n)&&i.push({marker:"ManualActivationMarker",width:14}),x(n)&&i.push({marker:"RepetitionMarker",width:14}),i.length&&(1===i.length?H(i[0].marker,e,t,i[0].width/2*-1):2===i.length?(H(i[0].marker,e,t,i[0].width*-1-r/2),H(i[1].marker,e,t,r/2)):3===i.length&&(H(i[1].marker,e,t,i[1].width/2*-1),H(i[0].marker,e,t,i[1].width/2*-1-r-i[0].width),H(i[2].marker,e,t,i[1].width/2+r)))}function $(e,t){var n=g(t);b(n)&&H("AutoCompleteMarker",e,t,-7)}function V(e,t,n){var r=g(t),i=6;H("StageMarker",e,t,-7);var o=[];y(r)&&o.push({marker:"RequiredMarker",width:1}),b(r)&&o.push({marker:"AutoCompleteMarker",width:14}),o.length&&(1===o.length?H(o[0].marker,e,t,o[0].width*-1-7-i):2===o.length&&(H(o[0].marker,e,t,o[1].width*-1-7-i-o[0].width*-1-i),H(o[1].marker,e,t,o[1].width*-1-7-i)));var a=[];_(r)&&a.push({marker:"ManualActivationMarker",width:14}),x(r)&&a.push({marker:"RepetitionMarker",width:14}),a.length&&(1===a.length?H(a[0].marker,e,t,7+i):2===a.length&&(H(a[0].marker,e,t,7+i),H(a[1].marker,e,t,7+i+a[0].width+i)))}function G(e,t){w(t)&&H("PlanningTableMarker",e,t)}function H(e,t,n,r){z(e)(t,n,r)}function W(e,t){var n=ee[t.type];return n?n(e,t):c.prototype.drawShape.apply(this,[e,t])}function q(e,t){var n=t.type,r=ee[n];return r?r(e,t):c.prototype.drawConnection.apply(this,[e,t])}c.call(this,e);var Y=10,X=24,K=20,Q={fontFamily:"Arial, sans-serif",fontSize:"12px"},Z=new u({style:Q,size:{width:100}}),J={},ee={"cmmn:PlanItem":function(e,t){var n=v(t);return z(n.$type)(e,t)},"cmmn:DiscretionaryItem":function(e,t){var n=v(t),r={strokeDasharray:"10, 12"};return C(n,"cmmn:Task")&&s(r,{strokeDasharray:"12, 12.4",strokeDashoffset:13.6}),z(n.$type)(e,t,r)},"cmmn:Stage":function(e,t,n){n=s({fillOpacity:.95},n);var r;return m(t)?ee["cmmn:CasePlanModel"](e,t):(r=k(e,t.width,t.height,K,n),h(t)?B(e,t,"center-middle"):j(e,t,"left-top"),G(e,t),V(e,t),r)},"cmmn:PlanFragment":function(e,t,n){var r=P(e,t.width,t.height,Y,{strokeDasharray:"10, 12",fillOpacity:.95});return B(e,t,h(t)?"center-middle":"left-top"),V(e,t),r},"cmmn:CasePlanModel":function(e,t){var n=P(e,t.width,t.height,null,{fillOpacity:.95});return L(e,t),G(e,t),$(e,t),n},"cmmn:Milestone":function(e,t,n){var r=P(e,t.width,t.height,X,n);return B(e,t,"center-middle"),U(e,t),r},"cmmn:EventListener":function(e,t,n){var r=M(e,t.width,t.height,n);return n=n||{},n.strokeWidth=2,M(e,t.width,t.height,.1*t.height,n),r},"cmmn:TimerEventListener":function(e,t,r){var i=z("cmmn:EventListener")(e,t,r),o=n.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.5}});R(e,o,{strokeWidth:2,strokeLinecap:"square"});for(var a=0;a<12;a++){var s=n.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.5}}),c=t.width/2,u=t.height/2;R(e,s,{strokeWidth:1,strokeLinecap:"square",transform:"rotate("+30*a+","+u+","+c+")"})}return i},"cmmn:UserEventListener":function(e,t,r){var i=z("cmmn:EventListener")(e,t,r),o=20,a=15,s=n.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:o,y:a}});R(e,s,{strokeWidth:.5,fill:"none"});var c=n.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:o,y:a}});R(e,c,{strokeWidth:.5,fill:"none"});var u=n.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:o,y:a}});return R(e,u,{strokeWidth:.5,fill:"black"}),i},"cmmn:Task":function(e,t,n){var r=P(e,t.width,t.height,Y,n);return B(e,t,"center-middle"),U(e,t),r},"cmmn:HumanTask":function(e,t,r){var i=z("cmmn:Task")(e,t,r),o=t.businessObject,a=o.definitionRef;if(a.isBlocking){var s=15,c=12,u=n.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:s,y:c}});R(e,u,{strokeWidth:.5,fill:"none"});var l=n.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:s,y:c}});R(e,l,{strokeWidth:.5,fill:"none"});var p=n.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:s,y:c}});R(e,p,{strokeWidth:.5,fill:"black"})}else{var d=n.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}});R(e,d,{strokeWidth:1.25,fill:"white",stroke:"black"})}return G(e,t),i},"cmmn:CaseTask":function(e,t,r){var i=z("cmmn:Task")(e,t,r),o=n.getScaledPath("TASK_TYPE_FOLDER",{abspos:{x:7,y:7}});return R(e,o,{strokeWidth:1.25,fill:"white",stroke:"black"}),i},"cmmn:ProcessTask":function(e,t,r){var i=z("cmmn:Task")(e,t,r),o=n.getScaledPath("TASK_TYPE_CHEVRON",{abspos:{x:5,y:5}});return R(e,o,{strokeWidth:1.25,fill:"white",stroke:"black"}),i},"cmmn:DecisionTask":function(e,t,r){var i=z("cmmn:Task")(e,t,r),o=n.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}}),a=R(e,o);a.attr({strokeWidth:1,fill:"AAA"});var s=n.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}}),c=R(e,s);return c.attr({strokeWidth:1}),i},"cmmn:CaseFileItem":function(e,t,r){var i=n.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.474,my:.296}});return R(e,i,{fill:"white"})},"cmmn:TextAnnotation":function(e,t){var r={fill:"none",stroke:"none"},i=P(e,t.width,t.height,0,0,r),o=n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:0}});R(e,o);var a=g(t).text||"";return O(e,a,{box:t,align:"left-middle",padding:5}),i},"cmmn:Association":function(e,t,n){var r=g(t);return n=s({strokeDasharray:"0.5, 5",strokeLinecap:"round",strokeLinejoin:"round"},n||{}),"One"!==r.associationDirection&&"Both"!==r.associationDirection||(n.markerEnd=i("association-end")),"Both"===r.associationDirection&&(n.markerStart=i("association-start")),I(e,t.waypoints,n)},StageMarker:function(e,t){var r=P(e,14,14,0,{strokeWidth:1,stroke:"black"});r.transform("translate("+(t.width/2-7)+","+(t.height-17)+")");var i=h(t)?"MARKER_STAGE_COLLAPSED":"MARKER_STAGE_EXPANDED",o=n.getScaledPath(i,{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2-7)/t.width,my:(t.height-17)/t.height}});R(e,o)},RequiredMarker:function(e,t,r){var i=n.getScaledPath("MARKER_REQUIRED",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+r)/t.width,my:(t.height-17)/t.height}});R(e,i,{strokeWidth:3})},AutoCompleteMarker:function(e,t,n){var r=P(e,11,14,0,{strokeWidth:1,stroke:"black",fill:"black"});r.transform("translate("+(t.width/2+n+2)+","+(t.height-17)+")")},ManualActivationMarker:function(e,t,r){var i=n.getScaledPath("MARKER_MANUAL_ACTIVATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+r)/t.width,my:(t.height-17)/t.height}});R(e,i,{strokeWidth:1})},RepetitionMarker:function(e,t,r){var i=n.getScaledPath("MARKER_REPEATABLE",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+r)/t.width,my:(t.height-17)/t.height}});R(e,i)},PlanningTableMarker:function(e,t,r){var i=P(e,30,24,0,{strokeWidth:1.5,stroke:"black"});i.transform("translate("+(t.width/2-15)+","+-17+")");var o=f(t),a=o?"MARKER_PLANNING_TABLE_COLLAPSED":"MARKER_PLANNING_TABLE_EXPANDED",s=n.getScaledPath(a,{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2-15)/t.width,my:-17/t.height}});R(e,s,{strokeWidth:1.5})},"cmmn:OnPart":function(e,t){var n=D(t),r=R(e,n,{strokeDasharray:"10, 5, 2, 5, 2, 5",strokeWidth:1.5});return r},"cmmn:PlanItemOnPart":function(e,t){return z("cmmn:OnPart")(e,t)},"cmmn:CaseFileItemOnPart":function(e,t){return z("cmmn:OnPart")(e,t)},"cmmn:EntryCriterion":function(e,t){return A(e,t.width,t.height,{fill:"white"})},"cmmn:ExitCriterion":function(e,t){return A(e,t.width,t.height,{fill:"black"})},"cmmndi:CMMNEdge":function(e,t){var n=g(t);if(n.cmmnElementRef)return z(n.cmmnElementRef.$type)(e,t);var r=D(t),i=R(e,r,{strokeDasharray:"3, 5",strokeWidth:1});return i},label:function(e,t){return F(e,t,"")}};this.canRender=function(e){return C(e,"cmmn:CMMNElement")||C(e,"cmmndi:CMMNEdge")},this.drawShape=W,this.drawConnection=q,e.on("canvas.init",function(e){l(e.svg)})}var i=e(257),o=e(389),a=e(393),s=e(398),c=e(111),u=e(247),l=e(72),p=e(74),d=l.isStandardEventVisible,f=l.isPlanningTableCollapsed,h=l.isCollapsed,m=p.isCasePlanModel,g=p.getBusinessObject,v=p.getDefinition,y=p.isRequired,x=p.isRepeatable,_=p.isManualActivation,b=p.isAutoComplete,w=p.hasPlanningTable,E=p.getName,C=p.is,S=p.getStandardEvent,T=e(246).createLine;i(r,c),r.$inject=["eventBus","styles","pathMap"],t.exports=r},{111:111,246:246,247:247,257:257,389:389,393:393,398:398,72:72,74:74}],7:[function(e,t,n){"use strict";function r(){var e="m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5",t="m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005",n="m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z";this.pathMap={TASK_TYPE_FOLDER:{d:"m {mx},{my} l18,0 l0,12 l-18,0 l0,-12 m 2,0 l3,-4 l5,0 l3,4"},TASK_TYPE_CHEVRON:{d:"m {mx},{my} l15,0 l6,6 l-6,6 l-15,0 l6,-6 l-6,-6"},TASK_TYPE_USER_1:{d:e},TASK_TYPE_USER_2:{d:t},TASK_TYPE_USER_3:{d:n},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_USER_1:{d:e,height:36,width:36,heightElements:[],widthElements:[]},EVENT_USER_2:{d:t,height:36,width:36,heightElements:[],widthElements:[]},EVENT_USER_3:{d:n,height:36,width:36,heightElements:[],widthElements:[]},MARKER_STAGE_EXPANDED:{d:"m{mx},{my} m 2,7 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_STAGE_COLLAPSED:{d:"m{mx},{my} m 2,7 l 10,0 m -5,-5 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_REQUIRED:{d:"m{mx},{my} l 0,9 m 0,2 l0,3",height:14,width:3,heightElements:[],widthElements:[]},MARKER_MANUAL_ACTIVATION:{d:"m{mx}, {my} l 14,7 l -14,7 l 0,-14 z",height:14,width:14,heightElements:[],widthElements:[]},MARKER_REPEATABLE:{d:"m{mx},{my} m 3,0 l 0,14 m 6,-14 l 0,14 m -10,-10 l 14,0 m -14,6 l 14,0",height:14,width:14,heightElements:[],widthElements:[]},MARKER_PLANNING_TABLE_EXPANDED:{d:"m{mx},{my} m 0,12 l 30,0 m -20,-12 l 0, 24 m 10, -24 l 0, 24 m -10, -6 l 10,0",height:24,width:30,heightElements:[],widthElements:[]},MARKER_PLANNING_TABLE_COLLAPSED:{d:"m{mx},{my} m 0,12 l 30,0 m -20,-12 l 0, 24 m 10, -24 l 0, 24 m -10, -6 l 10,0 m -5, -6 l 0,12",height:10,width:10,heightElements:[],widthElements:[]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]}},this.getRawPath=function(e){return this.pathMap[e].d},this.getScaledPath=function(e,t){var n,r,o=this.pathMap[e];t.abspos?(n=t.abspos.x,r=t.abspos.y):(n=t.containerWidth*t.position.mx,r=t.containerHeight*t.position.my);var a={};if(t.position){for(var s=t.containerHeight/o.height*t.yScaleFactor,c=t.containerWidth/o.width*t.xScaleFactor,u=0;u<o.heightElements.length;u++)a["y"+u]=o.heightElements[u]*s;for(var l=0;l<o.widthElements.length;l++)a["x"+l]=o.widthElements[l]*c}var p=i.format(o.d,{mx:n,my:r,e:a});return p}}var i=e(248);t.exports=r},{248:248}],8:[function(e,t,n){t.exports={__init__:["cmmnRenderer"],cmmnRenderer:["type",e(6)],pathMap:["type",e(7)]}},{6:6,7:7}],9:[function(e,t,n){"use strict";function r(e){c.call(this,e)}var i=e(74).is,o=e(74).getDefinition,a=e(257),s=e(271),c=e(118);a(r,c),r.$inject=["eventBus"],t.exports=r,r.prototype.canResize=function(e,t){if(i(t,"cmmn:CMMNElement")){var n=!0;if(s(e,function(e){if(!i(e,"cmmn:Criterion"))return void(n=!1)}),!n){var r=o(t);return i(r,"cmmn:PlanFragment")}}}},{118:118,257:257,271:271,74:74}],10:[function(e,t,n){t.exports={__init__:["cmmnAutoResizeProvider"],__depends__:[e(119)],cmmnAutoResizeProvider:["type",e(9)]}},{119:119,9:9}],11:[function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s){e.registerProvider(this),this._contextPad=e,this._connect=t,this._create=n,this._elementFactory=r,this._modeling=i,this._rules=o,this._popupMenu=a,this._canvas=s}function i(e){var t=l(e);return u(t,"cmmn:HumanTask")&&t.isBlocking}var o=e(398),a=e(389),s=e(45).isAny,c=e(74),u=c.is,l=c.getDefinition;r.$inject=["contextPad","connect","create","elementFactory","modeling","rules","popupMenu","canvas"],t.exports=r,r.prototype.getContextPadEntries=function(e){function t(t){m.removeElements([e])}function n(e){var t=5,n=g.getContainer(),r=p.getPad(e).html,i=n.getBoundingClientRect(),o=r.getBoundingClientRect(),a=o.top-i.top,s=o.left-i.left,c={x:s,y:a+o.height+t};return c}function r(e,t,n){d.start(e,t,n)}function c(e,t,n){function r(e,t){var n=h.createCriterionShape("cmmn:EntryCriterion");f.start(e,n,t)}return l("cmmn:EntryCriterion",e,t,n,r)}function u(e,t,n){function r(e,t){var n=h.createDiscretionaryItemShape("cmmn:Task");f.start(e,n,t)}return l("cmmn:DiscretionaryItem",e,t,n,r)}function l(e,t,n,r,i){function a(t,n){var i=h.createShape(o({type:e},r));f.start(t,i,n)}return"string"!=typeof n&&(r=n,n="Append "+e.replace(/^cmmn\:/,"")),{group:"model",className:t,title:n,action:{dragstart:i||a,click:i||a}}}var p=this._contextPad,d=this._connect,f=this._create,h=this._elementFactory,m=this._modeling,g=this._canvas,v=this._rules,y=this._popupMenu,x={};if("label"===e.type)return x;s(e,["cmmn:PlanItem","cmmn:CaseFileItem"])&&o(x,{"append.entryCriterion":c("cmmn-icon-entry-criterion","Append Criterion")}),i(e)&&o(x,{"append.discretionaryItem":u("cmmn-icon-task-discretionary","Append DiscretionaryItem")});var _;y._providers["cmmn-replace"]&&(_=y.create("cmmn-replace",e)),_&&!_.isEmpty()&&o(x,{replace:{group:"edit",className:"cmmn-icon-screw-wrench",title:"Change type",action:{click:function(e,t){_.open(o(n(t),{cursor:{x:e.x,y:e.y}}),t)}}}}),s(e,["cmmndi:CMMNEdge","cmmn:TextAnnotation"])||o(x,{"append.text-annotation":l("cmmn:TextAnnotation","cmmn-icon-text-annotation")}),s(e,["cmmn:PlanItem","cmmn:DiscretionaryItem","cmmn:CaseFileItem","cmmn:Criterion"])&&o(x,{connect:{group:"connect",className:"cmmn-icon-connection",title:"Connect using Discretionary/OnPart or Association",action:{click:r,dragstart:r}}});var b=v.allowed("elements.delete",{elements:[e]});return a(b)&&(b=b[0]===e),b&&o(x,{delete:{group:"edit",className:"cmmn-icon-trash",title:"Remove",action:{click:t,dragstart:t}}}),x}},{389:389,398:398,45:45,74:74}],12:[function(e,t,n){t.exports={__depends__:[e(133),e(135),e(139),e(210),e(54)],__init__:["contextPadProvider"],contextPadProvider:["type",e(11)]}},{11:11,133:133,135:135,139:139,210:210,54:54}],13:[function(e,t,n){"use strict";function r(e){e.registerProvider(this)}function i(e){return!e||o(e)}function o(e){return e.labelTarget}var a=e(45).isAny;r.$inject=["globalConnect"],t.exports=r,r.prototype.canStartConnect=function(e){if(i(e))return null;var t=e.businessObject;return a(t,["cmmn:CaseFileItem","cmmn:Criterion","cmmn:DiscretionaryItem","cmmn:PlanItem"])}},{45:45}],14:[function(e,t,n){t.exports={__depends__:[e(146)],__init__:["cmmnGlobalConnect"],cmmnGlobalConnect:["type",e(13)]}},{13:13,146:146}],15:[function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s,c,u,l){var p={selectElements:function(){var t=e.getRootElement(),n=r.filter(function(e){return e!=t});c.select(n)},spaceTool:function(){l.toggle()},lassoTool:function(){s.toggle()},handTool:function(){o.toggle()},globalConnectTool:function(){i.toggle()},directEditing:function(){var e=c.get();e.length&&t.activate(e[0])},find:function(){u.toggle()}};n.register(p),a.addListener(function(e,t){if(65===e&&a.isCmd(t))return n.trigger("selectElements"),!0;if(70===e&&a.isCmd(t))return n.trigger("find"),!0;if(!a.hasModifier(t))return 83===e?(n.trigger("spaceTool"),!0):76===e?(n.trigger("lassoTool"),!0):72===e?(n.trigger("handTool"),!0):67===e?(n.trigger("globalConnectTool"),!0):69===e?(n.trigger("directEditing"),!0):void 0})}r.$inject=["canvas","directEditing","editorActions","elementRegistry","globalConnect","handTool","keyboard","lassoTool","selection","searchPad","spaceTool"],t.exports=r},{}],16:[function(e,t,n){t.exports={__depends__:[e(148),e(152),e(156),e(217),e(90),e(14),e(63)],__init__:["cmmnKeyBindings"],cmmnKeyBindings:["type",e(15)]}},{14:14,148:148,15:15,152:152,156:156,217:217,63:63,90:90}],17:[function(e,t,n){"use strict";function r(e,t,n,r){n.registerProvider(this),r.registerHandler("element.updateLabel",i),e.on("element.dblclick",function(e){n.activate(e.element)}),e.on(["element.mousedown","drag.init","canvas.viewbox.changed"],function(e){n.complete()}),e.on(["commandStack.changed"],function(){n.cancel()}),"ontouchstart"in document.documentElement||e.on("create.end",500,function(e){var t=e.shape,r=e.context.canExecute;r&&n.activate(t)}),this._canvas=t,this._commandStack=r}var i=e(19),o=e(18),a=e(74).isCasePlanModel,s=e(74).is,c=e(74).getDefinition,u={width:150,height:50};r.$inject=["eventBus","canvas","directEditing","commandStack"],t.exports=r,r.prototype.activate=function(e){var t=o.getLabel(e);if(void 0!==t&&e.parent){var n=c(e),r=this.getEditingBBox(e);a(e)&&(r.height=50,r.width=200,r.y-=30),s(n,"cmmn:PlanFragment")&&(r.height=50);var i=u.width,l=u.height;return s(n,"cmmn:Task")&&(i=100),r.width<i&&(r.x+=r.width/2-i/2,r.width=i),r.height<l&&(r.height=l),{bounds:r,text:t}}},r.prototype.getEditingBBox=function(e,t){var n=e.label||e,r=this._canvas.getAbsoluteBBox(n);return r},r.prototype.update=function(e,t){this._commandStack.execute("element.updateLabel",{element:e,newLabel:t})}},{18:18,19:19,74:74}],18:[function(e,t,n){"use strict";function r(e){return a(e,"cmmn:TextAnnotation")?"text":"name"}function i(e){var t=c(e);return a(t,"cmmndi:CMMNEdge")&&t.cmmnElementRef&&(t=t.cmmnElementRef),t}function o(e){return!s(e,["cmmn:Association","cmmn:Criterion","cmmndi:CMMNEdge"])}var a=e(74).is,s=e(45).isAny,c=e(74).getBusinessObject,u=function(e){return s(e,["cmmn:PlanItem","cmmn:DiscretionaryItem","cmmn:CaseFileItem"])},l=function(e){var t=i(e),n=r(t);if(o(t))return!t[n]&&u(e)&&(t=t.definitionRef),t[n]||""};t.exports.getLabel=l;var p=function(e,t,n,o){var a=i(e),s=r(a);return!a[s]&&u(e)&&o&&(a=a.definitionRef),a[s]=t,n&&(e.hidden=!t),e};t.exports.setLabel=p},{45:45,74:74}],19:[function(e,t,n){"use strict";function r(e){function t(e,t){var r=e.label||e,o=e.labelTarget||e;return i.setLabel(r,t,o!==r,n(e)),[r,o]}function n(t){var n=o(t);return!n||1===e.getReferences(n).length}function r(e){return e.oldLabel=i.getLabel(e.element),t(e.element,e.newLabel)}function a(e){return t(e.element,e.oldLabel)}this.execute=r,this.revert=a}var i=e(18),o=e(74).getDefinition;r.$inject=["itemRegistry"],t.exports=r},{18:18,74:74}],20:[function(e,t,n){t.exports={__depends__:[e(104),e(129),e(90)],__init__:["labelEditingProvider"],labelEditingProvider:["type",e(17)]
}},{104:104,129:129,17:17,90:90}],21:[function(e,t,n){"use strict";function r(e){this._model=e}var i=e(273),o=e(398),a=e(404),s=e(45).isAny;r.$inject=["moddle"],r.prototype._needsId=function(e){return s(e,["cmmn:CMMNElement","cmmndi:CMMNShape","cmmndi:CMMNEdge","cmmndi:CMMNStyle","cmmndi:CMMNDiagram"])},r.prototype._ensureId=function(e){var t=(e.$type||"").replace(/^[^:]*:/g,"")+"_";!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))},r.prototype.create=function(e,t){var n=this._model.create(e,t||{});return this._ensureId(n),n},r.prototype.createDiLabel=function(){return this.create("cmmndi:CMMNLabel")},r.prototype.createDiShape=function(e,t,n){return this.create("cmmndi:CMMNShape",o({cmmnElementRef:e,bounds:this.createDiBounds(t),label:this.createDiLabel()},n))},r.prototype.createDiEdge=function(e,t,n){return this.create("cmmndi:CMMNEdge",o({cmmnElementRef:e,label:this.createDiLabel()},n))},r.prototype.createDiBounds=function(e){return this.create("dc:Bounds",e)},r.prototype.createDiWaypoints=function(e){return i(e,function(e){return this.createDiWaypoint(e)},this)},r.prototype.createDiWaypoint=function(e){return this.create("dc:Point",a(e,["x","y"]))},r.prototype.createItem=function(e,t){var n=this.create(t);return this.create(e,{definitionRef:n})},r.prototype.createCriterion=function(e,t){return t=t||{},t.sentryRef||(t=o({sentryRef:this.createSentry()},t)),this.create(e,t)},r.prototype.createSentry=function(e){return this.create("cmmn:Sentry",e)},r.prototype.createCasePlanModel=function(){var e=this.create("cmmn:Stage");this._model.ids.unclaim(e.id),e.id=this._model.ids.nextPrefixed("CasePlanModel_",e);var t=this.create("cmmn:Case",{casePlanModel:e});return e.$parent=t,e},r.prototype.createCaseFileModel=function(e){var t=this.create("cmmn:CaseFile");return this._model.ids.unclaim(t.id),t.id=this._model.ids.nextPrefixed("CaseFileModel_",t),t.$parent=e,t},r.prototype.createCaseFileItem=function(e){return e=e||{},e.definitionRef||(e=o({definitionRef:this.create("cmmn:CaseFileItemDefinition")},e)),this.create("cmmn:CaseFileItem",e)},t.exports=r},{273:273,398:398,404:404,45:45}],22:[function(e,t,n){"use strict";function r(){}function i(e,t){return e?e.original||e:c(t)}var o=e(257),a=e(220),s=e(223),c=e(222).getMid;o(r,a),t.exports=r,r.prototype.layoutConnection=function(e,t){t=t||{};var n=e.source,r=e.target,o=e.waypoints,a=t.connectionStart,c=t.connectionEnd;a||(a=i(o&&o[0],n)),c||(c=i(o&&o[o.length-1],r));var u=s.repairConnection(n,r,a,c,o,t);return u||[a,c]}},{220:220,222:222,223:223,257:257}],23:[function(e,t,n){"use strict";function r(e,t,n,r){function o(e){var t,n=e.context;n.cropped||(t=n.connection,t.waypoints=r.getCroppedWaypoints(t),n.cropped=!0)}function a(e){var t=e.context;v.updateParent(t.shape||t.connection,t.oldParent)}function s(e){var t=e.context,n=t.shape||t.connection,r=t.parent||t.newParent;v.updateParent(n,r)}function c(e){var t=e.context.shape;v.updateBounds(t)}function u(e){v.updateConnection(e.context)}function p(e){v.updateConnectionWaypoints(e.context.connection)}function f(e){v.updateAttachment(e.context)}function h(e){var t=e.context,r=t.shape,i=d(r);n.add(i)}function m(e){var t=e.context,r=t.shape;if(!g(r)){var i=d(r);n.remove(i)}}l.call(this,e),this._cmmnFactory=t,this._itemRegistry=n;var v=this;this.executed(["connection.layout","connection.create","connection.reconnectEnd","connection.reconnectStart"],o),this.reverted(["connection.layout","connection.create","connection.reconnectEnd","connection.reconnectStart"],function(e){delete e.context.cropped}),this.executed(["shape.create","shape.move","shape.delete","connection.delete","connection.create"],i(a)),this.reverted(["shape.create","shape.move","shape.delete","connection.delete","connection.create"],i(s)),this.executed(["shape.create","shape.move","shape.resize"],i(c)),this.reverted(["shape.create","shape.move","shape.resize"],i(c)),this.executed(["connection.create","connection.move","connection.delete","connection.reconnectEnd","connection.reconnectStart"],i(u)),this.reverted(["connection.create","connection.move","connection.delete","connection.reconnectEnd","connection.reconnectStart"],i(u)),this.executed(["connection.create","connection.layout","connection.move","connection.reconnectStart","connection.reconnectEnd","connection.updateWaypoints"],i(p)),this.reverted(["connection.create","connection.layout","connection.move","connection.reconnectStart","connection.reconnectEnd","connection.updateWaypoints"],i(p)),this.executed(["element.updateAttachment"],i(f)),this.reverted(["element.updateAttachment"],i(f)),this.executed("shape.create",i(h)),this.reverted("shape.create",i(m)),this.executed("shape.delete",i(m)),this.reverted("shape.delete",i(h))}function i(e){return function(t){var n=t.context,r=n.shape||n.connection;(f(r,"cmmn:CMMNElement")||f(r,"cmmndi:CMMNDiagramElement"))&&e(t)}}function o(e){return m(e,"cmmn:Definitions")}function a(e){return!v(e,["cmmn:CaseFileItem","cmmn:Criterion","cmmn:DiscretionaryItem","cmmn:OnPart","cmmndi:CMMNEdge"])}function s(e){return e=e.businessObject||e,!(!e.cmmnElementRef||!f(e.cmmnElementRef,"cmmn:Association"))}var c=e(398),u=e(257),l=e(102),p=e(232),d=e(74).getBusinessObject,f=e(74).is,h=e(74).isCasePlanModel,m=e(45).getParent,g=e(45).isLabel,v=e(45).isAny;u(r,l),t.exports=r,r.$inject=["eventBus","cmmnFactory","itemRegistry","connectionDocking"],r.prototype.updateAttachment=function(e){var t=e.shape,n=d(t),r=t.host,i=r&&d(r);this.updateSemanticParent(n,i)},r.prototype.updateParent=function(e,t){if(!g(e)){var n=d(e),r=d(e.parent),i=n.di||n,o=r&&r.di;s(n)&&(n=n.cmmnElementRef),a(n)&&this.updateSemanticParent(n,r),f(r,"cmmndi:CMMNDiagram")&&(o=r),this.updateDiParent(i,o)}},r.prototype.updateSemanticParent=function(e,t){var n;if(e.$parent!==t){if(f(e,"cmmn:PlanItem")?(n="planItems",t&&!h(t)&&(t=t.definitionRef)):h(e)?(n="cases",e=e.$parent,t=t&&o(t)):f(e,"cmmn:EntryCriterion")?(h(t)&&(t=null),n="entryCriteria"):f(e,"cmmn:ExitCriterion")?n="exitCriteria":f(e,"cmmn:Artifact")&&(t=t&&o(t),n="artifacts"),!n)throw new Error("no parent for ",e,t);var r;e.$parent&&(r=e.$parent.get(n),p.remove(r,e)),t?(r=t.get(n),r.push(e),e.$parent=t):e.$parent=null}},r.prototype.updateDiParent=function(e,t){if(t&&!f(t,"cmmndi:CMMNDiagram")&&(t=t.$parent),e.$parent!==t){var n=(t||e.$parent).get("diagramElements");t?(n.push(e),e.$parent=t):(p.remove(n,e),e.$parent=null)}},r.prototype.updateBounds=function(e){var t=e.businessObject.di||e.businessObject,n=g(e)?this._getLabel(t).bounds:t.bounds;c(n,{x:e.x,y:e.y,width:e.width,height:e.height})},r.prototype.updateConnectionWaypoints=function(e){var t=e.businessObject;t.set("waypoint",this._cmmnFactory.createDiWaypoints(e.waypoints))},r.prototype.updateConnection=function(e){var t,n,r,i,o=e.connection,a=d(o),s=d(o.source),c=d(o.target),u=a.cmmnElementRef;if(f(u,"cmmn:Association"))t=u,n=u,r="sourceRef",i="targetRef";else if(n=a,i="targetCMMNElementRef",f(u,"cmmn:OnPart")){t=u,r="sourceRef";var l;f(s,"cmmn:ExitCriterion")&&(l=s,s=m(l)),u.exitCriterionRef!==l&&(u.exitCriterionRef=l)}else t=a,r="sourceCMMNElementRef";r&&t[r]!==s&&(t[r]=s),i&&n[i]!==c&&(n[i]=c),this.updateConnectionWaypoints(o)},r.prototype._getLabel=function(e){return e.label||(e.label=this._cmmnFactory.createDiLabel()),e.label.bounds||(e.label.bounds=this._cmmnFactory.createDiBounds()),e.label}},{102:102,232:232,257:257,398:398,45:45,74:74}],24:[function(e,t,n){"use strict";function r(e,t){a.call(this),this._cmmnFactory=e,this._moddle=t}var i=e(398),o=e(257),a=e(106),s=e(73),c=e(74).is,u=e(74).getDefinition,l=e(74).isCasePlanModel,p=e(72).isCollapsed;o(r,a),r.$inject=["cmmnFactory","moddle"],t.exports=r,r.prototype.baseCreate=a.prototype.create,r.prototype.create=function(e,t){return"label"===e?this.baseCreate(e,i({type:"label"},s.DEFAULT_LABEL_SIZE,t)):"root"===e?this.baseCreate(e,t):this.createCmmnElement(e,t)},r.prototype.createCmmnElement=function(e,t){var n;t=t||{};var r=t.businessObject;if(!r){if(!t.type)throw new Error("no shape type specified");var o={};t.name&&i(o,{name:t.name}),r=this._cmmnFactory.create(t.type,o)}if("connection"===e&&(c(r,"cmmndi:CMMNEdge")||(r=this._cmmnFactory.createDiEdge(r,[],{id:r.id+"_di"})),r.label||(r.label=this._cmmnFactory.createDiLabel()),t.type="cmmndi:CMMNEdge"),t.definitionType){var a=this._cmmnFactory.create(t.definitionType);r.definitionRef=a}return t.sentryRef&&(r.sentryRef=t.sentryRef),"shape"!==e||r.di||(r.di=this._cmmnFactory.createDiShape(r,{},{id:r.id+"_di"})),t.isCollapsed&&(r.di.isCollapsed=t.isCollapsed),t.isPlanningTableCollapsed&&(r.di.isPlanningTableCollapsed=t.isPlanningTableCollapsed),t.isStandardEventVisible&&(r.isStandardEventVisible=t.isStandardEventVisible),void 0!==t.isBlocking&&(r.definitionRef.isBlocking=t.isBlocking),t.autoComplete&&(r.definitionRef.autoComplete=!0),n=this._getDefaultSize(r),t=i({businessObject:r,id:r.id},n,t),this.baseCreate(e,t)},r.prototype._getDefaultSize=function(e){var t=u(e);return l(e)?{width:400,height:250}:c(t,"cmmn:PlanFragment")?p(e)?{width:100,height:80}:{width:350,height:200}:c(t,"cmmn:Milestone")?{width:100,height:40}:c(t,"cmmn:EventListener")?{width:36,height:36}:c(e,"cmmn:Criterion")?{width:20,height:28}:c(e,"cmmn:TextAnnotation")?{width:100,height:30}:c(e,"cmmn:CaseFileItem")?{width:36,height:50}:{width:100,height:80}},r.prototype.createPlanItemShape=function(e){return this.createShape({type:"cmmn:PlanItem",businessObject:this._cmmnFactory.createItem("cmmn:PlanItem",e)})},r.prototype.createDiscretionaryItemShape=function(e){return this.createShape({type:"cmmn:DiscretionaryItem",businessObject:this._cmmnFactory.createItem("cmmn:DiscretionaryItem",e)})},r.prototype.createCasePlanModelShape=function(){return this.createShape({type:"cmmn:Stage",businessObject:this._cmmnFactory.createCasePlanModel()})},r.prototype.createCriterionShape=function(e){return this.createShape({type:e,businessObject:this._cmmnFactory.createCriterion(e)})},r.prototype.createCaseFileItemShape=function(){return this.createShape({type:"cmmn:CaseFileItem",businessObject:this._cmmnFactory.createCaseFileItem()})}},{106:106,257:257,398:398,72:72,73:73,74:74}],25:[function(e,t,n){"use strict";function r(e,t,n,r,i){a.call(this,e,t,n),this._cmmnRules=r,this._rules=i}var i=e(257),o=e(398),a=e(157),s=e(37),c=e(39),u=e(40),l=e(42),p=e(43),d=e(41),f=e(38);i(r,a),r.$inject=["eventBus","elementFactory","commandStack","cmmnRules","rules"],t.exports=r,r.prototype.getHandlers=function(){var e=a.prototype.getHandlers.call(this);return e["shape.append"]=s,e["shape.replace"]=u,e["connection.reconnectStart"]=c,e["connection.reconnectEnd"]=c,e["element.updateProperties"]=l,e["element.updateSemanticParent"]=p,e["element.updateControls"]=d,e["id.updateClaim"]=f,e},r.prototype.connect=function(e,t,n){var r=this._rules;return n||(n=r.allowed("connection.create",{source:e,target:t})||{type:"cmmn:Association"}),n.reverse?this.createConnection(t,e,n,t.parent):this.createConnection(e,t,n,e.parent)},r.prototype.createConnection=function(e,t,n,r,i){"object"==typeof n&&(i=r,r=n,n=void 0);var a={source:e,target:t,parent:i,parentIndex:n,canExecute:r};return r=this._create("connection",r),o(a,{connection:r}),this._commandStack.execute("connection.create",a),a.connection},r.prototype.reconnectStart=function(e,t,n,r){var i={connection:e,newSource:t,dockingOrPoints:n,hints:r||{}};this._commandStack.execute("connection.reconnectStart",i)},r.prototype.reconnectEnd=function(e,t,n,r){var i={connection:e,newTarget:t,dockingOrPoints:n,hints:r||{}};this._commandStack.execute("connection.reconnectEnd",i)},r.prototype.updateProperties=function(e,t,n){this._commandStack.execute("element.updateProperties",{element:e,properties:t,shape:n})},r.prototype.updateSemanticParent=function(e,t,n,r){this._commandStack.execute("element.updateSemanticParent",{element:e,newParent:t,containment:n,shape:r})},r.prototype.updateControls=function(e,t){this._commandStack.execute("element.updateControls",{element:e,values:t})},r.prototype.claimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t,claiming:!0})},r.prototype.unclaimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t})}},{157:157,257:257,37:37,38:38,39:39,398:398,40:40,41:41,42:42,43:43}],26:[function(e,t,n){"use strict";function r(e){o.call(this,e),this.preExecute(["shape.create","elements.move"],function(e){var t=e.shape,n=e.shapes,r=e.parent||e.newParent,i=e.host||e.newHost;r&&i&&c(i)&&(n&&n.length>1||(t=t||n[0],s(t,"cmmn:Criterion")&&(e.parent=e.parent&&i,e.newParent=e.newParent&&i)))},!0)}var i=e(257),o=e(102),a=e(74),s=a.is,c=a.isCasePlanModel;r.$inject=["eventBus"],i(r,o),t.exports=r},{102:102,257:257,74:74}],27:[function(e,t,n){"use strict";function r(e,t,n,r){function u(e){var t=x(e),i=t.caseFileModel;return i||(i=n.createCaseFileModel(t),r.updateProperties(t,{caseFileModel:i})),i}function f(e){var t=e&&e.get(C);if(t&&!t.length){var n="caseFileModel",i=e.$parent;a(e)||(n="children");var o={};o[n]=void 0,r.updateProperties(i,o),r.updateSemanticParent(e)}}function h(e){e=g(e);var t=e.sourceRef;t&&(v(t,function(t){return e===t}),r.updateProperties(e,{sourceRef:void 0}))}function v(e,t){e=g(e);var n,i=e&&e.get("targetRefs");i&&i.length&&(n=i.slice(),p(i,function(i){var o=!t||t(i);if(o){i.sourceRef===e&&r.updateProperties(i,{sourceRef:void 0});var a=n.indexOf(i);a!==-1&&n.splice(a,1)}}),i.length!==n.length&&r.updateProperties(e,{targetRefs:n}))}function y(e,t,n){e=g(e);var i=e.children,o=i&&i.get(C);o&&o.length&&(p(o,function(e){var i=!n||n(e);i&&r.updateSemanticParent(e,t,C)}),f(i))}function E(e){var n=m(e);return n&&1===t.getReferences(n).length}this._cmmnFactory=n,this._modeling=r,l.call(this,e);var C="caseFileItems";this.preExecuted("shape.create",function(e){var t,n,a,s=e.shape,c=e.parent,l=g(c);o(s)&&(n=m(s),n&&(t=i(l),r.updateSemanticParent(n,t,"caseFileItemDefinitions")),a=u(c),r.updateSemanticParent(s,a,C))},!0),this.preExecuted("elements.move",function(e){var t,n=e.newParent,i=e.hints,l=i&&i.primaryShape&&i.primaryShape.parent,m=e.closure||{},x=m.allShapes;n&&l!==n&&(x=d(x,function(e){return o(e)&&!w(e)&&!b(e.parent,n)}),x&&x.length&&(t=u(n),x=s(x),p(x,function(e){var n=g(e),i=c(n),o=_(n);if(a(o))r.updateSemanticParent(e,t,C);else{var s=_(n,"cmmn:CaseFileItem");x[s.id]||r.updateSemanticParent(e,t,C)}var u=n.sourceRef;u&&!x[u.id]&&h(n),v(n,function(e){return!x[e.id]}),y(n,i,function(e){return!x[e.id]}),f(o)})))},!0),this.postExecuted("shape.delete",function(e){var t,n=e.shape,i=g(n);if(o(n)&&!w(n)){var a=_(i),s=c(i);r.updateSemanticParent(n,null,C),h(n),v(n),y(i,s),f(a),E(n)&&(t=m(n),r.updateSemanticParent(t,null,"caseFileItemDefinitions"))}},!0)}function i(e){return _(e,"cmmn:Definitions")}function o(e){return v(e,"cmmn:CaseFileItem")}function a(e){return v(e,"cmmn:CaseFile")}function s(e){return f(e,function(e,t){return e[t.id]=t,e},{})}function c(e){return _(g(e),"cmmn:CaseFile")}var u=e(257),l=e(102),p=e(271),d=e(269),f=e(274),h=e(74),m=h.getDefinition,g=h.getBusinessObject,v=h.is,y=e(45),x=y.getCase,_=y.getParent,b=y.isSameCase,w=y.isLabel;r.$inject=["eventBus","itemRegistry","cmmnFactory","modeling"],u(r,l),t.exports=r},{102:102,257:257,269:269,271:271,274:274,45:45,74:74}],28:[function(e,t,n){"use strict";function r(e,t,n){g.call(this,e),this.postExecuted(["shape.create","connection.create"],200,function(e){var n,r=e.context,i=r.shape||r.connection,o=i.businessObject;d(o)&&(n=f(i),t.createLabel(i,n,{id:o.id+"_label",hidden:!p(i)&&!h(o),businessObject:o}))}),this.postExecute(["connection.updateWaypoints"],function(e){var n=e.context,r=n.connection,i=r.label;if(i&&i.hidden){var o=f(r),a={x:o.x-i.x-i.width/2,y:o.y-i.y-i.height/2};t.moveShape(i,a)}}),this.postExecute(["shape.replace"],function(e){var t=e.context,n=t.newShape,r=t.oldShape,i=l(n);i&&d(i)&&(n.label.x=r.label.x,n.label.y=r.label.y)}),this.executed(["label.create"],function(e){var t,r,o=e.context.shape;o.labelTarget&&m(o.labelTarget||o,["cmmn:CMMNElement","cmmndi:CMMNDiagramElement"])&&(t=o.businessObject,r=t.di||t,r.label||(r.label=n.createDiLabel()),r.label.bounds||(r.label.bounds=n.createDiBounds()),i(r.label.bounds,{x:o.x,y:o.y,width:o.width,height:o.height}))})}var i=e(398),o=e(257),a=e(73),s=e(74),c=e(72),u=e(45),l=s.getBusinessObject,p=s.getName,d=a.hasExternalLabel,f=a.getExternalLabelMid,h=c.isStandardEventVisible,m=u.isAny,g=e(102);o(r,g),r.$inject=["eventBus","modeling","cmmnFactory"],t.exports=r},{102:102,257:257,398:398,45:45,72:72,73:73,74:74}],29:[function(e,t,n){"use strict";function r(e,t,n,r){function a(e,t){function n(e){a[e.id]=e}function i(e){return!!a[e.id]}function o(e,s){l(e,function(e){if(!i(e)){n(e),e=r.getShape(e.id)||e;var c=t(e);c&&c.length&&o(c)}s&&(a={})})}var a={};o(e,!0)}this._modeling=t,this._cmmnReplace=n,this._itemRegistry=r;var u=this;h.call(this,e);var p="planItemDefinitions";this.postExecuted("shape.create",function(e){var n=e.shape;if(M(n)){var r=y(n),i=v(r),a=o(r);b(i)||t.updateSemanticParent(i,a,p)}},!0),this.postExecuted("shape.replace",function(e){var t=e.newShape;M(t)&&u.updatePlanItemDefinitions([t])},!0),this.postExecuted("shape.delete",function(e){var t,n=e.shape,r={};M(n)&&!E(n)&&(t=v(n),r[t.id]=t,u.deletePlanItemDefinitions(r))},!0),this.preExecuted("shape.delete",function(e){var t=e.shape,n=v(t);P(n)&&!n.$parent&&(e.discretionaryItems=e.discretionaryItems||S(n))},!0),this.postExecuted("shape.delete",A,function(e){var t=e.discretionaryItems,n=[];l(t,function(e){var t=r.getShape(e.id);t&&n.push(t)}),n&&n.length&&u.updatePlanItemDefinitions(n)},!0),this.preExecuted("elements.move",function(e){var i,o,a=e.closure.allShapes,s=e.newParent,c=e.hints,u=c&&c.primaryShape&&c.primaryShape.parent,p={},d={};s&&u!==s&&(o=w(s),i=f(a,function(e){if(M(e)&&!E(e)&&w(e)!==o){var t=v(e);return d[t.id]=d[t.id]||[],d[t.id].push(e),!0}return!1}),l(i,function(e){var i,o,a,s=v(e);p[s.id]?a=p[s.id]:(i=r.getReferences(s.id),o=d[s.id],i.length>o.length&&(a=p[s.id]=n.replacePlanItemDefinition(s))),a&&a!==s&&t.updateProperties(e,{definitionRef:a})}),e.definitionReplacements=p)},!0),this.postExecuted("elements.move",A,function(e){var t=e.shapes,n=e.newParent,r=e.hints&&e.hints.oldParent;n&&r!==n&&(t=f(t,function(e){return M(e)&&!E(e)}),t&&t.length&&u.updatePlanItemDefinitions(t))},!0),this.postExecuted(["connection.create","connection.delete","connection.reconnectEnd","connection.reconnectStart"],A,function(e){var t=e.connection,n=e.newSource||e.source||t.source,r=e.newTarget||e.target||t.target,i=[];c(t,n,r)&&(t.target&&i.push(t.target),!t.target&&e.target&&i.push(e.target),e.oldTarget&&i.push(e.oldTarget),i&&i.length&&u.updatePlanItemDefinitions(i))},!0),this.deletePlanItemDefinitions=function(e){var n;l(e,function(e){n=r.getReferences(e),n.length||t.updateSemanticParent(e,null,p)})},this.updatePlanItemDefinitions=function(e){a(e,function(e){var n=y(e),o=v(n),a=r.getReferences(o),c=i(a);c||(c=s(n)),c&&c!==o.$parent&&t.updateSemanticParent(o,c,p);var u=T(o),f=[];return g(o,"cmmn:PlanFragment")&&e.children&&e.children.length&&l(e.children,function(e){var t=y(e);M(t)&&!E(t)&&u.indexOf(t)===-1&&f.push(t)}),d(u,f)})}}function i(e){var t,n;if(e.length)if(n=e.splice(0,1)[0],e.length){var r=a(n);l(e,function(e){r=p(r,a(e))}),t=r[0]}else t=o(n);return t}function o(e){return e=y(e),b(e,"cmmn:Stage")}function a(e){return e=y(e),_(e,"cmmn:Stage")}function s(e){var t=b(e,"cmmn:Case");return t&&t.casePlanModel}function c(e,t,n){return!e.businessObject.cmmnElementRef}var u=e(257),l=e(271),p=e(260),d=e(262),f=e(269),h=e(102),m=e(74),g=m.is,v=m.getDefinition,y=m.getBusinessObject,x=e(45),_=x.getParents,b=x.getParent,w=x.getCase,E=x.isLabel,C=e(46),S=C.getAllDiscretionaryItems,T=C.getDirectItemCapables,M=C.isItemCapable,P=C.isHumanTask,A=400;r.$inject=["eventBus","modeling","cmmnReplace","itemRegistry"],u(r,h),t.exports=r},{102:102,257:257,260:260,262:262,269:269,271:271,45:45,46:46,74:74}],30:[function(e,t,n){"use strict";function r(e,t,n,r){function o(e,t){return u(e.incoming,function(e){return e!==t&&s(e)})}function s(e){return!e.businessObject.cmmnElementRef}this._cmmnFactory=t,this._modeling=n,this._itemRegistry=r;var p=this;c.call(this,e);var f="tableItems";this.preExecuted(["connection.delete","connection.reconnectEnd","connection.reconnectStart"],function(e){var t=e.context,r="connection.reconnectStart"===e.command,c=t.connection,u=c.target;if(s(c)){if(r){if(!t.newSource||!t.newTarget)return;u=t.newSource,t.oldPlanningTable=a(u)}if(t.planningTable=a(u),u!==t.newTarget&&!o(u,c)){var l=i(u.parent),d=p.createPlanningTable(l);n.updateSemanticParent(u,d,f)}}}),this.postExecuted("connection.delete",function(e){s(e.connection)&&p.deletePlanningTable(e.planningTable)},!0),this.postExecuted("connection.reconnectEnd",function(e){var t=e.connection,r=t.target;if(s(t)){var i=a(r);n.updateSemanticParent(r,e.planningTable,f),p.deletePlanningTable(i)}},!0),this.postExecuted("connection.reconnectStart",function(e){var t=e.connection;s(t)&&e.newSource&&e.newTarget&&p.deletePlanningTable(e.oldPlanningTable)},!0),this.preExecuted(["connection.create","connection.reconnectStart"],function(e){var t=e.connection,r=e.newSource||e.source,i=e.target||e.newTarget||t.target;if(s(t)){e.planningTable=a(i);var o=h(r);if(t.source){var c=h(t.source);if(c===o)return}var u=p.createPlanningTable(o);n.updateSemanticParent(i,u,f)}},!0),this.postExecuted(["connection.create","connection.reconnectStart"],function(e){var t=e.connection;s(t)&&p.deletePlanningTable(e.planningTable)},!0),this.preExecuted("elements.move",500,function(e){function i(e){var n=t.create("cmmn:PlanningTable",{applicabilityRules:e.applicabilityRules}),r=x.push(e);return _[r-1]=n,n}var o=e.closure.allShapes,s=e.newParent,c=e.hints,f=c&&c.primaryShape&&c.primaryShape.parent,h=e.definitionReplacements,x=[],_={};s&&f!==s&&l(o,function(e){var t,s,c,f,w,C=m(e),S=[];if(b(e)&&!v(e)&&(t=g(C,"cmmn:PlanItemDefinition"),d(t,"cmmn:HumanTask")&&(s=h[t.id],s&&(E(s)||[]).indexOf(C)===-1))){c=E(t);var T=!u(c,function(e){return!o[e.id]});if(T){var M=t.planningTable;return n.updateProperties(s,{planningTable:M},r.getShapes(s)),n.updateSemanticParent(M,s),void n.updateProperties(t,{planningTable:void 0},r.getShapes(t))}if(f=y(C,"cmmn:PlanningTable"),f&&f.length){l(f,function(e){var t,r=x.indexOf(e);t=r===-1?i(e):_[r],w&&!w.$parent&&n.updateSemanticParent(w,t,"tableItems"),w=t,S.push(t)}),s.planningTable||(n.updateProperties(s,{planningTable:w},r.getShapes(s)),n.updateSemanticParent(w,s));var P=S.splice(0,1)[0],A=a(C);n.updateSemanticParent(C,P,"tableItems"),p.deletePlanningTable(A)}}})},!0),this.preExecuted(["shape.create","shape.move"],function(e){var t=e.shape;if(b(t)&&!v(t)&&!_(t)){e.planningTable=a(t);var r=e.parent||e.newParent;if(r){var o=i(r),s=p.createPlanningTable(o);n.updateSemanticParent(t,s,f)}}},!0),this.postExecuted("shape.move",function(e){var t=e.shape;b(t)&&!v(t)&&(_(t)||p.deletePlanningTable(e.planningTable))},!0),this.preExecuted("shape.delete",function(e){var t=e.shape;b(t)&&!v(t)&&(e.planningTable=a(t),n.updateSemanticParent(t,null,f))},!0),this.postExecuted("shape.delete",function(e){var t=e.shape;b(t)&&!v(t)&&p.deletePlanningTable(e.planningTable)},!0),this.postExecuted("shape.delete",500,function(e){var t=e.shape,o=h(t);if(C(o)&&!o.$parent){var a=E(o);l(a,function(e){var t=r.getShape(e.id);if(t){var o=i(t.parent),a=p.createPlanningTable(o);n.updateSemanticParent(t,a,f)}}),o.planningTable&&p.deletePlanningTable(o.planningTable)}},!0),this.createPlanningTable=function(e){var t=e.planningTable;if(!t){t=p._cmmnFactory.create("cmmn:PlanningTable");var i=r.getShapes(e);n.updateProperties(e,{planningTable:t},i),n.updateSemanticParent(t,e)}return t},this.deletePlanningTable=function(e){if(!(e.get(f).length>0)){for(var t=e.$parent;d(t,"cmmn:PlanningTable")&&!e.get(f).length;)n.updateSemanticParent(e,null,f),e=t,t=t.$parent;if(d(t,"cmmn:PlanItemDefinition")&&e&&!e.get(f).length){var i=g(e,"cmmn:PlanItemDefinition"),o=r.getShapes(i);n.updateProperties(i,{planningTable:void 0},o),n.updateSemanticParent(e,null,null)}}}}function i(e){var t=o(e);return h(t)||m(t)}function o(e){if(e&&!f(e)){var t=h(e);w(t)&&(e=g(e,["cmmn:Stage","cmmn:PlanItem","cmmn:DiscretionaryItem"]),e=o(e))}return e}function a(e){return e=m(e),g(e,"cmmn:PlanningTable")}var s=e(257),c=e(102),u=e(267),l=e(271),p=e(74),d=p.is,f=p.isCasePlanModel,h=p.getDefinition,m=p.getBusinessObject,g=e(45).getParent,v=e(45).isLabel,y=e(45).getParents,x=e(46),_=x.isDiscretionaryToHumanTask,b=x.isDiscretionaryItem,w=x.isPlanFragment,E=x.getAllDiscretionaryItems,C=x.isHumanTask;r.$inject=["eventBus","cmmnFactory","modeling","itemRegistry"],s(r,c),t.exports=r},{102:102,257:257,267:267,271:271,45:45,46:46,74:74}],31:[function(e,t,n){"use strict";function r(e,t,n,r,u){function g(e,t){return n.canConnectPlanItemOnPartConnection(e,t)}function v(e,t){return n.canConnectCaseFileItemOnPartConnection(e,t)}function y(e,t,r){return n.canConnectDiscretionaryConnection(e,t,r)}function x(e,t){return n.canConnectAssociation(e,t)}function _(e,t){return u.allowed(e,t)}function b(e,n,a,c){var u=e.parent;if(c=c||{},n=n||e.source,a=a||e.target,u){var p,d,h=o(e);if(h?(f(h,"cmmn:PlanItemOnPart")&&(g(n,a)||(p=!0),v(n,a)&&(d={type:"cmmn:CaseFileItemOnPart",name:h.name,isStandardEventVisible:i(e)}),y(n,a,e)&&(d={type:"cmmndi:CMMNEdge"})),f(h,"cmmn:CaseFileItemOnPart")&&(v(n,a)||(p=!0),g(n,a)&&(d={type:"cmmn:PlanItemOnPart",name:h.name,isStandardEventVisible:i(e)})),f(h,"cmmn:Association")&&!x(n,a)&&(p=!0)):(y(n,a,e)||(p=!0),g(n,a)&&(d={type:"cmmn:PlanItemOnPart",isStandardEventVisible:!0})),p&&(d||!s(n)&&!s(a)||(d={type:"cmmn:Association"}),t.removeConnection(e)),d){var m=l({waypoints:e.waypoints.slice()},d),_=t.connect(n,a,m);return c.select!==!1&&r.select(_),_}}}d.call(this,e),this.postExecuted("elements.move",h,function(e){var t=e.closure,n=t.allConnections;c(n,function(e){b(e,null,null,{select:!1})})},!0),this.preExecute(["connection.reconnectEnd","connection.reconnectStart"],m+h,function(e){var t=e.command,n="connection.reconnectStart"===t,r=e.context,i=r.connection,o=r.newSource||i.source,a=r.newTarget||i.target,s=r.dockingOrPoints,c=r.canExecute;if(!r.hints||!r.hints.nested){if(void 0===c){var u={connection:i};u[n?"hover":"source"]=o,u[n?"target":"hover"]=a,c=_(t,u)}if(c&&c.reverse){if(!p(s)){var l=i.waypoints.slice();l.splice(n?0:-1,1,s),s=l}r.newSource=a,r.newTarget=o,r.dockingOrPoints=s.reverse()}}}),this.preExecute(["connection.reconnectStart","connection.reconnectEnd"],m,function(e){var t=e.connection,n=e.newSource||t.source,r=e.newTarget||t.target,i=e.hints||{};e.connection=b(t,n,r,{select:!i.nested})||t},!0),this.postExecuted("shape.replace",function(e){var n=e.newShape,r=n.businessObject,i=a(n);c(i,function(e){var n=e.source,i=e.target,a=o(e);f(a,"cmmn:PlanItemOnPart")&&(g(n,i)?t.updateProperties(a,{sourceRef:r},e):t.removeConnection(e))})},!0),this.postExecuted("element.updateProperties",function(e){var t=e.properties,n=e.changed;t&&t.isBlocking===!1&&c(n,function(e){var t=e.outgoing;c(t,function(e){b(e,null,null,{select:!1})})})},!0)}function i(e){return e.businessObject.isStandardEventVisible}function o(e){return e.businessObject&&e.businessObject.cmmnElementRef}function a(e){var t=e.attachers,n=[];return c(t,function(e){c(e.outgoing,function(e){n.push(e)})}),n}function s(e){return f(e,"cmmn:TextAnnotation")}var c=e(271),u=e(257),l=e(398),p=e(389),d=e(102),f=e(74).is,h=200,m=5e3;u(r,d),r.$inject=["eventBus","modeling","cmmnRules","selection","rules"],t.exports=r},{102:102,257:257,271:271,389:389,398:398,74:74}],32:[function(e,t,n){"use strict";function r(e,t,n,r,o,c,y,x){function _(e,t){return x.allowed("connection.create",{source:e,target:t})}function b(e,t){return x.allowed(e,t)}a.call(this,o),this._cmmnReplace=e,this._cmmnRules=t,this._elementFactory=n,this._elementRegistry=r,this._modeling=c,this._selection=y,this._rules=x;var w=this;this.preExecute(["shape.create","shape.append"],m,function(e){var r=e.shape,o=e.source,a=e.parent||o&&o.parent,s=e.host,c=e.position,u=e.hints||{};if(!u.nested&&(s&&i(r)&&(a=s),!t.canCreate(r,a,o,c))){var d=t.canReplace([r],a,c,o);if(d&&d.replacements){var f=d.replacements[0],m=l(r),g=p(r),v=f.newElementType,y=f.newDefinitionType||m&&m.$type,x=h({},{type:v});y&&h(x,{definitionType:y}),g&&h(x,{sentryRef:g}),e.shape=n.createShape(x)}}},!0),this.postExecuted("elements.move",g,function(e){var n=e.newParent,r=e.newHost,o=e.shapes.slice();if(1===o.length&&r?n=r:o=f(o,function(e){return!i(e)}),n&&!t.canMove(o,n)){var a=t.canReplace(o,n);a&&a.replacements&&w.replaceElements(o,a.replacements)}},!0),this.postExecuted(["shape.replace"],1500,function(e){var t=e.context,n=t.oldShape,r=t.newShape;c.unclaimId(n.businessObject.id,n.businessObject),c.updateProperties(r,{id:n.id})}),this.preExecute("connection.create",m,function(e){var t=e.source,n=e.target,r=e.canExecute||_(t,n);if(r&&r.replacements){var i=w.replaceElements([t,n],r.replacements,{select:!1});e.source=i[t.id]||e.source,e.target=i[n.id]||e.target,h(r,{replacedBy:r.reverse?e.source:e.target})}},!0),o.on("connect.end",g+v,function(e){var t=e.context.canExecute,n=t&&t.replacedBy;n&&(e.context.target=n)}),this.preExecute(["connection.reconnectStart","connection.reconnectEnd"],m,function(e){var t,n=e.command,r="connection.reconnectStart"===n,i=e.context,o=i.connection,a=i.newSource||o.source,s=i.newTarget||o.target,c={connection:o};if(!i.hints||!i.hints.nested){if(c[r?"hover":"source"]=a,c[r?"target":"hover"]=s,t=b(n,c),t&&t.replacements){var u=w.replaceElements([a,s],t.replacements,{select:!1});i.newSource=u[a.id]||i.newSource,i.newTarget=u[s.id]||i.newTarget}i.canExecute=t}}),this.preExecute("shape.delete",m,function(e){var t=e.shape,n=i(t)?t.host:t.parent,r=l(n);u(r,"cmmn:Stage")||s(t.incoming,function(e){c.removeConnection(e,{nested:!0,endChanged:!0})})},!0),this.postExecuted(["connection.delete","connection.reconnectEnd"],g,function(e){var n=e.target||e.oldTarget,r=[n],o=i(n)?n.host:n.parent,a=e.hints||{};if(!a.endChanged&&o&&!t.canMove(r,o)){var s=t.canReplace(r,o);s&&s.replacements&&w.replaceElements(r,s.replacements,{select:!1})}},!0),this.postExecuted("element.updateProperties",function(e){var n=e.properties,r=e.changed;n&&n.isBlocking===!1&&d(r,function(e){var n=e.attachers,r=t.canReplace(n,e);r&&w.replaceElements(n,r.replacements,{select:!1})})},!0),this.replaceElements=function(e,t,n){var r=this,i=this._elementRegistry,o=this._selection,a={};return n=n||{},d(t,function(t){var n,o=i.get(t.oldElementId),s=e.indexOf(o);o&&(n=r.replaceElement(o,t),s!==-1&&(e[s]=n),a[o.id]=n)}),t&&n.select!==!1&&o.select(e),a},this.replaceElement=function(e,t){var n=this._cmmnReplace,r=l(e),i=t.newDefinitionType||r&&r.$type;if(e){var o={type:t.newElementType};return i&&h(o,{definitionType:i}),n.replaceElement(e,o,{select:!1})}}}function i(e){return u(e,"cmmn:Criterion")}var o=e(257),a=e(102),s=e(245).saveClear,c=e(74),u=c.is,l=c.getDefinition,p=c.getSentry,d=e(271),f=e(269),h=e(398),m=6e3,g=500,v=100;r.$inject=["cmmnReplace","cmmnRules","elementFactory","elementRegistry","eventBus","modeling","selection","rules"],o(r,a),t.exports=r},{102:102,245:245,257:257,269:269,271:271,398:398,74:74}],33:[function(e,t,n){"use strict";function r(e){var t,n,r=e.shape,o=e.direction;return t=e.minDimensions||{width:m,height:m},n=i(r,e.childrenBoxPadding),d.getMinResizeBounds(o,r,t,n)}function i(e,t){var n=p(e.children,function(t){return o(e,t)});if(n.length)return d.addPadding(f(n),t)}function o(e,t){if(t.waypoints)return!1;if("label"===t.type)return!1;if(c(t,"cmmn:ExitCriterion")){var n=u(e),r=n.get("exitCriteria"),i=u(t);if(r.indexOf(i)>=0)return!1}return!0}function a(e,t){e.on("resize.start",h,function(e){var t=e.context,n=t.shape;l(n)&&(t.minBounds=r(t))})}var s=e(74),c=s.is,u=s.getBusinessObject,l=s.isCasePlanModel,p=e(269),d=e(199),f=e(235).getBBox,h=1001,m=10;a.$inject=["eventBus","modeling"],t.exports=a},{199:199,235:235,269:269,74:74}],34:[function(e,t,n){"use strict";function r(e,t,n,r,d){function g(e){var t=o(e);return v(e,function(e){var n=C(e);
if(k(n)){var r=A(e);return r&&r.length&&(t=t.concat(o(r))),r}return R(e)}),m(t)}function v(e,t){function r(e){a[e.id]=e}function i(e){return!!a[e.id]}function o(e,s){h(e,function(e){if(!i(e)){r(e),e=n.getShape(e.id)||e;var c=t(e);c&&c.length&&o(c)}s&&(a={})})}var a={};o(e,!0)}function x(e){var t=d.createSentry();return b(e,t),t}function b(e,n){t.updateProperties(e,{sentryRef:n})}function S(e,n){t.updateProperties(e,{cmmnElementRef:n})}function M(e){var t={name:e.name,sourceRef:e.sourceRef,standardEvent:e.standardEvent};return _(e,"cmmn:PlanItemOnPart")&&(t.exitCriterionRef=e.exitCriterionRef),d.create(e.$type,t)}function P(e){var t=e.businessObject.cmmnElementRef;return _(t,"cmmn:OnPart")}function I(e,t,n){return!e.businessObject.cmmnElementRef}var D=this;f.call(this,e);var O="sentries";this.postExecuted("connection.create",function(e){var n=e.connection;if(P(n)){var r=u(n),o=n.target,a=o.host,s=w(o);s||(s=x(o),t.updateSemanticParent(s,i(a),"sentries")),t.updateSemanticParent(r,s,"onParts",n)}},!0),this.preExecuted("connection.delete",function(e){var n=e.connection;if(P(n)){var r=n.source,i=u(n);c(r,n)&&(i=M(i),S(n,i)),t.updateSemanticParent(i,null,"onParts",n)}},!0),this.preExecuted("connection.reconnectStart",function(e){var n=e.connection,r=n.source;if(P(n)){var i=u(n),o=n.target,a=w(o);c(r,n)&&(i=M(i),S(n,i),t.updateSemanticParent(i,a,"onParts",n))}},!0),this.preExecuted("connection.reconnectEnd",function(e){var n=e.connection,r=n.source;if(P(n)){var o=u(n),a=n.target,s=w(a),l=e.newTarget,p=w(l);s!==p&&(p||(p=x(l),t.updateSemanticParent(p,i(l.host),"sentries")),c(r,n)&&(o=M(o),S(n,o)),t.updateSemanticParent(o,p,"onParts",n))}},!0),this.postExecuted(["connection.create","connection.reconnectStart"],function(e){var n=e.connection;if(P(n)){var r,i=u(n);l(n)||(r=p(n),t.updateProperties(i,{standardEvent:r},n))}},!0),this.postExecuted("element.updateAttachment",function(e){var t=e.shape;s(t)&&(t.host?D.updateSentriesSemanticParent([t]):D.deleteSentry(t))},!0),this.preExecuted("shape.delete",function(e){var t=C(e.shape);k(t)&&(e.discretionaryItems=e.discretionaryItems||A(t))},!0),this.postExecuted("shape.delete",N,function(e){var t,n=e.discretionaryItems;t=g(n),t&&t.length&&D.updateSentriesSemanticParent(t)},!0),this.postExecuted(["connection.create","connection.delete","connection.reconnectEnd","connection.reconnectStart"],N,function(e){var t,n=e.connection,r=e.newSource||e.source||n.source,i=e.newTarget||e.target||n.target,o=[];I(n,r,i)&&(n.target&&o.push(n.target),!n.target&&e.target&&o.push(e.target),e.oldTarget&&o.push(e.oldTarget),t=g(o),t&&t.length&&D.updateSentriesSemanticParent(t))},!0),this.postExecuted("elements.move",N,function(e){var t,n=e.shapes,r=e.newParent,i=e.hints&&e.hints.oldParent;i!==r&&(t=g(n),t&&t.length&&D.updateSentriesSemanticParent(t))},!0),this.deleteSentry=function(e){var r,i=w(e);i&&(r=n.getReferences(i),r.length<=1&&t.updateSemanticParent(i,null,O))},this.updateSentriesSemanticParent=function(e){function o(e){return!!p[e.id]}function s(e,t){p[e.id]=t}function c(e){return p[e.id]||e}function u(e,t){var r=n.getReferences(e),o=l[e.id]||[],a=n.getReferences(e).length,s=o.length;return a>s&&(!t||y(r,function(e){var r=n.getShape(e);return r&&t!==i(r.host)}))}var l=a(e),p={};v(e,function(e){var n=w(e);if(n){var a=i(e.host);if(!a){var l=T(E(e));a=l&&i(l)}if(n.$parent===a)return;if(!o(n)&&u(n,a)){var p=r.replaceSentry(n);s(n,p),h(e.incoming,function(e){var t=e.businessObject.cmmnElementRef;t&&_(t,"cmmn:OnPart")&&s(t,M(t))})}n=c(n),w(e)!==n&&b(e,n),h(e.incoming,function(e){var r=e.businessObject.cmmnElementRef;if(r&&_(r,"cmmn:OnPart")){var i=c(r);i&&r!==i&&(S(e,i),t.updateSemanticParent(i,n,"onParts"))}}),t.updateSemanticParent(n,a,O)}})}}function i(e){if(b(e))return E(e);if(P(e)){var t=E(e);return T(t,"cmmn:PlanFragment")}}function o(e){return m(v(e,function(e){var t=[];if(e.attachers)t=e.attachers;else{var n=E(e),r=n.get("exitCriteria");h(r,function(e){t.push(e)});var i=n.get("entryCriteria");h(i,function(e){t.push(e)})}return t||[]}))}function a(e){return g(e,function(e){var t=w(e);return t&&t.id})}function s(e){return _(e,"cmmn:Criterion")}function c(e,t){var n=u(t);return y(e.outgoing,function(e){return t!==e&&n===u(e)})}function u(e){return e=E(e),e.cmmnElementRef}function l(e){var t=u(e),n=t.standardEvent,r=S(t);return n&&r.indexOf(n)!==-1}function p(e){if(e=u(e),_(e.sourceRef,"cmmn:CaseFileItem"))return"update";if(_(e.exitCriterionRef,"cmmn:ExitCriterion"))return"exit";if(_(e.sourceRef,"cmmn:PlanItem")){var t=C(e.sourceRef);return _(t,"cmmn:EventListener")||_(t,"cmmn:Milestone")?"occur":"complete"}}var d=e(257),f=e(102),h=e(271),m=e(259),g=e(272),v=e(273),y=e(267),x=e(74),_=x.is,b=x.isCasePlanModel,w=x.getSentry,E=x.getBusinessObject,C=x.getDefinition,S=x.getStandardEvents,T=e(45).getParent,M=e(46),P=M.isItemCapable,A=M.getAllDiscretionaryItems,R=M.getDirectItemCapables,k=M.isHumanTask,N=300;r.$inject=["eventBus","modeling","itemRegistry","cmmnReplace","cmmnFactory"],d(r,f),t.exports=r},{102:102,257:257,259:259,267:267,271:271,272:272,273:273,45:45,46:46,74:74}],35:[function(e,t,n){"use strict";function r(e,t){a.call(this,e),this.preExecute("elements.delete",function(e){var n=e.context,r=n.elements;i(r,function(e){t.unclaimId(e.businessObject.id,e.businessObject)})})}var i=e(271),o=e(257),a=e(102);o(r,a),r.$inject=["eventBus","modeling"],t.exports=r},{102:102,257:257,271:271}],36:[function(e,t,n){t.exports={__init__:["attachCriterionBehavior","caseFileItemUpdater","labelBehavior","planItemDefinitionUpdater","planningTableUpdater","replaceConnectionBehavior","replaceElementBehavior","resizeCasePlanModelBehavior","sentryUpdater","unclaimIdBehavior"],attachCriterionBehavior:["type",e(26)],caseFileItemUpdater:["type",e(27)],labelBehavior:["type",e(28)],planItemDefinitionUpdater:["type",e(29)],planningTableUpdater:["type",e(30)],replaceConnectionBehavior:["type",e(31)],replaceElementBehavior:["type",e(32)],resizeCasePlanModelBehavior:["type",e(33)],sentryUpdater:["type",e(34)],unclaimIdBehavior:["type",e(35)]}},{26:26,27:27,28:28,29:29,30:30,31:31,32:32,33:33,34:34,35:35}],37:[function(e,t,n){"use strict";function r(e,t){this._modeling=e,this._cmmnRules=t}function i(e){return a(e,"cmmn:Criterion")}var o=e(257),a=e(74).is;o(r,e(159)),r.$inject=["modeling","cmmnRules"],t.exports=r,r.prototype.preExecute=function(e){if(!e.source)throw new Error("source required");var t=this._cmmnRules,n=e.shape,r=e.source,o=e.parent||e.source.parent,a=e.position,s=!1;i(n)&&(s="attach"===t.canAttach(n,o,r,a)),e.shape=this._modeling.createShape(n,a,o,s,{nested:!0})}},{159:159,257:257,74:74}],38:[function(e,t,n){"use strict";function r(e){this._moddle=e}r.$inject=["moddle"],t.exports=r,r.prototype.execute=function(e){var t=this._moddle.ids,n=e.id,r=e.element,i=e.claiming;i?t.claim(n,r):t.unclaim(n)},r.prototype.revert=function(e){var t=this._moddle.ids,n=e.id,r=e.element,i=e.claiming;i?t.unclaim(n):t.claim(n,r)}},{}],39:[function(e,t,n){"use strict";function r(e){this._rules=e}var i=e(257),o=e(389);i(r,e(173)),r.$inject=["rules"],t.exports=r,r.prototype.execute=function(e){var t,n=e.newSource,r=e.newTarget,i=e.connection,a=e.dockingOrPoints,s=i.waypoints;if(!n&&!r)throw new Error("newSource or newTarget are required");return e.oldWaypoints=s,o(a)?t=a:(t=s.slice(),t.splice(n?0:-1,1,a)),n&&(e.oldSource=i.source,i.source=n),r&&(e.oldTarget=i.target,i.target=r),i.waypoints=t,i}},{173:173,257:257,389:389}],40:[function(e,t,n){"use strict";function r(e,t){this._modeling=e,this._rules=t}var i=e(257);i(r,e(174)),r.$inject=["modeling","rules"],t.exports=r,r.prototype.createShape=function(e,t,n){var r=this._modeling;return r.createShape(e,t,n,{nested:!0})},r.prototype.reconnectStart=function(e,t,n){var r=this._modeling;r.reconnectStart(e,t,n,{nested:!0,startChanged:!0})},r.prototype.reconnectEnd=function(e,t,n){var r=this._modeling;r.reconnectEnd(e,t,n,{nested:!0,endChanged:!0})}},{174:174,257:257}],41:[function(e,t,n){"use strict";function r(e,t,n,r){this._itemRegistry=e,this._modeling=t,this._cmmnReplace=n,this._cmmnFactory=r}function i(e,t){var n={};return n[e]=t,n}function o(e){return!(f(e)&&d(e))}var a=e(269),s=e(271),c=e(74).getBusinessObject,u=e(74).getItemControl,l=e(74).getDefaultControl,p=e(74).getDefinition,d=e(74).hasPlanningTable,f=e(46).isPlanningTableCapable;r.$inject=["itemRegistry","modeling","cmmnReplace","cmmnFactory"],t.exports=r;var h=["requiredRule","repetitionRule","manualActivationRule"];r.prototype.preExecute=function(e){var t=this,n=e.element,r=e.values;if(!n)throw new Error("element required");s(r,function(e,r){h.indexOf(r)!==-1?t._updateRule(n,r,e):t._updateDecorator(n,r,e)})},r.prototype.execute=function(){},r.prototype.revert=function(){},r.prototype._updateDecorator=function(e,t,n){var r=this,a=r._modeling,s=p(e),c=i(t,n),u=[];s[t]!==n&&(u=r._getReferencingShapes(s),u.length>1&&o(s)&&(s=r._replaceDefinition(e),u=e),a.updateProperties(s,c,u))},r.prototype._updateRule=function(e,t,n){function r(){var n;if(d(y,t)&&(n=y[t],g.updateProperties(y,b,e),g.updateSemanticParent(n),h(y)&&(g.updateProperties(e,{itemControl:void 0}),g.updateSemanticParent(y))),d(x,t)){n=x[t];var r=m._getReferencingShapes(_);r.length>1&&o(_)&&(r=a(r,function(e){var n=u(e),r=l(e);return!d(n,t)&&d(r,t)}),r.length>1&&(m._replaceDefinition(e),x=l(e),r=e)),g.updateProperties(x,b,r),g.updateSemanticParent(n),h(x)&&(g.updateProperties(_,{defaultControl:void 0},r),g.updateSemanticParent(x))}}function s(){y||(y=f(),g.updateProperties(e,{itemControl:y}),g.updateSemanticParent(y,c(e))),g.updateProperties(y,b,e),g.updateSemanticParent(n,y)}function d(e,t){return e&&e[t]}function f(){return v.create("cmmn:PlanItemControl")}function h(e){return!(!e||e.repetitionRule||e.requiredRule||e.manualActivationRule)}var m=this,g=m._modeling,v=m._cmmnFactory,y=u(e),x=l(e),_=p(e),b=i(t,n);n?s():r()},r.prototype._replaceDefinition=function(e){var t=this,n=t._modeling,r=t._cmmnReplace,i=p(e),o=r.replacePlanItemDefinition(i);return n.updateProperties(e,{definitionRef:o}),n.updateSemanticParent(o,i.$parent,"planItemDefinitions"),o},r.prototype._getReferencingShapes=function(e){var t=this,n=t._itemRegistry;return n.getShapes(e)}},{269:269,271:271,46:46,74:74}],42:[function(e,t,n){"use strict";function r(e,t,n){this._elementRegistry=e,this._itemRegistry=t,this._moddle=n}function i(e,t){return v in e&&e[v]!==t[v]}function o(e,t){return y in e&&e[y]!==t[y]}function a(e,t){return x in e&&e[x]!==t[x]}function s(e,t){return l(t,function(t,n){return t[n]=e.get(n),t},{})}function c(e,t){d(t,function(t,n){e.set(n,t)})}function u(e){var t=f({},e);return w.forEach(function(n){n in e&&(t[n]=h(t[n]))}),t}var l=e(405),p=e(399),d=e(271),f=e(398),h=e(74).getBusinessObject,m="name",g="standardEvent",v="id",y="definitionRef",x="sentryRef",_="isStandardEventVisible",b=e(259);r.$inject=["elementRegistry","itemRegistry","moddle"],t.exports=r,r.prototype.preExecute=function(e){var t=e.element,n=e.shape;if(!t)throw new Error("element required");var r=t.businessObject||t;e.businessObject=r;var i=[];t.businessObject&&i.push(t),n&&i.push(n),e.changed=b(i)},r.prototype.execute=function(e){var t=this._elementRegistry,n=this._itemRegistry,r=this._moddle.ids,l=e.changed,f=e.element,h=e.businessObject,b=u(e.properties),w=e.oldProperties||s(h,p(b));if(i(b,h)){r.unclaim(h[v]),n.updateId(h,b[v]);var E=t.get(f.id);E&&t.updateId(E,b[v]),r.claim(b[v],h)}return o(b,h)&&n.updateReference(h,b[y]),a(b,h)&&n.updateReference(h,b[x]),m in b&&d(l,function(e){e.label&&l.push(e.label)}),(g in b||_ in b)&&d(l,function(e){e.label&&l.push(e.label)}),c(h,b),e.oldProperties=w,l},r.prototype.revert=function(e){var t=e.properties,n=e.oldProperties,r=e.businessObject,s=this._elementRegistry,u=this._itemRegistry,l=this._moddle.ids;if(i(n,r)&&u.updateId(r,n[v]),o(n,r)&&u.updateReference(r,n[y]),a(n,r)&&u.updateReference(r,n[x]),c(r,n),i(t,r)){l.unclaim(t[v]);var p=s.get(t[v]);p&&s.updateId(p,n[v]),l.claim(n[v],r)}return e.changed};var w=["default"]},{259:259,271:271,398:398,399:399,405:405,74:74}],43:[function(e,t,n){"use strict";function r(){}var i=e(259),o=e(232);t.exports=r,r.prototype.preExecute=function(e){var t=e.element,n=e.shape;if(!t)throw new Error("element required");var r=t.businessObject||t;e.businessObject=r,e.oldParent=r.$parent;var o=[];t.businessObject&&o.push(t),n&&o.push(n),e.changed=i(o)},r.prototype.execute=function(e){var t=e.businessObject,n=e.newParent,r=e.containment;return this.updateSemanticParent(t,n,r),e.changed},r.prototype.revert=function(e){var t=e.businessObject,n=e.oldParent,r=e.containment;return this.updateSemanticParent(t,n,r),e.changed},r.prototype.updateSemanticParent=function(e,t,n){if(e.$parent!==t){var r;e.$parent&&n&&(r=e.$parent.get(n),o.remove(r,e)),e.$parent=null,t&&(n&&(r=t.get(n),r.push(e)),e.$parent=t)}}},{232:232,259:259}],44:[function(e,t,n){t.exports={__init__:["modeling","cmmnUpdater"],__depends__:[e(36),e(48),e(59),e(61),e(104),e(210),e(116),e(129)],cmmnFactory:["type",e(21)],cmmnUpdater:["type",e(23)],elementFactory:["type",e(24)],modeling:["type",e(25)],layouter:["type",e(22)],connectionDocking:["type",e(221)]}},{104:104,116:116,129:129,21:21,210:210,22:22,221:221,23:23,24:24,25:25,36:36,48:48,59:59,61:61}],45:[function(e,t,n){"use strict";function r(e,t){return e===t}function i(e,t){return r(o(e),o(t))}function o(e){return s(f(e),"cmmn:Case")}function a(e,t){var n=[];for("string"==typeof t&&(t=[t]);e;)e=e.$parent||e.parent,e&&(t?c(e,t)&&n.push(e):n.push(e));return n}function s(e,t){for("string"==typeof t&&(t=[t]);e=e.$parent||e.parent;){if(!t)return e;if(c(e,t))return e}return null}function c(e,t){return l(t,function(t){return d(e,t)})}function u(e){return e instanceof h.Label}var l=e(267),p=e(74),d=p.is,f=p.getBusinessObject,h=e(224);t.exports.isSame=r,t.exports.isSameCase=i,t.exports.getCase=o,t.exports.getParents=a,t.exports.getParent=s,t.exports.isAny=c,t.exports.isLabel=u},{224:224,267:267,74:74}],46:[function(e,t,n){"use strict";function r(e){e=h(e),o(e)&&(e=f(e));var t=[];if(a(e)&&(e=e.planningTable)){var n=e.get("tableItems");v(n,function(e){return s(e)?void t.push(e):e.get("tableItems")})}return t}function i(e){function t(e){n.push(e)}e=h(e),o(e)&&(e=f(e));var n=[];if(e){var i;d(e,"cmmn:PlanFragment")&&(i=e.get("planItems"),v(i,t)),a(e)&&(i=r(e),v(i,t))}return n}function o(e){return m(e,["cmmn:DiscretionaryItem","cmmn:PlanItem"])}function a(e){return m(e,["cmmn:HumanTask","cmmn:Stage"])}function s(e){return d(e,"cmmn:DiscretionaryItem")}function c(e){var t=h(e),n=g(t,"cmmn:PlanItemDefinition");return d(n,"cmmn:HumanTask")}function u(e){return d(e,"cmmn:HumanTask")}function l(e){return d(e,"cmmn:PlanFragment")&&!d(e,"cmmn:Stage")}var p=e(74),d=p.is,f=p.getDefinition,h=p.getBusinessObject,m=e(45).isAny,g=e(45).getParent,v=e(235).eachElement;t.exports.getAllDiscretionaryItems=r,t.exports.getDirectItemCapables=i,t.exports.isItemCapable=o,t.exports.isPlanningTableCapable=a,t.exports.isDiscretionaryItem=s,t.exports.isDiscretionaryToHumanTask=c,t.exports.isHumanTask=u,t.exports.isPlanFragment=l},{235:235,45:45,74:74}],47:[function(e,t,n){"use strict";function r(e){function t(e){i(e)&&(e=e.businessObject.cmmnElementRef||e);var t=c(o,function(t){return u(e,t.type)});return t&&t.order||{level:1}}function n(e){var n=e.order;return n||(e.order=n=t(e)),n}function r(e,t,n){var r=t;for(i(e)&&e.source&&(r=e.source.parent);r&&!l(r,n);)r=r.parent;if(!r)throw new Error("no parent for "+e.id+" in "+t.id);return r}a.call(this,e);var o=[{type:"label",order:{level:10}},{type:"cmmn:Criterion",order:{level:6}},{type:"cmmn:OnPart",order:{level:9,containers:["cmmn:Stage"]}},{type:"cmmn:Association",order:{level:9,containers:["cmmndi:CMMNDiagram"]}},{type:"cmmndi:CMMNEdge",order:{level:9,containers:["cmmn:PlanItem","cmmn:DiscretionaryItem","cmmn:Stage"]}}];this.getOrdering=function(e,t){var i=n(e);i.containers&&(t=r(e,t,i.containers));var o=t.children.indexOf(e),a=s(t.children,function(t){return!(!e.labelTarget&&t.labelTarget)&&i.level<n(t).level});return a!==-1&&o!==-1&&o<a&&(a-=1),{index:a,parent:t}}}function i(e){return u(e,"cmmndi:CMMNEdge")}var o=e(257),a=e(186),s=e(258),c=e(270),u=e(74).is,l=e(45).isAny;r.$inject=["eventBus"],o(r,a),t.exports=r},{186:186,257:257,258:258,270:270,45:45,74:74}],48:[function(e,t,n){t.exports={__init__:["cmmnOrderingProvider"],cmmnOrderingProvider:["type",e(47)]}},{47:47}],49:[function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=e(187),o=e(257),a=e(74).isCasePlanModel;o(r,i),r.$inject=["eventBus","styles","elementRegistry"],r.prototype.baseUpdateShapeOutline=i.prototype.updateShapeOutline,r.prototype.updateShapeOutline=function(e,t){a(t)?e.attr({x:-this.offset,y:-this.offset-18,width:t.width+2*this.offset,height:t.height+18+2*this.offset}):this.baseUpdateShapeOutline(e,t)},t.exports=r},{187:187,257:257,74:74}],50:[function(e,t,n){"use strict";t.exports={__init__:["outline"],outline:["type",e(49)]}},{49:49}],51:[function(e,t,n){"use strict";function r(e,t,n,r,i,o,a){this._create=e,this._elementFactory=t,this._globalConnect=n,this._handTool=r,this._palette=o,this._lassoTool=i,this._spaceTool=a,o.registerProvider(this)}var i=e(398);t.exports=r,r.$inject=["create","elementFactory","globalConnect","handTool","lassoTool","palette","spaceTool"],r.prototype.getPaletteEntries=function(e){function t(e,t,n,r){function i(t){s.start(t,c.createPlanItemShape(e))}var o=e.replace(/^cmmn\:/,"");return{group:t,className:n,title:r||"Create "+o,action:{dragstart:i,click:i}}}function n(e){s.start(e,c.createCasePlanModelShape())}function r(e){s.start(e,c.createCriterionShape("cmmn:EntryCriterion"))}function o(e){s.start(e,c.createCaseFileItemShape())}var a={},s=this._create,c=this._elementFactory,u=this._spaceTool,l=this._lassoTool,p=this._globalConnect,d=this._handTool;return i(a,{"hand-tool":{group:"tools",className:"cmmn-icon-hand-tool",title:"Activate the hand tool",action:{click:function(e){d.activateHand(e)}}},"lasso-tool":{group:"tools",className:"cmmn-icon-lasso-tool",title:"Activate the lasso tool",action:{click:function(e){l.activateSelection(e)}}},"space-tool":{group:"tools",className:"cmmn-icon-space-tool",title:"Activate the create/remove space tool",action:{click:function(e){u.activateSelection(e)}}},"global-connect-tool":{group:"tools",className:"cmmn-icon-connection",title:"Activate the global connect tool",action:{click:function(e){p.toggle(e)}}},"tool-separator":{group:"tools",separator:!0},"create.task":t("cmmn:Task","planItem","cmmn-icon-task"),"create.stage":t("cmmn:Stage","planItem","cmmn-icon-stage-expanded","Create expanded Stage"),"create.milestone":t("cmmn:Milestone","planItem","cmmn-icon-milestone"),"create.eventListener":t("cmmn:EventListener","planItem","cmmn-icon-event-listener"),"create.criterion":{group:"criterion",className:"cmmn-icon-entry-criterion",title:"Create Criterion",action:{dragstart:r,click:r}},"create.casePlanModel":{group:"casePlanModel",className:"cmmn-icon-case-plan-model",title:"Create CasePlanModel",action:{dragstart:n,click:n}},"create.caseFileItem":{group:"caseFileItem",className:"cmmn-icon-case-file-item",title:"Create Case File Item",action:{dragstart:o,click:o}}}),a}},{398:398}],52:[function(e,t,n){t.exports={__depends__:[e(192),e(139),e(217),e(156),e(148),e(14)],__init__:["paletteProvider"],paletteProvider:["type",e(51)]}},{139:139,14:14,148:148,156:156,192:192,217:217,51:51}],53:[function(e,t,n){"use strict";function r(e,t){var n=b(e);return n.$type!==t.target.type}function i(e,t){return w(e).$type!==t.target.definitionType}function o(e,t){var n=t.type,r=t.definitionType,i=e.parent,o=w(e);if(h(e)&&"cmmn:DiscretionaryItem"===n&&!u(i))return!1;if("cmmn:HumanTask"===r){if(c(e)&&!t.isBlocking)return!1;if(d(e)&&o.isBlocking!==t.isBlocking)return!1}return!0}function a(e,t,n,r,i){this._popupMenu=e,this._cmmnReplace=t,this._cmmnFactory=n,this._modeling=r,this._rules=i,this.register()}function s(e){var t=w(e);return!E(e)&&x(t,["cmmn:Stage","cmmn:Milestone","cmmn:Task"])}function c(e){return M(w(e),"cmmn:PlanFragment")}function u(e){return M(w(e),"cmmn:Stage")}function l(e){return M(w(e),"cmmn:EventListener")}function p(e){return M(w(e),"cmmn:Milestone")}function d(e){return M(w(e),"cmmn:Task")}function f(e){return M(e,"cmmn:Criterion")}function h(e){return M(e,"cmmn:PlanItem")}var m=e(271),g=e(269),v=e(58),y=e(46).isItemCapable,x=e(45).isAny,_=e(74),b=_.getBusinessObject,w=_.getDefinition,E=_.isCasePlanModel,C=_.isRequired,S=_.isRepeatable,T=_.isManualActivation,M=_.is,P=e(72).isCollapsed;a.$inject=["popupMenu","cmmnReplace","cmmnFactory","modeling","rules"],a.prototype.register=function(){this._popupMenu.registerProvider("cmmn-replace",this)},a.prototype.getEntries=function(e){var t,n=this._rules,a=w(e);if(!n.allowed("shape.replace",{element:e}))return[];if(y(e)){if(d(e))return t=g(v.TASK,function(t){var n=t.target;if(o(e,n))return r(e,t)^i(e,t)}),this._createEntries(e,t);if(c(e)){if(!P(e))return t=g(v.PLAN_FRAGMENT_EXPANDED,function(t){var n=t.target;if(o(e,n))return r(e,t)||i(e,t)}),this._createEntries(e,t);if(P(e))return t=g(v.TASK,function(t){var n=t.target,s=n.definitionType;return!!o(e,n)&&(s===a.$type&&!n.isCollapsed||r(e,t)^i(e,t))}),this._createEntries(e,t)}if(l(e))return t=g(v.EVENT_LISTENER,function(t){return i(e,t)}),this._createEntries(e,t)}return f(e)?(t=g(v.CRITERION,function(t){return r(e,t)}),this._createEntries(e,t)):[]},a.prototype.getHeaderEntries=function(e){var t=[];return d(e)&&(t=t.concat(this._getBlockingEntry(e))),u(e)&&(t=t.concat(this._getAutoCompleteEntry(e))),s(e)&&(t=t.concat(this._getRuleEntries(e))),t},a.prototype._createEntries=function(e,t){var n=[],r=this;return m(t,function(t){var i=r._createMenuEntry(t,e);n.push(i)}),n},a.prototype._createMenuEntry=function(e,t,n){var r=this._cmmnReplace.replaceElement,i=function(){return r(t,e.target)};n=n||i;var o={label:e.label,className:e.className,id:e.actionName,action:n};return o},a.prototype._getBlockingEntry=function(e){function t(t,r){var i=!r.active;n._modeling.updateControls(e,{isBlocking:i})}var n=this,r=w(e),i=r.isBlocking,o=[{id:"toggle-is-blocking",className:"cmmn-icon-blocking",title:"Blocking",active:i,action:t}];return o},a.prototype._getAutoCompleteEntry=function(e){function t(t,r){var i=!r.active;n._modeling.updateControls(e,{autoComplete:i})}var n=this,r=w(e),i=r.autoComplete,o=[{id:"toggle-auto-complete",className:"cmmn-icon-auto-complete-marker",title:"Auto Complete",active:i,action:t}];return o},a.prototype._getRuleEntries=function(e){function t(t,r){return function(i,o){var a={};o.active?a[t]=void 0:a[t]=n._cmmnFactory.create(r),n._modeling.updateControls(e,a)}}var n=this,r=S(e),i=C(e),o=T(e),a=[{id:"toggle-required-rule",className:"cmmn-icon-required-marker",title:"Required Rule",active:i,action:t("requiredRule","cmmn:RequiredRule")}];return p(e)||a.push({id:"toggle-manual-activation-rule",className:"cmmn-icon-manual-activation-marker",title:"Manual Activation Rule",active:o,action:t("manualActivationRule","cmmn:ManualActivationRule")}),a.push({id:"toggle-repetition-rule",className:"cmmn-icon-repetition-marker",title:"Repetition Rule",active:r,action:t("repetitionRule","cmmn:RepetitionRule")}),a},t.exports=a},{269:269,271:271,45:45,46:46,58:58,72:72,74:74}],54:[function(e,t,n){t.exports={__init__:["replaceMenuProvider"],replaceMenuProvider:["type",e(53)]}},{53:53}],55:[function(e,t,n){"use strict";function r(e,t,n,r,o,l){function h(t,r){var i={type:r.newElementType,x:t.x,y:t.y,width:t.width,height:t.height};if(u(t)){var o,s=p(t),c=d(t),l=r.newElementType,f=r.newDefinitionType;f&&(c=e.replacePlanItemDefinition(c,f)),o=e.replaceItemCapable(s,l,c),a(i,{businessObject:o})}return n.createShape(i)}function m(e){return e.visualReplacements||(e.visualReplacements={}),e.visualReplacements}function g(e){var n=e.context,r=n.canExecute||n.allowed;if("attach"===r){var i=n.position||{x:e.x,y:e.y},o=n.shapes||[n.shape],a=n.target;r=t.canReplace(o,a,i,n.source)}return r}function v(e,t){var n=e&&c(e);n&&(n.remove(),n=e.group().addClass("djs-visual"),l.drawShape(n,t))}function y(e,t,n){s(t,function(t){var i=t.oldElementId,o=r.get(i)||e.shape;if(!e.visualReplacements[i]){var a=h(o,t),s=n(o);v(s,a),e.visualReplacements[i]=o}})}function x(e,t){var n=e.visualReplacements;s(n,function(e,r){var i=t(e);v(i,e),delete n[r]})}i.call(this,o),o.on(["shape.move.move","create.move"],f,function(e){var t=e.context,n=t.dragGroup,r=t.visual,i=g(e),o=i&&i.replacements;m(t);var a=function(e){var t,i;return n?(t="[data-element-id="+e.id+"]",i=n):r&&(t=".djs-dragger",i=r),i&&i.select(t)};o&&o.length?y(t,o,a):x(t,a)}),o.on(["bendpoint.move.move","connect.move"],f,function(e){var t=e.context,n=g(e),i=n&&n.replacements;m(t),i&&i.length&&y(t,i,function(e){return r.getGraphics(e)})}),o.on(["bendpoint.move.cancel","bendpoint.move.cleanup","bendpoint.move.end","bendpoint.move.out","connect.cleanup","connect.end","connect.out"],f,function(e){var t=e.context;x(t,function(e){return r.getGraphics(e)})})}var i=e(102),o=e(257),a=e(398),s=e(271),c=e(238).getVisual,u=e(46).isItemCapable,l=e(74),p=l.getBusinessObject,d=l.getDefinition,f=250;r.$inject=["cmmnReplace","cmmnRules","elementFactory","elementRegistry","eventBus","graphicsFactory"],o(r,i),t.exports=r},{102:102,238:238,257:257,271:271,398:398,46:46,74:74}],56:[function(e,t,n){t.exports={__depends__:[e(185)],__init__:["cmmnReplacePreview"],cmmnReplacePreview:["type",e(55)]}},{185:185,55:55}],57:[function(e,t,n){"use strict";function r(e,t,n,r){function i(r,i,l){l=l||{};var p,_=i.type,b=r.businessObject,w={type:_};if(u(b)&&(p=a(b,_)),y(b)){var E=f(b),C=i.definitionType,S=E;E.$type!==C&&(S=d(E,C)),p=x(b,_,S),s(E)&&s(S)&&i.isCollapsed!==!1&&(w.isCollapsed=m(b)),o(E)&&i.isCollapsed===!0&&(w.isCollapsed=!0),o(S)&&i.isBlocking===!1&&(w.isBlocking=!1),v(E)&&v(S)&&(w.isPlanningTableCollapsed=g(b)),c(E)&&c(S)&&(w.autoComplete=h(b)),m(b)||i.isCollapsed||o(E)||(w.width=r.width,w.height=r.height)}return w.businessObject=p||e.create(_),w=t.replaceElement(r,w,l),l.select!==!1&&n.select(w),w}function a(t,n){var r;return t&&(n=n||t.$type,r=e.createCriterion(n,{sentryRef:t.sentryRef,name:t.name})),r}function p(t){var n;if(t&&(n=e.createSentry({name:t.name}),t.ifPart)){var r=e.create("cmmn:IfPart");E(r,n),n.ifPart=r;var i=w(t.ifPart.condition);E(i,r),r.condition=i}return n}function d(t,n){n=n||t.$type;var r=e.create(n,{name:t.name});if(l(r)&&t.defaultControl){var i=_(t.defaultControl,r);E(i,r),r.defaultControl=i}return c(r)&&t.autoComplete&&(r.autoComplete=t.autoComplete),o(t)&&o(r)&&(r.isBlocking=t.isBlocking),r}function x(t,n,r){n=n||t.$type,r=r||f(t);var i=e.create(n,{name:t.name,definitionRef:r});if(l(i)&&t.itemControl){var o=_(t.itemControl,i);E(o,i),i.itemControl=o}return i}function _(t,n){var i;if(t){i=e.create("cmmn:PlanItemControl");var o=t.repetitionRule;!o||n&&!r.canSetRepetitionRule(n)||(o=b(o),E(o,i),i.repetitionRule=o);var a=t.requiredRule;!a||n&&!r.canSetRequiredRule(n)||(a=b(a),E(a,i),i.requiredRule=a);var s=t.manualActivationRule;!s||n&&!r.canSetManualActivationRule(n)||(s=b(s),E(s,i),i.manualActivationRule=s)}return i}function b(t){var n;if(t){var r=t.$type,i=w(t.condition);n=e.create(r,{condition:i}),E(i,n)}return n}function w(t){var n;return t&&(n=e.create("cmmn:Expression",{language:t.language,body:t.body})),n}function E(e,t){e&&(e.$parent=t)}this.replaceElement=i,this.replaceCriterion=a,this.replaceSentry=p,this.replacePlanItemDefinition=d,this.replaceItemCapable=x,this.replacePlanItemControl=_,this.replaceRule=b,this.replaceCondition=w}function i(e,t){return e=f(e),d(e,t)}function o(e){return i(e,"cmmn:Task")}function a(e){return i(e,"cmmn:Milestone")}function s(e){return i(e,"cmmn:PlanFragment")}function c(e){return i(e,"cmmn:Stage")}function u(e){return d(e,"cmmn:Criterion")}function l(e){return o(e)||c(e)||a(e)}var p=e(74),d=p.is,f=p.getDefinition,h=p.isAutoComplete,m=e(72).isCollapsed,g=e(72).isPlanningTableCollapsed,v=e(46).isPlanningTableCapable,y=e(46).isItemCapable;r.$inject=["cmmnFactory","replace","selection","cmmnRules"],t.exports=r},{46:46,72:72,74:74}],58:[function(e,t,n){"use strict";t.exports.TASK=[{label:"Task",actionName:"replace-with-task-plan-item",className:"cmmn-icon-task-none",target:{definitionType:"cmmn:Task",type:"cmmn:PlanItem"}},{label:"Human Task",actionName:"replace-with-blocking-human-task-plan-item",className:"cmmn-icon-human-blocking-task",target:{definitionType:"cmmn:HumanTask",type:"cmmn:PlanItem",isBlocking:!0}},{label:"Human Task",actionName:"replace-with-non-blocking-human-task-plan-item",className:"cmmn-icon-human-non-blocking-task",target:{definitionType:"cmmn:HumanTask",type:"cmmn:PlanItem",isBlocking:!1}},{label:"Decision Task",actionName:"replace-with-decision-task-plan-item",className:"cmmn-icon-decision-task",target:{definitionType:"cmmn:DecisionTask",type:"cmmn:PlanItem"}},{label:"Process Task",actionName:"replace-with-process-task-plan-item",className:"cmmn-icon-process-task",target:{definitionType:"cmmn:ProcessTask",type:"cmmn:PlanItem"}},{label:"Case Task",actionName:"replace-with-case-task-plan-item",className:"cmmn-icon-case-task",target:{definitionType:"cmmn:CaseTask",type:"cmmn:PlanItem"}},{label:"Stage (collapsed)",actionName:"replace-with-collapsed-stage-plan-item",className:"cmmn-icon-stage-collapsed",target:{definitionType:"cmmn:Stage",type:"cmmn:PlanItem",isCollapsed:!0}},{label:"Stage (expanded)",actionName:"replace-with-expanded-stage-plan-item",className:"cmmn-icon-stage-expanded",target:{definitionType:"cmmn:Stage",type:"cmmn:PlanItem",isCollapsed:!1}},{label:"Discretionary Task",actionName:"replace-with-task-discretionary-item",className:"cmmn-icon-task-discretionary",target:{definitionType:"cmmn:Task",type:"cmmn:DiscretionaryItem"}},{label:"Discretionary Human Task",actionName:"replace-with-blocking-human-task-discretionary-item",className:"cmmn-icon-human-blocking-task-discretionary",target:{definitionType:"cmmn:HumanTask",type:"cmmn:DiscretionaryItem",isBlocking:!0}},{label:"Discretionary Human Task",actionName:"replace-with-non-blocking-human-task-discretionary-item",className:"cmmn-icon-human-non-blocking-task-discretionary",target:{definitionType:"cmmn:HumanTask",type:"cmmn:DiscretionaryItem",isBlocking:!1}},{label:"Discretionary Decision Task",actionName:"replace-with-decision-task-discretionary-item",className:"cmmn-icon-decision-task-discretionary",target:{definitionType:"cmmn:DecisionTask",type:"cmmn:DiscretionaryItem"}},{label:"Discretionary Process Task",actionName:"replace-with-process-task-discretionary-item",className:"cmmn-icon-process-task-discretionary",target:{definitionType:"cmmn:ProcessTask",type:"cmmn:DiscretionaryItem"}},{label:"Discretionary Case Task",actionName:"replace-with-case-task-discretionary-item",className:"cmmn-icon-case-task-discretionary",target:{definitionType:"cmmn:CaseTask",type:"cmmn:DiscretionaryItem"}},{label:"Discretionary Stage (collapsed)",actionName:"replace-with-collapsed-stage-discretionary-item",className:"cmmn-icon-stage-collapsed-discretionary",target:{definitionType:"cmmn:Stage",type:"cmmn:DiscretionaryItem",isCollapsed:!0}},{label:"Discretionary Stage (expanded)",actionName:"replace-with-expanded-stage-discretionary-item",className:"cmmn-icon-stage-expanded-discretionary",target:{definitionType:"cmmn:Stage",type:"cmmn:DiscretionaryItem",isCollapsed:!1}}],t.exports.PLAN_FRAGMENT_EXPANDED=[{label:"Stage",actionName:"replace-with-stage-plan-item",className:"cmmn-icon-stage-expanded",target:{definitionType:"cmmn:Stage",type:"cmmn:PlanItem",isCollapsed:!1}},{label:"Discretionary Stage",actionName:"replace-with-stage-discretionary-item",className:"cmmn-icon-stage-expanded-discretionary",target:{definitionType:"cmmn:Stage",type:"cmmn:DiscretionaryItem",isCollapsed:!1}},{label:"Discretionary Plan Fragment",actionName:"replace-with-plan-fragment-discretionary-item",className:"cmmn-icon-plan-fragment-expanded-discretionary",target:{definitionType:"cmmn:PlanFragment",type:"cmmn:DiscretionaryItem",isCollapsed:!1}}],t.exports.EVENT_LISTENER=[{label:"Event Listener",
actionName:"replace-with-event-listener-plan-item",className:"cmmn-icon-event-listener",target:{definitionType:"cmmn:EventListener",type:"cmmn:PlanItem"}},{label:"Timer Event Listener",actionName:"replace-with-timer-event-listener-plan-item",className:"cmmn-icon-timer-event-listener",target:{definitionType:"cmmn:TimerEventListener",type:"cmmn:PlanItem"}},{label:"User Event Listener",actionName:"replace-with-user-event-listener-plan-item",className:"cmmn-icon-user-event-listener",target:{definitionType:"cmmn:UserEventListener",type:"cmmn:PlanItem"}}],t.exports.CRITERION=[{label:"Entry Criterion",actionName:"replace-with-entry-criterion",className:"cmmn-icon-entry-criterion",target:{type:"cmmn:EntryCriterion"}},{label:"Exit Criterion",actionName:"replace-with-exit-criterion",className:"cmmn-icon-exit-criterion",target:{type:"cmmn:ExitCriterion"}}]},{}],59:[function(e,t,n){t.exports={__depends__:[e(194),e(196),e(210)],cmmnReplace:["type",e(57)]}},{194:194,196:196,210:210,57:57}],60:[function(e,t,n){"use strict";function r(e){Y.call(this,e)}function i(e,t){var n=L(t);return n.indexOf(e)!==-1}function o(e){return v(e)||g(e)||I(O(e),"cmmn:Stage")}function a(e){return!e||s(e)}function s(e){return e.labelTarget}function c(e){return e.waypoints}function u(e,t,n){return!A(t.incoming,function(r){return r!==n&&p(r)&&r.source===e&&r.target===t})}function l(e,t){return A(e.incoming,function(e){return e!==t&&p(e)})}function p(e){return!e.businessObject.cmmnElementRef}function d(e){return A(e.incoming,function(e){return f(e)})}function f(e){return I(e.businessObject.cmmnElementRef,"cmmn:OnPart")}function h(e,t){var n=O(e)||e;return!!I(n,"cmmn:PlanFragment")&&!(!t&&I(n,"cmmn:Stage"))}function m(e){return I(O(e),"cmmn:EventListener")}function g(e){return I(O(e),"cmmn:Milestone")}function v(e){return I(O(e),"cmmn:Task")}function y(e){return e=O(e),!(!e||!e.isBlocking)}function x(e){return I(e,"cmmn:Criterion")}function _(e){return I(e,"cmmn:EntryCriterion")}function b(e){return I(e,"cmmn:ExitCriterion")}function w(e){return c(e)&&(e=e.businessObject.cmmnElementRef),I(e,"cmmn:Artifact")}function E(e){return I(e,"cmmn:TextAnnotation")}function C(e){return I(e,"cmmn:CaseFileItem")}function S(e){return I(e,"cmmn:PlanItem")}function T(e,t){return z($(e),$(t))}function M(e,t){return z(O(e),O(t))}var P=e(257),A=e(267),R=e(271),k=e(398),N=e(74),I=N.is,D=N.isCasePlanModel,O=N.getDefinition,B=N.getBusinessObject,j=e(72).isCollapsed,L=e(45).getParents,F=e(45),z=F.isSame,U=F.isSameCase,$=F.getParent,V=e(46),G=V.isDiscretionaryToHumanTask,H=V.isHumanTask,W=V.isDiscretionaryItem,q=e(65).getCriterionAttachment,Y=e(202);P(r,Y),r.$inject=["eventBus"],t.exports=r,r.prototype.init=function(){var e=this;this.addRule("connection.create",function(t){var n=t.source,r=t.target,i=!1;return i=e.canConnect(n,r)||e.canReplaceConnectionEnd(n,r,"target"),i||(i=e.canConnect(r,n)||e.canReplaceConnectionEnd(r,n,"source"),i&&k(i,{reverse:!0})),i}),this.addRule("connection.reconnectStart",function(t){var n=t.connection,r=t.hover,i=r||t.source,o=n.target,a=!1;return a=e.canConnect(i,o,n),!a&&r&&(a=e.canReplaceConnectionEnd(r,o,"source"),a||(a=e.canConnect(o,r,n)||e.canReplaceConnectionEnd(o,r,"target"),a&&k(a,{reverse:!0}))),a}),this.addRule("connection.reconnectEnd",function(t){var n=t.connection,r=n.source,i=t.hover,o=i||t.target,a=!1;return a=e.canConnect(r,o,n),!a&&i&&(a=e.canReplaceConnectionEnd(r,i,"target"),a||(a=e.canConnect(i,r,n)||e.canReplaceConnectionEnd(i,r,"source"),a&&k(a,{reverse:!0}))),a}),this.addRule(["shape.create","shape.append"],function(t){var n=t.target,r=t.shape,i=t.source,o=t.position,a=[r];return e.canAttach(a,n,i,o)||e.canCreate(r,n,i,o)||e.canReplace(a,n,o,i)}),this.addRule("shape.resize",function(t){var n=t.shape,r=t.newBounds;return e.canResize(n,r)}),this.addRule("elements.move",function(t){var n=t.target,r=t.shapes,i=t.position;return e.canAttach(r,n,null,i)||e.canMove(r,n,i)||e.canReplace(r,n,i)}),this.addRule("shape.replace",function(e){var t,n=e.element;if(x(n)){if(t=n.host,D(t))return!1;if(v(t)&&!y(t))return!1;if(g(t)||m(t))return!1}})},r.prototype.canMove=function(e,t){var n=this;return!t||e.every(function(r){return!(W(r)&&!n.canMoveDiscretionaryItem(r,e,t))&&n.canDrop(r,t)})},r.prototype.canMoveDiscretionaryItem=function(e,t,n){return!h(n)||A(e.incoming,function(e){var r=e.source;if(p(e))return i(n,r)||t.indexOf(r)!==-1})},r.prototype.canCreate=function(e,t,n,r){var o=this;return!!t&&(s(t)?null:!z(n,t)&&((!n||!i(n,t))&&(!(W(e)&&!o.canCreateDiscretionaryItem(e,t,n))&&o.canDrop(e,t,r))))},r.prototype.canCreateDiscretionaryItem=function(e,t,n){return!h(t)||i(t,n)},r.prototype.canDrop=function(e,t){return!(!s(e)||c(t))||(w(e)?I(t,"cmmndi:CMMNDiagram")||h(t,!0):!x(e)&&(D(e)?I(t,"cmmndi:CMMNDiagram"):!!h(t,!0)&&!j(t)))},r.prototype.canResize=function(e,t){return h(e,!0)?!j(e)&&(!t||t.width>=100&&t.height>=80):!!E(e)},r.prototype.canConnect=function(e,t,n){return a(e)||a(t)?null:!z(e,t)&&(this.canConnectPlanItemOnPartConnection(e,t)?{type:"cmmn:PlanItemOnPart",isStandardEventVisible:!0}:this.canConnectCaseFileItemOnPartConnection(e,t)?{type:"cmmn:CaseFileItemOnPart",isStandardEventVisible:!0}:this.canConnectDiscretionaryConnection(e,t,n)?{type:"cmmndi:CMMNEdge"}:n&&I(n.businessObject.cmmnElementRef,"cmmn:Association")&&this.canConnectAssociation(e,t)?{type:"cmmn:Association"}:!(!E(e)&&!E(t))&&{type:"cmmn:Association"})},r.prototype.canConnectDiscretionaryConnection=function(e,t,n){if(!H(O(e)))return!1;if(!y(e))return!1;if(!W(t))return!1;var r=O(e),i=O(t);if(z(r,i))return!1;var o=$(e),a=$(t);if(!z(o,a))return!1;if(G(t)){if(!u(e,t,n))return!1;var s=$(B(t),"cmmn:HumanTask");if(!z(O(e),s)&&l(t,n))return!1}return!0},r.prototype.canConnectPlanItemOnPartConnection=function(e,t){return!!U(e,t)&&(b(e)&&(e=e.host),!z(e,t.host)&&(!i(e,t.host)&&((!_(t)||!i(t.host,e))&&(S(e)&&x(t)))))},r.prototype.canConnectCaseFileItemOnPartConnection=function(e,t){return!!(U(e,t)&&C(e)&&x(t))},r.prototype.canConnectAssociation=function(e,t){return!c(e)&&!c(t)&&(!i(t,e)&&!i(e,t))},r.prototype.canAttach=function(e,t,n,r){if(z(n,t))return!1;if(Array.isArray(e)||(e=[e]),1!==e.length)return!1;var i=e[0];return!s(i)&&(!!x(i)&&(!t||!!this.canAttachCriterion(i,t,r,n)&&"attach"))},r.prototype.canAttachEntryCriterion=function(e,t,n,r){return!!this.canAttachCriterion(e,t,n,r)&&((!r||!i(t,r))&&(!D(t)&&(!h(t,!0)||!A(e.incoming,function(e){if(I(e.businessObject.cmmnElementRef,"cmmn:PlanItemOnPart"))return i(t,e.source)}))))},r.prototype.canAttachExitCriterion=function(e,t,n,r){return!!this.canAttachCriterion(e,t,n,r)&&(!g(t)&&!(v(t)&&!y(t)))},r.prototype.canAttachCriterion=function(e,t,n,r){return(!r||!i(r,t))&&(!x(t)&&(!m(t)&&(!h(t)&&(!E(t)&&(!C(t)&&!(n&&!q(n,t)))))))},r.prototype.canReplace=function(e,t,n,r){if(!t)return!1;if(z(r,t))return!1;var i={replacements:[]},o=this;return R(e,function(a){if(_(a)&&!o.canAttachEntryCriterion(a,t,n,r)&&o.canAttachExitCriterion(a,t,n,r)&&i.replacements.push({oldElementId:a.id,newElementType:"cmmn:ExitCriterion"}),b(a)&&!o.canAttachExitCriterion(a,t,n,r)&&o.canAttachEntryCriterion(a,t,n,r)&&i.replacements.push({oldElementId:a.id,newElementType:"cmmn:EntryCriterion"}),h(t)&&W(a)&&o.canDrop(a,t)&&!o.canMoveDiscretionaryItem(a,e,t)){var s={oldElementId:a.id,newElementType:"cmmn:PlanItem"};h(a)&&k(s,{newDefinitionType:"cmmn:Stage"}),i.replacements.push(s)}}),!!i.replacements.length&&i},r.prototype.canReplaceConnectionEnd=function(e,t,n){return!(!e||!t)&&(!z(e,t)&&(!!U(e,t)&&("source"===n?this.canReplaceSource(e,t):this.canReplaceTarget(e,t))))},r.prototype.canReplaceSource=function(e,t){return W(e)&&x(t)?!z(e,t.host)&&(!h(e)&&(!i(e,t.host)&&((!_(t)||!i(t.host,e))&&{type:"cmmn:PlanItemOnPart",isStandardEventVisible:!0,replacements:[{oldElementId:e.id,newElementType:"cmmn:PlanItem"}]}))):!(!_(e)||!_(t))&&(!z(e.host,t.host)&&(!i(t.host,e.host)&&!i(e.host,t.host)&&(!d(e)&&(!!this.canAttachExitCriterion(e,e.host)&&{type:"cmmn:PlanItemOnPart",isStandardEventVisible:!0,replacements:[{oldElementId:e.id,newElementType:"cmmn:ExitCriterion"}]}))))},r.prototype.canReplaceTarget=function(e,t){return H(O(e))&&S(t)?!!y(e)&&(!m(t)&&!g(t)&&(!M(e,t)&&(!!T(e,t)&&{type:"cmmndi:CMMNEdge",replacements:[{oldElementId:t.id,newElementType:"cmmn:DiscretionaryItem"}]}))):!(!S(e)&&!b(e)||!_(t))&&(!z(e.host||e,t.host)&&(!!i(t.host,e.host||e)&&(!d(t)&&(!!this.canAttachExitCriterion(t,t.host)&&{type:"cmmn:PlanItemOnPart",isStandardEventVisible:!0,replacements:[{oldElementId:t.id,newElementType:"cmmn:ExitCriterion"}]}))))},r.prototype.canSetRepetitionRule=function(e){return o(e)},r.prototype.canSetRequiredRule=function(e){return o(e)},r.prototype.canSetManualActivationRule=function(e){return!g(e)&&o(e)}},{202:202,257:257,267:267,271:271,398:398,45:45,46:46,65:65,72:72,74:74}],61:[function(e,t,n){t.exports={__depends__:[e(204)],__init__:["cmmnRules"],cmmnRules:["type",e(60)]}},{204:204,60:60}],62:[function(e,t,n){"use strict";function r(e,t,n){this._elementRegistry=e,this._canvas=n,t.registerProvider(this)}function i(e){var t=s(e,function(e){return!!e.matched});return t.length>0}function o(e,t){var n=[],r=e;if(!e)return n;e=e.toLowerCase(),t=t.toLowerCase();var i=e.indexOf(t);return i>-1?(0!==i&&n.push({normal:r.substr(0,i)}),n.push({matched:r.substr(i,t.length)}),t.length+i<e.length&&n.push({normal:r.substr(t.length+i,e.length)})):n.push({normal:r}),n}var a=e(273),s=e(269),c=e(277),u=e(18);t.exports=r,r.$inject=["elementRegistry","searchPad","canvas"],r.prototype.find=function(e){var t=this._canvas.getRootElement(),n=this._elementRegistry.filter(function(e){return!e.labelTarget});return n=s(n,function(e){return e!==t}),n=a(n,function(t){return{primaryTokens:o(u.getLabel(t),e),secondaryTokens:o(t.id,e),element:t}}),n=s(n,function(e){return i(e.primaryTokens)||i(e.secondaryTokens)}),n=c(n,function(e){return u.getLabel(e.element)+e.element.id})}},{18:18,269:269,273:273,277:277}],63:[function(e,t,n){t.exports={__depends__:[e(206)],__init__:["cmmnSearch"],cmmnSearch:["type",e(62)]}},{206:206,62:62}],64:[function(e,t,n){"use strict";function r(e){return a(s(e),"cmmn:PlanFragment")}function i(e,t,n){function i(e,t,r){return"attach"===n.canAttach([e],t,null,r)}function o(e,t,n){var r=f(n),i=m(e,n);/top/.test(i)?d(e,"y",r.top):/bottom/.test(i)&&d(e,"y",r.bottom),/left/.test(i)?d(e,"x",r.left):/right/.test(i)&&d(e,"x",r.right)}u.call(this,e,t),e.on("resize.start",h+500,function(e){var t=e.context,n=t.shape;r(n)&&!c(n)&&(t.minDimensions={width:140,height:120}),a(n,"cmmn:TextAnnotation")&&(t.minDimensions={width:50,height:30})}),e.on(["create.move","create.end","shape.move.move","shape.move.end"],1500,function(e){var t=e.context,n=t.target,r=t.shape;n&&!p(e)&&i(r,n,e)&&o(e,r,n)})}var o=e(257),a=e(74).is,s=e(74).getDefinition,c=e(72).isCollapsed,u=e(213),l=e(212),p=l.isSnapped,d=l.setSnapped,f=e(222).asTRBL,h=1001,m=e(65).getCriterionAttachment;o(i,u),i.$inject=["eventBus","canvas","cmmnRules"],t.exports=i},{212:212,213:213,222:222,257:257,65:65,72:72,74:74}],65:[function(e,t,n){"use strict";function r(e,t,n,r){return e.x-r<t.x&&e.y-r<t.y?"corner":e.x+r>t.x+t.width&&e.y-r<t.y?"corner":e.x-r<t.x&&e.y+r>t.y+t.height?"corner":e.x+r>t.x+t.width&&e.y+r>t.y+t.height?"corner":o(e,t,n)}function i(e,t){var n,i=s(t);return n=a(t,"cmmn:PlanItem")&&a(i,"cmmn:Stage")?r(e,t,-15,20):a(i,"cmmn:Milestone")?r(e,t,-3,7):o(e,t,-15),"intersect"!==n?n:null}var o=e(222).getOrientation,a=e(74).is,s=e(74).getDefinition;t.exports.getCriterionAttachment=i},{222:222,74:74}],66:[function(e,t,n){t.exports={__init__:["snapping"],snapping:["type",e(64)]}},{64:64}],67:[function(e,t,n){"use strict";function r(e,t){return s({id:e.id,type:e.$type,businessObject:e},t)}function i(e){return c(e,function(e){return{x:e.x,y:e.y}})}function o(e,t,n){return new Error("element "+h(t)+" referenced by "+h(e)+"#"+n+" not yet drawn")}function a(e,t,n,r){this._eventBus=e,this._canvas=t,this._elementFactory=n,this._elementRegistry=r}var s=e(398),c=e(273),u=e(73),l=e(74).is,p=u.hasExternalLabel,d=u.getExternalLabelBounds,f=e(72).isCollapsed,h=e(70).elementToString;a.$inject=["eventBus","canvas","elementFactory","elementRegistry"],t.exports=a,a.prototype.root=function(e){var t=this._elementFactory.createRoot(r(e));return this._canvas.setRootElement(t),t},a.prototype.add=function(e,t){var n,o,a=e.di;if(a&&l(a,"cmmndi:CMMNShape")&&!this._getElement(e)){var s=f(e);o=t&&(t.hidden||t.collapsed);var c=e.di.bounds;n=this._elementFactory.createShape(r(e,{collapsed:s,hidden:o,x:Math.round(c.x),y:Math.round(c.y),width:Math.round(c.width),height:Math.round(c.height)})),l(e,"cmmn:Criterion")&&this._attachCriterion(e,n),this._canvas.addShape(n,t)}else{if(!(a&&l(a,"cmmndi:CMMNEdge")||l(e,"cmmndi:CMMNEdge")))throw new Error("unknown di "+h(a)+" for element "+h(e));var u=this._getSource(e),d=this._getTarget(e);o=t&&(t.hidden||t.collapsed)||u&&u.hidden||d&&d.hidden;var m=(e.di||{}).waypoint||e.waypoint;n=this._elementFactory.createConnection(r(e,{hidden:o,source:u,target:d,waypoints:i(m)})),this._canvas.addConnection(n,t)}return p(e)&&this.addLabel(e,n),this._eventBus.fire("cmmnElement.added",{element:n}),n},a.prototype._attachCriterion=function(e,t){var n=e.$parent;if(!n)throw new Error("missing "+h(e)+"$parent");var r=this._elementRegistry.get(n.id),i=r&&r.attachers;if(!r)throw o(e,n,"criterion");t.host=r,i||(r.attachers=i=[]),i.indexOf(t)===-1&&i.push(t)},a.prototype.addLabel=function(e,t){var n=d(e,t),i=this._elementFactory.createLabel(r(e,{id:e.id+"_label",labelTarget:t,type:"label",hidden:t.hidden,x:Math.round(n.x),y:Math.round(n.y),width:Math.round(n.width),height:Math.round(n.height)}));return this._canvas.addShape(i,t.parent)},a.prototype._getSource=function(e){var t=e.cmmnElementRef;if(t){if(l(t,"cmmn:OnPart"))return t.exitCriterionRef?this._getEnd(t,"exitCriterionRef"):this._getEnd(t,"sourceRef");if(l(t,"cmmn:Association"))return this._getEnd(t,"sourceRef")}if(l(e,"cmmndi:CMMNEdge"))return this._getEnd(e,"sourceCMMNElementRef")},a.prototype._getTarget=function(e){var t=e.cmmnElementRef;return t&&l(t,"cmmn:Association")?this._getEnd(t,"targetRef"):this._getEnd(e,"targetCMMNElementRef")},a.prototype._getEnd=function(e,t){var n=e[t],r=n&&this._getElement(n);if(r)return r;throw n?o(e,n,t):new Error(h(e)+"#"+t+"Ref not specified")},a.prototype._getElement=function(e){return this._elementRegistry.get(e.id)}},{273:273,398:398,70:70,72:72,73:73,74:74}],68:[function(e,t,n){"use strict";function r(e){function t(e){return!!H[e.id]}function n(e){H[e.id]=e}function r(e){for(;e&&!c(e,"cmmn:Case");)e=e.$parent;return e}function a(t,n){return e.element(t,n)}function p(t,n){return e.root(t,n)}function d(t,n){try{return e.addItem(t),t.di&&a(t,n)}catch(e){f(e.message,{element:t,error:e}),console.error("failed to import "+s(t)),console.error(e)}}function f(t,n){e.error(t,n)}function h(e,t){return function(n){e(n,t)}}function m(e){var t=e.cmmnElementRef;if(t&&!c(e,"cmmndi:CMMNEdge"))if(t.di)f("multiple DI elements defined for "+s(t),{element:t});else{var n=r(t);n&&G.indexOf(n)===-1&&G.push(n),(c(t,"cmmn:TextAnnotation")||c(t,"cmmn:CaseFileItem"))&&W.push(t),l.bind(t,"di"),t.di=e}else if(c(e,"cmmndi:CMMNEdge")){var i=!0;if(g(e)||(i=!1,f("no target referenced in "+s(e),{element:e})),v(e)||(i=!1,f("no source referenced in "+s(e),{element:e})),i)if(c(t,"cmmn:Association"))q.push(e);else if(t)$.push(function(t){y(e,t)});else{var o=e.sourceCMMNElementRef;V[o.id]=V[o.id]||[],V[o.id].push(e)}}else f("no cmmnElement referenced in "+s(e),{element:e})}function g(e){return c(e.cmmnElementRef,"cmmn:Association")?!!e.cmmnElementRef.targetRef:!!e.targetCMMNElementRef}function v(e){return c(e.cmmnElementRef,"cmmn:OnPart")?!(!e.cmmnElementRef.exitCriterionRef&&!e.cmmnElementRef.sourceRef):c(e.cmmnElementRef,"cmmn:Association")?!!e.cmmnElementRef.sourceRef:!!e.sourceCMMNElementRef}function y(e,t){a(e,t)}function x(e){_(e.diagramElements)}function _(e){i(e,b)}function b(e){m(e)}function w(e,t){var n=e.CMMNDI;if(n){var r=n.diagrams;if(t&&r.indexOf(t)===-1)throw new Error("diagram not part of cmmn:Definitions");!t&&r&&r.length&&(t=r[0]),x(t);var o=p(t,t);E(G,o),i(W,h(O)),i(q,h(L))}}function E(e,t){i(e,function(e){C(e,t),U=[],$=[]})}function C(e,t){var n,r=e.casePlanModel;r&&(n=S(r,t)),T(U),i($,function(e){e(n)})}function S(e,t){var n=d(e,t);return i(e.exitCriteria,h(I,n)),M(e,n),D(e,n),n}function T(e){i(e,function(e){e()})}function M(e,t){k(e.planItems,t),c(e,"cmmn:Stage")&&P(e,t)}function P(e,t){A(e.planningTable,t)}function A(e,t){e&&i(e.tableItems,function(e){c(e,"cmmn:DiscretionaryItem")?R(e,t):c(e,"cmmn:PlanningTable")&&A(e,t)})}function R(e,r){t(e)||(n(e),N(e,r))}function k(e,t){i(e,h(N,t))}function N(e,t){var n=d(e,t);i(e.exitCriteria,h(I,t)),i(e.entryCriteria,h(I,t));var r=e.definitionRef;if(c(r,"cmmn:PlanFragment"))M(r,n),D(e,n);else if(c(r,"cmmn:HumanTask")){A(r.planningTable,t);var o=V[e.id];i(o,h(F,t)),delete V[e.id]}}function I(e,t){U.unshift(function(){d(e,t)})}function D(e,t){if(e.di&&e.di.bounds){var n=z(W,e);i(n,function(e){u.remove(W,e),O(e,t)})}}function O(e,t){c(e,"cmmn:TextAnnotation")?j(e,t):c(e,"cmmn:CaseFileItem")&&B(e,t)}function B(e,t){d(e,t)}function j(e,t){d(e,t)}function L(e,t){a(e,t)}function F(e,t){U.push(function(){a(e,t)})}function z(e,t){var n=t.di.bounds;return o(e,function(e){return e.di.bounds.x>n.x&&e.di.bounds.x<n.x+n.width&&e.di.bounds.y>n.y&&e.di.bounds.y<n.y+n.height})}var U=[],$=[],V={},G=[],H={},W=[],q=[];return{handleDefinitions:w}}var i=e(271),o=e(269),a=e(432),s=e(70).elementToString,c=e(74).is,u=e(232),l=new a({name:"cmmnElement",enumerable:!0},{name:"di"});t.exports=r},{232:232,269:269,271:271,432:432,70:70,74:74}],69:[function(e,t,n){"use strict";function r(e,t,n){function r(e){var t={root:function(e){return a.root(e)},element:function(e,t){return a.add(e,t)},error:function(e,t){u.push({message:e,context:t})},addItem:function(e){c.add(e)}},n=new i(t);n.handleDefinitions(e)}var o,a=e.get("cmmnImporter"),s=e.get("eventBus"),c=e.get("itemRegistry"),u=[];s.fire("import.render.start",{definitions:t});try{r(t)}catch(e){o=e}s.fire("import.render.complete",{error:o,warnings:u}),n(o,u)}var i=e(68);t.exports.importCmmnDiagram=r},{68:68}],70:[function(e,t,n){"use strict";t.exports.elementToString=function(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}},{}],71:[function(e,t,n){t.exports={cmmnImporter:["type",e(67)]}},{67:67}],72:[function(e,t,n){"use strict";var r=e(74).is,i=e(74).getBusinessObject,o=e(74).isCasePlanModel;t.exports.isCollapsed=function(e){if(!o(e)){e=i(e);var t=e.definitionRef;if(r(t,"cmmn:PlanFragment"))return!!(e&&e.di&&e.di.isCollapsed)}return!1},t.exports.isPlanningTableCollapsed=function(e){return e=i(e),!!(r(e,"cmmn:Stage")||e.definitionRef&&(r(e.definitionRef,"cmmn:Stage")||r(e.definitionRef,"cmmn:HumanTask")))&&(e.di&&e.di.isPlanningTableCollapsed)},t.exports.isStandardEventVisible=function(e){e=i(e);var t=e.cmmnElementRef;return!(!r(t,"cmmn:OnPart")||!e.isStandardEventVisible)}},{74:74}],73:[function(e,t,n){"use strict";var r=e(74).is,i=e(398),o=t.exports.DEFAULT_LABEL_SIZE={width:90,height:20};t.exports.hasExternalLabel=function(e){return(r(e,"cmmn:PlanItem")||r(e,"cmmn:DiscretionaryItem"))&&(e=e.definitionRef),r(e,"cmmndi:CMMNEdge")&&e.cmmnElementRef&&r(e.cmmnElementRef,"cmmn:OnPart")&&(e=e.cmmnElementRef),r(e,"cmmn:EventListener")||r(e,"cmmn:OnPart")||r(e,"cmmn:CaseFileItem")};var a=t.exports.getWaypointsMid=function(e){var t=e.length/2-1,n=e[Math.floor(t)],r=e[Math.ceil(t+.01)];return{x:n.x+(r.x-n.x)/2,y:n.y+(r.y-n.y)/2}},s=t.exports.getExternalLabelMid=function(e){var t=e.businessObject,n=t.di;return!n&&r(t,"cmmndi:CMMNEdge")&&t.cmmnElementRef&&(n=t),t&&n&&n.waypoint?a(n.waypoint):{x:e.x+e.width/2,y:e.y+e.height+o.height/2}};t.exports.getExternalLabelBounds=function(e,t){var n,r,a,c=e.di||e,u=c.label;return u&&u.bounds?(a=u.bounds,r={width:Math.max(o.width,a.width),height:a.height},n={x:a.x+a.width/2,y:a.y+a.height/2}):(n=s(t),r=o),i({x:n.x-r.width/2,y:n.y-r.height/2},r)};var c=t.exports.hasLabelBounds=function(e){return e&&e.di&&e.di.label&&e.di.label.bounds};t.exports.getLabelBounds=function(e){if(c(e))return e.di.label.bounds}},{398:398,74:74}],74:[function(e,t,n){"use strict";function r(e,t){return!(!e||"function"!=typeof e.$instanceOf||!e.$instanceOf(t))}function i(e,t){return r(o(e),t)}function o(e){return e&&e.businessObject?e.businessObject:e}function a(e){return e=o(e),i(e,"cmmn:Stage")&&e.$parent&&i(e.$parent,"cmmn:Case")}function s(e){var t=o(e);return i(e,"cmmn:PlanItemDefinition")||i(e,"cmmn:CaseFileItemDefinition")?t:t&&t.definitionRef}function c(e){var t=s(e);return t&&t.defaultControl}function u(e){return e=o(e),e&&e.itemControl}function l(e,t){var n=u(e),r=c(e);return n&&n[t]?n[t]:r&&r[t]}function p(e){return!!l(e,"requiredRule")}function d(e){return!!l(e,"repetitionRule")}function f(e){return!!l(e,"manualActivationRule")}function h(e){e=o(e);var t=s(e);return e.autoComplete||t&&t.autoComplete}function m(e){return e=o(e),e.planningTable||s(e)&&s(e).planningTable}function g(e){e=o(e),i(e,"cmmndi:CMMNEdge")&&e.cmmnElementRef&&(e=e.cmmnElementRef);var t=e.name;return t||e.definitionRef&&(t=e.definitionRef.name),t}function v(e){var t=o(e);return i(t,"cmmn:Sentry")?t:t&&t.sentryRef}function y(e){return e=o(e),e.cmmnElementRef&&e.cmmnElementRef.standardEvent}function x(e){return i(e,"cmmndi:CMMNEdge")&&(e=o(e).cmmnElementRef),i(e,"cmmn:OnPart")?i(e.exitCriterionRef,"cmmn:ExitCriterion")?["exit"]:_(e.sourceRef):[]}function _(e){if(e=o(e),i(e,"cmmn:CaseFileItem"))return["addChild","addReference","create","delete","removeChild","removeReference","replace","update"];if(i(e,"cmmn:PlanItem")||i(e,"cmmn:DiscretionaryItem")){var t=s(e);return i(t,"cmmn:EventListener")||i(t,"cmmn:Milestone")?["create","occur","resume","suspend","terminate"]:["complete","create","disable","enable","exit","fault","manualStart","parentResume","parentSuspend","reactivate","reenable","resume","start","suspend","terminate"]}return a(e)?["close","complete","create","fault","reactivate","suspend","terminate"]:[]}t.exports.is=i,t.exports.getBusinessObject=o,t.exports.isCasePlanModel=a,t.exports.getDefinition=s,t.exports.getDefaultControl=c,t.exports.getItemControl=u,t.exports.isRequired=p,t.exports.isRepeatable=d,t.exports.isManualActivation=f,t.exports.isAutoComplete=h,t.exports.hasPlanningTable=m,t.exports.getName=g,t.exports.getSentry=v,t.exports.getStandardEvent=y,t.exports.getStandardEvents=x,t.exports.getTransitions=_},{}],75:[function(e,t,n){"use strict";function r(e){return e.join(";")}function i(){o||(o=a(d),s.bind(o,".backdrop","click",function(e){document.body.removeChild(o)})),document.body.appendChild(o)}var o,a=e(415),s=e(414),c=t.exports.BPMNIO_LOGO="iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAMAAADypuvZAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADBQTFRFiMte9PrwldFwfcZPqtqN0+zEyOe1XLgjvuKncsJAZ70y6fXh3vDT////UrQV////G2zN+AAAABB0Uk5T////////////////////AOAjXRkAAAHDSURBVHjavJZJkoUgDEBJmAX8979tM8u3E6x20VlYJfFFMoL4vBDxATxZcakIOJTWSmxvKWVIkJ8jHvlRv1F2LFrVISCZI+tCtQx+XfewgVTfyY3plPiQEAzI3zWy+kR6NBhFBYeBuscJLOUuA2WVLpCjVIaFzrNQZArxAZKUQm6gsj37L9Cb7dnIBUKxENaaMJQqMpDXvSL+ktxdGRm2IsKgJGGPg7atwUG5CcFUEuSv+CwQqizTrvDTNXdMU2bMiDWZd8d7QIySWVRsb2vBBioxOFt4OinPBapL+neAb5KL5IJ8szOza2/DYoipUCx+CjO0Bpsv0V6mktNZ+k8rlABlWG0FrOpKYVo8DT3dBeLEjUBAj7moDogVii7nSS9QzZnFcOVBp1g2PyBQ3Vr5aIapN91VJy33HTJLC1iX2FY6F8gRdaAeIEfVONgtFCzZTmoLEdOjBDfsIOA6128gw3eu1shAajdZNAORxuQDJN5A5PbEG6gNIu24QJD5iNyRMZIr6bsHbCtCU/OaOaSvgkUyDMdDa1BXGf5HJ1To+/Ym6mCKT02Y+/Sa126ZKyd3jxhzpc1r8zVL6YM1Qy/kR4ABAFJ6iQUnivhAAAAAAElFTkSuQmCC",u=r(["z-index: 1001","position: fixed","top: 0","left: 0","right: 0","bottom: 0"]),l=r(["width: 100%","height: 100%","background: rgba(0,0,0,0.2)"]),p=r(["position: absolute","left: 50%","top: 40%","margin: 0 -130px","width: 260px","padding: 10px","background: white","border: solid 1px #AAA","border-radius: 3px","font-family: Helvetica, Arial, sans-serif","font-size: 14px","line-height: 1.2em"]),d='<div class="bio-powered-by-lightbox" style="'+u+'"><div class="backdrop" style="'+l+'"></div><div class="notice" style="'+p+'"><a href="http://bpmn.io" target="_blank" style="float: left; margin-right: 10px"><img src="data:image/png;base64,'+c+'"></a>Web-based tooling for BPMN, DMN and CMMN diagrams powered by <a href="http://bpmn.io" target="_blank">bpmn.io</a>.</div></div>';t.exports.open=i},{414:414,415:415}],76:[function(e,t,n){t.exports=e(78)},{78:78}],77:[function(e,t,n){"use strict";function r(e,t){s.call(this,e,t)}var i=e(395),o=e(390),a=e(398),s=e(423),c=e(421),u=e(422);r.prototype=Object.create(s.prototype),t.exports=r,r.prototype.fromXML=function(e,t,n,r){i(t)||(r=n,n=t,t="cmmn:Definitions"),o(n)&&(r=n,n={});var s=new c(a({model:this,lax:!0},n)),u=s.handler(t);s.fromXML(e,u,r)},r.prototype.toXML=function(e,t,n){o(t)&&(n=t,t={});var r=new u(t);try{var i=r.toXML(e);n(null,i)}catch(e){n(e)}}},{390:390,395:395,398:398,421:421,422:422,423:423}],78:[function(e,t,n){"use strict";var r=e(398),i=e(77),o={cmmn:e(79),cmmndi:e(80),dc:e(81),di:e(82)};t.exports=function(e,t){return new i(r({},o,e),t)}},{398:398,77:77,79:79,80:80,81:81,82:82}],79:[function(e,t,n){t.exports={name:"CMMN",uri:"http://www.omg.org/spec/CMMN/20151109/MODEL",types:[{name:"ApplicabilityRule",superClass:["CMMNElement"],properties:[{name:"condition",type:"Expression",xml:{serialize:"property"}},{name:"contextRef",type:"CaseFileItem",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["CMMNElement"]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"CMMNElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"CMMNElement",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"ManualActivationRule",superClass:["CMMNElement"],properties:[{name:"condition",type:"Expression",xml:{serialize:"property"}},{name:"name",isAttr:!0,type:"String"},{name:"contextRef",type:"CaseFileItem",isAttr:!0,isReference:!0}]},{name:"Case",superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"caseFileModel",type:"CaseFile",xml:{serialize:"property"}},{name:"casePlanModel",type:"Stage",xml:{serialize:"property"}},{name:"caseRoles",type:"CaseRoles"},{name:"input",type:"CaseParameter",isMany:!0,xml:{serialize:"property"}},{name:"output",type:"CaseParameter",isMany:!0,xml:{serialize:"property"}}]},{name:"CaseFile",superClass:["CMMNElement"],properties:[{name:"caseFileItems",type:"CaseFileItem",isMany:!0}]},{name:"CaseFileItem",superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"multiplicity",type:"String",isAttr:!0,default:"Unspecified"},{name:"definitionRef",type:"CaseFileItemDefinition",isAttr:!0,isReference:!0},{name:"sourceRef",type:"CaseFileItem",isAttr:!0,isReference:!0},{name:"targetRefs",type:"CaseFileItem",isAttr:!0,isReference:!0,isMany:!0},{name:"children",type:"Children",xml:{serialize:"property"}}]},{name:"CaseFileItemDefinition",superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"definitionType",type:"String",default:"http://www.omg.org/spec/CMMN/DefinitionType/Unspecified",isAttr:!0},{name:"properties",type:"Property",isMany:!0},{name:"structureRef",type:"String",isAttr:!0},{name:"importRef",type:"Import",isAttr:!0,isReference:!0}]},{name:"CaseFileItemOnPart",superClass:["OnPart"],properties:[{name:"standardEvent",type:"String"},{name:"sourceRef",type:"CaseFileItem",isAttr:!0,isReference:!0}]},{name:"CaseParameter",superClass:["Parameter"],properties:[{name:"bindingRef",type:"CaseFileItem",isAttr:!0,isReference:!0},{name:"bindingRefinement",type:"Expression",xml:{serialize:"property"}}]},{name:"CaseRoles",superClass:["Parameter"],properties:[{name:"role",type:"Role",isMany:!0}]},{name:"CaseTask",superClass:["Task"],properties:[{name:"parameterMapping",type:"ParameterMapping",isMany:!0},{name:"caseRefExpression",type:"Expression",xml:{serialize:"property"}},{name:"caseRef",type:"String",isAttr:!0}]},{name:"Children",superClass:["CMMNElement"],properties:[{name:"caseFileItems",type:"CaseFileItem",isMany:!0}]},{name:"CMMNElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionElements",type:"ExtensionElements"},{name:"extensionDefinitions",type:"ExtensionDefinition",isReference:!0,isMany:!0}]},{name:"Definitions",superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",type:"String",isAttr:!0},{name:"expressionLanguage",type:"String",isAttr:!0,default:"http://www.w3.org/1999/XPath"},{name:"exporter",isAttr:!0,type:"String"},{name:"exporterVersion",isAttr:!0,type:"String"},{name:"author",isAttr:!0,type:"String"},{name:"creationDate",type:"DateTime",isAttr:!0},{name:"imports",type:"Import",isMany:!0},{name:"caseFileItemDefinitions",type:"CaseFileItemDefinition",isMany:!0},{name:"cases",type:"Case",isMany:!0},{name:"processes",type:"Process",isMany:!0},{name:"decisions",type:"Decision",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"relationships",type:"Relationship",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"CMMNDI",type:"cmmndi:CMMNDI"}]},{name:"DiscretionaryItem",superClass:["TableItem"],properties:[{name:"itemControl",type:"PlanItemControl",xml:{serialize:"property"}},{name:"definitionRef",type:"PlanItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"entryCriteria",type:"EntryCriterion",isMany:!0},{name:"exitCriteria",type:"ExitCriterion",isMany:!0}]},{name:"EventListener",superClass:["PlanItemDefinition"]},{name:"Expression",superClass:["CMMNElement"],properties:[{name:"language",type:"String",isAttr:!0},{name:"body",isBody:!0,type:"String"}]},{name:"HumanTask",superClass:["Task"],properties:[{name:"planningTable",type:"PlanningTable"},{name:"performerRef",type:"Role",isAttr:!0,isReference:!0}]},{name:"IfPart",superClass:["CMMNElement"],properties:[{name:"contextRef",type:"CaseFileItem",isAttr:!0,isReference:!0},{name:"condition",type:"Expression",xml:{serialize:"property"}}]},{name:"Import",properties:[{name:"location",isAttr:!0,type:"String"},{name:"namespace",type:"String",isAttr:!0},{name:"importType",isAttr:!0,type:"String"}]},{name:"Milestone",superClass:["PlanItemDefinition"]},{name:"On",isAbstract:!0,superClass:["CMMNElement"]},{name:"OnPart",isAbstract:!0,superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"Parameter",isAbstract:!0,superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ParameterMapping",properties:[{name:"sourceRef",type:"Parameter",isAttr:!0,isReference:!0},{name:"targetRef",type:"Parameter",isAttr:!0,isReference:!0},{name:"transformation",type:"Expression",xml:{serialize:"property"}}]},{name:"PlanFragment",superClass:["PlanItemDefinition"],properties:[{name:"planItems",type:"PlanItem",isMany:!0},{name:"sentries",type:"Sentry",isMany:!0}]},{name:"PlanItem",superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"definitionRef",type:"PlanItemDefinition",isAttr:!0,isReference:!0},{name:"itemControl",type:"PlanItemControl",xml:{serialize:"property"}},{name:"entryCriteria",type:"EntryCriterion",isMany:!0},{name:"exitCriteria",type:"ExitCriterion",isMany:!0}]},{name:"PlanItemControl",superClass:["CMMNElement"],properties:[{name:"repetitionRule",type:"RepetitionRule"},{name:"requiredRule",type:"RequiredRule"},{name:"manualActivationRule",type:"ManualActivationRule"}]},{name:"PlanItemDefinition",isAbstract:!0,superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"defaultControl",type:"PlanItemControl",xml:{serialize:"property"}}]},{name:"PlanItemOnPart",superClass:["OnPart"],properties:[{name:"standardEvent",type:"String"},{name:"sourceRef",
type:"PlanItem",isAttr:!0,isReference:!0},{name:"exitCriterionRef",type:"ExitCriterion",isAttr:!0,isReference:!0}]},{name:"PlanningTable",superClass:["TableItem"],properties:[{name:"tableItems",type:"TableItem",isMany:!0},{name:"applicabilityRules",type:"ApplicabilityRule",isMany:!0}]},{name:"Process",superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"implementationType",type:"String",isAttr:!0,default:"http://www.omg.org/spec/CMMN/ProcessType/Unspecified"},{name:"externalRef",type:"String",isAttr:!0},{name:"input",type:"ProcessParameter",isMany:!0,xml:{serialize:"property"}},{name:"output",type:"ProcessParameter",isMany:!0,xml:{serialize:"property"}}]},{name:"ProcessParameter",superClass:["Parameter"]},{name:"ProcessTask",superClass:["Task"],properties:[{name:"parameterMapping",type:"ParameterMapping",isMany:!0},{name:"processRefExpression",type:"Expression",xml:{serialize:"property"}},{name:"processRef",type:"String",isAttr:!0}]},{name:"Property",superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",type:"String",isAttr:!0,default:"http://www.omg.org/spec/CMMN/PropertyType/Unspecified"}]},{name:"RepetitionRule",superClass:["CMMNElement"],properties:[{name:"condition",type:"Expression",xml:{serialize:"property"}},{name:"name",isAttr:!0,type:"String"},{name:"contextRef",type:"CaseFileItem",isAttr:!0,isReference:!0}]},{name:"RequiredRule",superClass:["CMMNElement"],properties:[{name:"condition",type:"Expression",xml:{serialize:"property"}},{name:"name",isAttr:!0,type:"String"},{name:"contextRef",type:"CaseFileItem",isAttr:!0,isReference:!0}]},{name:"Role",superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"Sentry",superClass:["CMMNElement"],properties:[{name:"onParts",type:"OnPart",isMany:!0},{name:"ifPart",type:"IfPart"},{name:"name",isAttr:!0,type:"String"}]},{name:"Stage",superClass:["PlanFragment"],properties:[{name:"planningTable",type:"PlanningTable"},{name:"planItemDefinitions",type:"PlanItemDefinition",isMany:!0},{name:"autoComplete",isAttr:!0,type:"Boolean"},{name:"exitCriteria",type:"ExitCriterion",isMany:!0}]},{name:"TableItem",isAbstract:!0,superClass:["CMMNElement"],properties:[{name:"authorizedRoleRefs",type:"Role",isAttr:!0,isReference:!0,isMany:!0},{name:"applicabilityRuleRefs",type:"ApplicabilityRule",isAttr:!0,isReference:!0,isMany:!0}]},{name:"Task",superClass:["PlanItemDefinition"],properties:[{name:"input",type:"CaseParameter",isMany:!0,xml:{serialize:"property"}},{name:"output",type:"CaseParameter",isMany:!0,xml:{serialize:"property"}},{name:"isBlocking",isAttr:!0,default:!0,type:"Boolean"}]},{name:"TimerEventListener",superClass:["EventListener"],properties:[{name:"timerExpression",type:"Expression",xml:{serialize:"property"}},{name:"timerStart",type:"StartTrigger"}]},{name:"UserEventListener",superClass:["EventListener"],properties:[{name:"authorizedRoleRefs",type:"Role",isMany:!0,isAttr:!0}]},{name:"DateTime",superClass:[]},{name:"StartTrigger",isAbstract:!0,superClass:["CMMNElement"]},{name:"PlanItemStartTrigger",superClass:["StartTrigger"],properties:[{name:"standardEvent",type:"String",isAttr:!0},{name:"sourceRef",type:"PlanItem",isAttr:!0,isReference:!0}]},{name:"CaseFileItemStartTrigger",superClass:["StartTrigger"],properties:[{name:"standardEvent",type:"String",isAttr:!0},{name:"sourceRef",type:"CaseFileItem",isAttr:!0,isReference:!0}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition"}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",isAttr:!0,default:!1,type:"Boolean"}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Relationship",properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,type:"Element"},{name:"target",isMany:!0,type:"Element"}]},{name:"Documentation",superClass:["CMMNElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"DecisionTask",superClass:["Task"],properties:[{name:"mappings",type:"ParameterMapping",isMany:!0},{name:"decisionRef",type:"String",isAttr:!0},{name:"decisionRefExpression",type:"Expression",xml:{serialize:"property"}}]},{name:"Decision",superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"implementationType",type:"String",isAttr:!0,default:"http://www.omg.org/spec/CMMN/DecisionType/Unspecified"},{name:"input",type:"DecisionParameter",isMany:!0,xml:{serialize:"property"}},{name:"output",type:"DecisionParameter",isMany:!0,xml:{serialize:"property"}},{name:"externalRef",type:"String",isAttr:!0}]},{name:"DecisionParameter",superClass:["Parameter"]},{name:"Criterion",isAbstract:!0,superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sentryRef",type:"Sentry",isAttr:!0,isReference:!0}]},{name:"EntryCriterion",superClass:["Criterion"]},{name:"ExitCriterion",superClass:["Criterion"]}],emumerations:[{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"CaseFileItemTransition",literalValues:[{name:"addChild"},{name:"addReference"},{name:"create"},{name:"delete"},{name:"removeChild"},{name:"removeReference"},{name:"replace"},{name:"update"}]},{name:"MultiplicityEnum",literalValues:[{name:"ZeroOrOne"},{name:"ZeroOrMore"},{name:"ExactlyOne"},{name:"OneOrMore"},{name:"Unspecified"},{name:"Unknown"}]},{name:"PlanItemTransition",literalValues:[{name:"close"},{name:"complete"},{name:"create"},{name:"disable"},{name:"enable"},{name:"exit"},{name:"fault"},{name:"manualStart"},{name:"occur"},{name:"parentResume"},{name:"parentSuspend"},{name:"reactivate"},{name:"reenable"},{name:"resume"},{name:"start"},{name:"suspend"},{name:"terminate"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]}],associations:[],xml:{tagAlias:"lowerCase",typePrefix:"t"},prefix:"cmmn"}},{}],80:[function(e,t,n){t.exports={name:"CMMNDI",uri:"http://www.omg.org/spec/CMMN/20151109/CMMNDI",types:[{name:"CMMNDI",properties:[{name:"diagrams",type:"CMMNDiagram",isMany:!0},{name:"styles",type:"CMMNStyle",isMany:!0}]},{name:"CMMNDiagram",properties:[{name:"cmmnElementRef",isAttr:!0,type:"cmmn:CMMNElement",isReference:!0},{name:"Size",type:"dc:Dimension",xml:{serialize:"xsi:type"}},{name:"diagramElements",type:"CMMNDiagramElement",isMany:!0}],superClass:["di:Diagram"]},{name:"CMMNDiagramElement",superClass:["di:DiagramElement"]},{name:"CMMNShape",properties:[{name:"cmmnElementRef",isAttr:!0,isReference:!0,type:"cmmn:CMMNElement"},{name:"label",type:"CMMNLabel"},{name:"isCollapsed",isAttr:!0,type:"Boolean"},{name:"isPlanningTableCollapsed",isAttr:!0,type:"Boolean"}],superClass:["CMMNDiagramElement","di:Shape"]},{name:"CMMNEdge",properties:[{name:"label",type:"CMMNLabel"},{name:"cmmnElementRef",isAttr:!0,isReference:!0,type:"cmmn:CMMNElement"},{name:"sourceCMMNElementRef",isAttr:!0,isReference:!0,type:"cmmn:CMMNElement"},{name:"targetCMMNElementRef",isAttr:!0,isReference:!0,type:"cmmn:CMMNElement"},{name:"isStandardEventVisible",type:"Boolean",isAttr:!0}],superClass:["CMMNDiagramElement","di:Edge"]},{name:"CMMNLabel",superClass:["di:Shape"]},{name:"CMMNStyle",properties:[{name:"FillColor",type:"dc:Color",xml:{serialize:"xsi:type"}},{name:"StrokeColor",type:"dc:Color",xml:{serialize:"xsi:type"}},{name:"FontColor",type:"dc:Color",xml:{serialize:"xsi:type"}},{name:"fontFamily",type:"String",isAttr:!0},{name:"fontSize",type:"Real",isAttr:!0},{name:"fontItalic",type:"Boolean",isAttr:!0},{name:"fontBold",type:"Boolean",isAttr:!0},{name:"fontUnderline",type:"Boolean",isAttr:!0},{name:"fontStrikeThrough",type:"Boolean",isAttr:!0}],superClass:["di:Style"]}],associations:[],prefix:"cmmndi"}},{}],81:[function(e,t,n){t.exports={name:"DC",uri:"http://www.omg.org/spec/CMMN/20151109/DC",types:[{name:"rgb"},{name:"Real"},{name:"Color",properties:[{name:"red",type:"rgb",isAttr:!0},{name:"green",type:"rgb",isAttr:!0},{name:"blue",type:"rgb",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",isAttr:!0},{name:"y",type:"Real",isAttr:!0}]},{name:"Dimension",properties:[{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",isAttr:!0},{name:"y",type:"Real",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],prefix:"dc",associations:[]}},{}],82:[function(e,t,n){t.exports={name:"DI",uri:"http://www.omg.org/spec/CMMN/20151109/DI",types:[{name:"DiagramElement",isAbstract:!0,properties:[{name:"extension",type:"Extension"},{name:"style",type:"Style"},{name:"sharedStyle",type:"Style",isReference:!0,isAttr:!0},{name:"id",type:"String",isAttr:!0,isId:!0}]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"waypoint",isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"name",type:"String",isAttr:!0},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,default:300,type:"double"}]},{name:"Shape",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"extension",type:"Extension"},{name:"id",type:"String",isAttr:!0,isId:!0}]},{name:"Extension",properties:[{name:"values",type:"Element",isMany:!0}]}],associations:[],prefix:"di",xml:{tagAlias:"lowerCase"}}},{}],83:[function(e,t,n){function r(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}try{var i=e(87)}catch(t){var i=e(87)}var o=/\s+/,a=Object.prototype.toString;t.exports=function(e){return new r(e)},r.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array(),n=i(t,e);return~n||t.push(e),this.el.className=t.join(" "),this},r.prototype.remove=function(e){if("[object RegExp]"==a.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=i(t,e);return~n&&t.splice(n,1),this.el.className=t.join(" "),this},r.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},r.prototype.toggle=function(e,t){return this.list?("undefined"!=typeof t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this):("undefined"!=typeof t?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this)},r.prototype.array=function(){var e=this.el.getAttribute("class")||"",t=e.replace(/^\s+|\s+$/g,""),n=t.split(o);return""===n[0]&&n.shift(),n},r.prototype.has=r.prototype.contains=function(e){return this.list?this.list.contains(e):!!~i(this.array(),e)}},{87:87}],84:[function(e,t,n){var r=e(88);t.exports=function(e,t,n,i){for(e=n?{parentNode:e}:e,i=i||document;(e=e.parentNode)&&e!==document;){if(r(e,t))return e;if(e===i)return}}},{88:88}],85:[function(e,t,n){try{var r=e(84)}catch(t){var r=e(84)}try{var i=e(86)}catch(t){var i=e(86)}n.bind=function(e,t,n,o,a){return i.bind(e,n,function(n){var i=n.target||n.srcElement;n.delegateTarget=r(i,t,!0,e),n.delegateTarget&&o.call(e,n)},a)},n.unbind=function(e,t,n,r){i.unbind(e,t,n,r)}},{84:84,86:86}],86:[function(e,t,n){var r=window.addEventListener?"addEventListener":"attachEvent",i=window.removeEventListener?"removeEventListener":"detachEvent",o="addEventListener"!==r?"on":"";n.bind=function(e,t,n,i){return e[r](o+t,n,i||!1),n},n.unbind=function(e,t,n,r){return e[i](o+t,n,r||!1),n}},{}],87:[function(e,t,n){t.exports=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],88:[function(e,t,n){function r(e,t){if(!e||1!==e.nodeType)return!1;if(a)return a.call(e,t);for(var n=i.all(t,e.parentNode),r=0;r<n.length;++r)if(n[r]==e)return!0;return!1}try{var i=e(89)}catch(t){var i=e(89)}var o=Element.prototype,a=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector;t.exports=r},{89:89}],89:[function(e,t,n){function r(e,t){return t.querySelector(e)}n=t.exports=function(e,t){return t=t||document,r(e,t)},n.all=function(e,t){return t=t||document,t.querySelectorAll(e)},n.engine=function(e){if(!e.one)throw new Error(".one callback required");if(!e.all)throw new Error(".all callback required");return r=e.one,n.all=e.all,n}},{}],90:[function(e,t,n){t.exports={__depends__:[e(94)],__init__:["directEditing"],directEditing:["type",e(91)]}},{91:91,94:94}],91:[function(e,t,n){"use strict";function r(e,t){this._eventBus=e,this._providers=[],this._textbox=new a({container:t.getContainer(),keyHandler:i(this._handleKey,this)})}var i=e(279),o=e(270),a=e(92);r.$inject=["eventBus","canvas"],r.prototype.registerProvider=function(e){this._providers.push(e)},r.prototype.isActive=function(){return!!this._active},r.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())},r.prototype._fire=function(e){this._eventBus.fire("directEditing."+e,{active:this._active})},r.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null},r.prototype.complete=function(){var e=this._active;if(e){var t=this.getValue();t!==e.context.text&&e.provider.update(e.element,t,e.context.text),this._fire("complete"),this.close()}},r.prototype.getValue=function(){return this._textbox.getValue()},r.prototype._handleKey=function(e){e.stopPropagation();var t=e.keyCode||e.charCode;return 27===t?(e.preventDefault(),this.cancel()):13!==t||e.shiftKey?void 0:(e.preventDefault(),this.complete())},r.prototype.activate=function(e){this.isActive()&&this.cancel();var t,n=o(this._providers,function(n){return(t=n.activate(e))?n:null});return t&&(this._textbox.create(t.bounds,t.style,t.text),this._active={element:e,context:t,provider:n},this._fire("activate")),!!t},t.exports=r},{270:270,279:279,92:92}],92:[function(e,t,n){"use strict";function r(e){e.stopPropagation()}function i(e){this.container=e.container,this.textarea=document.createElement("textarea"),this.keyHandler=e.keyHandler||function(){}}var o=e(398),a=e(416),s=e(419);t.exports=i,i.prototype.create=function(e,t,n){var i=this.textarea,s=this.container;o(i.style,{width:e.width+"px",height:e.height+"px",left:e.x+"px",top:e.y+"px",position:"absolute",textAlign:"center",boxSizing:"border-box"},t||{}),i.value=n,i.title="Press SHIFT+Enter for line feed",a.bind(i,"keydown",this.keyHandler),a.bind(i,"mousedown",r),s.appendChild(i),setTimeout(function(){i.parent&&i.select(),i.focus()},100)},i.prototype.destroy=function(){var e=this.textarea;e.value="",a.unbind(e,"keydown",this.keyHandler),a.unbind(e,"mousedown",r),s(e)},i.prototype.getValue=function(){return this.textarea.value}},{398:398,416:416,419:419}],93:[function(e,t,n){"use strict";function r(e,t,n){function r(n,r,i){if(a(r)){var o,c,u;i?c=t.getGraphics(i):(o=r.delegateTarget||r.target,o&&(c=new s(o),i=t.get(c))),c&&i&&(u=e.fire(n,{element:i,gfx:c,originalEvent:r}),u===!1&&(r.stopPropagation(),r.preventDefault()))}}function c(e){var t=v[e];return t||(t=v[e]=function(t){r(e,t)}),t}function p(e,t,n){var i=y[e];if(!i)throw new Error("unmapped DOM event name <"+e+">");return r(i,t,n)}function d(e,t,n){var r=c(n);r.$delegate=o.bind(e,x,t,r)}function f(e,t,n){o.unbind(e,t,c(n).$delegate)}function h(e){i(y,function(t,n){d(e.node,n,t)})}function m(e){i(y,function(t,n){f(e.node,n,t)})}var g=n.cls("djs-hit",["no-fill","no-border"],{stroke:"white",strokeWidth:15}),v={},y={mouseover:"element.hover",mouseout:"element.out",click:"element.click",dblclick:"element.dblclick",mousedown:"element.mousedown",mouseup:"element.mouseup"},x="svg, .djs-element";e.on("canvas.destroy",function(e){m(e.svg)}),e.on("canvas.init",function(e){h(e.svg)}),e.on(["shape.added","connection.added"],function(e){var t,n=e.element,r=e.gfx;t=n.waypoints?u(n.waypoints):s.create("rect",{x:0,y:0,width:n.width,height:n.height}),t.attr(g).appendTo(r.node)}),e.on("shape.changed",function(e){var t=e.element,n=e.gfx,r=n.select(".djs-hit");r.attr({width:t.width,height:t.height})}),e.on("connection.changed",function(e){var t=e.element,n=e.gfx,r=n.select(".djs-hit");l(r,t.waypoints)}),this.fire=r,this.triggerMouseEvent=p,this.mouseHandler=c,this.registerEvent=d,this.unregisterEvent=f}var i=e(271),o=e(414),a=e(96).isPrimaryButton,s=e(99),c=e(98),u=c.createLine,l=c.updateLine;r.$inject=["eventBus","elementRegistry","styles"],t.exports=r},{271:271,414:414,96:96,98:98,99:99}],94:[function(e,t,n){t.exports={__init__:["interactionEvents"],interactionEvents:["type",e(93)]}},{93:93}],95:[function(e,t,n){"use strict";function r(e){return e&&e.preventDefault()}function i(e,t){e&&(e.stopPropagation&&e.stopPropagation(),t&&e.stopImmediatePropagation&&e.stopImmediatePropagation())}function o(e){return e.originalEvent||e.srcEvent}function a(e,t){c(e,t),s(e)}function s(e){r(e),r(o(e))}function c(e,t){i(e,t),i(o(e),t)}function u(e){return e.pointers&&e.pointers.length&&(e=e.pointers[0]),e.touches&&e.touches.length&&(e=e.touches[0]),e?{x:e.clientX,y:e.clientY}:null}t.exports.getOriginal=o,t.exports.stopEvent=a,t.exports.preventDefault=s,t.exports.stopPropagation=c,t.exports.toPoint=u},{}],96:[function(e,t,n){"use strict";function r(e){return!(i(e)||e).button}var i=e(95).getOriginal,o=e(97).isMac;t.exports.isPrimaryButton=r,t.exports.isMac=o,t.exports.hasPrimaryModifier=function(e){var t=i(e)||e;return!!r(e)&&(o()?t.metaKey:t.ctrlKey)},t.exports.hasSecondaryModifier=function(e){var t=i(e)||e;return r(e)&&t.shiftKey}},{95:95,97:97}],97:[function(e,t,n){"use strict";t.exports.isMac=function(){return/mac/i.test(navigator.platform)}},{}],98:[function(e,t,n){"use strict";function r(e){for(var t,n="",r=0;t=e[r];r++)n+=t.x+","+t.y+" ";return n}var i=e(99);t.exports.componentsToPath=function(e){return e.join(",").replace(/,?([A-z]),?/g,"$1")},t.exports.toSVGPoints=r,t.exports.createLine=function(e,t){return i.create("polyline",{points:r(e)}).attr(t||{})},t.exports.updateLine=function(e,t){return e.attr({points:r(t)})}},{99:99}],99:[function(e,t,n){"use strict";var r=t.exports=e(436);r.plugin(function(e,t){t.prototype.children=function(){for(var t=[],n=this.node.childNodes,r=0,i=n.length;r<i;r++)t[r]=new e(n[r]);return t}}),r.plugin(function(e,t,n,r){function i(e){return e.split(/\s+/)}function o(e){return e.join(" ")}function a(e){return i(e.attr("class")||"")}function s(e,t){e.attr("class",o(t))}t.prototype.addClass=function(e){var t,n,r=a(this),o=i(e);for(t=0,n;n=o[t];t++)r.indexOf(n)===-1&&r.push(n);return s(this,r),this},t.prototype.hasClass=function(e){if(!e)throw new Error("[snapsvg] syntax: hasClass(clsStr)");return a(this).indexOf(e)!==-1},t.prototype.removeClass=function(e){var t,n,r,o=a(this),c=i(e);for(t=0,n;n=c[t];t++)r=o.indexOf(n),r!==-1&&o.splice(r,1);return s(this,o),this}}),r.plugin(function(e,t,n,r){t.prototype.translate=function(t,n){var r=new e.Matrix;return r.translate(t,n),this.transform(r)}}),r.plugin(function(e){e.create=function(t,n){return e._.wrap(e._.$(t,n))}}),r.plugin(function(e,t,n,r){e.createSnapAt=function(t,n,r){var i=document.createElementNS("http://www.w3.org/2000/svg","svg");return i.setAttribute("width",t),i.setAttribute("height",n),r||(r=document.body),r.appendChild(i),new e(i)}})},{436:436}],100:[function(e,t,n){t.exports=e(101)},{101:101}],101:[function(e,t,n){"use strict";function r(e){function t(e){return i.indexOf(e)>=0}function n(e){i.push(e)}function r(e){t(e)||((e.__depends__||[]).forEach(r),t(e)||(n(e),(e.__init__||[]).forEach(function(e){o.push(e)})))}var i=[],o=[];e.forEach(r);var s=new a.Injector(i);return o.forEach(function(e){try{s["string"==typeof e?"get":"invoke"](e)}catch(e){throw console.error("Failed to instantiate component"),console.error(e.stack),e}}),s}function i(t){t=t||{};var n={config:["value",t]},i=e(110),o=[n,i].concat(t.modules||[]);return r(o)}function o(e,t){this.injector=t=t||i(e),this.get=t.get,this.invoke=t.invoke,this.get("eventBus").fire("diagram.init")}var a=e(250);t.exports=o,o.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},o.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")}},{110:110,250:250}],102:[function(e,t,n){"use strict";function r(e){return"object"==typeof e}function i(e){this._eventBus=e}function o(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}var a=e(271),s=e(390),c=e(389),u=e(392),l=1e3;i.$inject=["eventBus"],t.exports=i,i.prototype.on=function(e,t,n,i,p,d){if((s(t)||u(t))&&(d=p,p=i,i=n,n=t,t=null),s(n)&&(d=p,p=i,i=n,n=l),r(p)&&(d=p,p=!1),!s(i))throw new Error("handlerFn must be a function");c(e)||(e=[e]);var f=this._eventBus;a(e,function(e){var r=["commandStack",e,t].filter(function(e){return e}).join(".");f.on(r,n,p?o(i,d):i,d)})};var p=["canExecute","preExecute","preExecuted","execute","executed","postExecute","postExecuted","revert","reverted"];a(p,function(e){i.prototype[e]=function(t,n,r,i,o){(s(t)||u(t))&&(o=i,i=r,r=n,n=t,t=null),this.on(t,e,n,r,i,o)}})},{271:271,389:389,390:390,392:392}],103:[function(e,t,n){"use strict";function r(e,t){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[]},this._injector=t,this._eventBus=e,this._uid=1,e.on(["diagram.destroy","diagram.clear"],this.clear,this)}var i=e(264),o=e(389),a=e(398),s=e(108).Event;r.$inject=["eventBus","injector"],t.exports=r,r.prototype.execute=function(e,t){if(!e)throw new Error("command required");var n={command:e,context:t};this._pushAction(n),this._internalExecute(n),this._popAction(n)},r.prototype.canExecute=function(e,t){var n={command:e,context:t},r=this._getHandler(e),i=this._fire(e,"canExecute",n);if(void 0===i){if(!r)return!1;r.canExecute&&(i=r.canExecute(t))}return i},r.prototype.clear=function(){this._stack.length=0,this._stackIdx=-1,this._fire("changed")},r.prototype.undo=function(){var e,t=this._getUndoAction();if(t){for(this._pushAction(t);t&&(this._internalUndo(t),e=this._getUndoAction(),e&&e.id===t.id);)t=e;this._popAction()}},r.prototype.redo=function(){var e,t=this._getRedoAction();if(t){for(this._pushAction(t);t&&(this._internalExecute(t,!0),e=this._getRedoAction(),e&&e.id===t.id);)t=e;this._popAction()}},r.prototype.register=function(e,t){this._setHandler(e,t)},r.prototype.registerHandler=function(e,t){if(!e||!t)throw new Error("command and handlerCls must be defined");var n=this._injector.instantiate(t);this.register(e,n)},r.prototype.canUndo=function(){return!!this._getUndoAction()},r.prototype.canRedo=function(){return!!this._getRedoAction()},r.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]},r.prototype._getUndoAction=function(){return this._stack[this._stackIdx]},r.prototype._internalUndo=function(e){var t=this,n=e.command,r=e.context,i=this._getHandler(n);this._atomicDo(function(){t._fire(n,"revert",e),i.revert&&t._markDirty(i.revert(r)),t._revertedAction(e),t._fire(n,"reverted",e)})},r.prototype._fire=function(e,t,n){arguments.length<3&&(n=t,t=null);var r,i,o,c=t?[e+"."+t,t]:[e];for(n=a(new s,n),r=0;(i=c[r])&&(o=this._eventBus.fire("commandStack."+i,n),!n.cancelBubble);r++);return o},r.prototype._createId=function(){return this._uid++},r.prototype._atomicDo=function(e){var t=this._currentExecution;t.atomic=!0;try{e()}finally{t.atomic=!1}},r.prototype._internalExecute=function(e,t){var n=this,r=e.command,i=e.context,o=this._getHandler(r);if(!o)throw new Error("no command handler registered for <"+r+">");this._pushAction(e),t||(this._fire(r,"preExecute",e),o.preExecute&&o.preExecute(i),this._fire(r,"preExecuted",e)),this._atomicDo(function(){n._fire(r,"execute",e),o.execute&&n._markDirty(o.execute(i)),n._executedAction(e,t),n._fire(r,"executed",e)}),t||(this._fire(r,"postExecute",e),o.postExecute&&o.postExecute(i),this._fire(r,"postExecuted",e)),this._popAction(e)},r.prototype._pushAction=function(e){var t=this._currentExecution,n=t.actions,r=n[0];if(t.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+e.command+")");e.id||(e.id=r&&r.id||this._createId()),n.push(e)},r.prototype._popAction=function(){var e=this._currentExecution,t=e.actions,n=e.dirty;t.pop(),t.length||(this._eventBus.fire("elements.changed",{elements:i(n)}),n.length=0,this._fire("changed"))},r.prototype._markDirty=function(e){var t=this._currentExecution;e&&(e=o(e)?e:[e],t.dirty=t.dirty.concat(e))},r.prototype._executedAction=function(e,t){var n=++this._stackIdx;t||this._stack.splice(n,this._stack.length,e)},r.prototype._revertedAction=function(e){this._stackIdx--},r.prototype._getHandler=function(e){return this._handlerMap[e]},r.prototype._setHandler=function(e,t){if(!e||!t)throw new Error("command and handler required");if(this._handlerMap[e])throw new Error("overriding handler for command <"+e+">");this._handlerMap[e]=t}},{108:108,264:264,389:389,398:398}],104:[function(e,t,n){t.exports={commandStack:["type",e(103)]}},{103:103}],105:[function(e,t,n){"use strict";function r(e,t){return Math.round(e*t)/t}function i(e){return u(e)?e+"px":e}function o(e){e=l({},{width:"100%",height:"100%"},e);var t=e.container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container"),l(n.style,{position:"relative",overflow:"hidden",width:i(e.width),height:i(e.height)}),t.appendChild(n),n}function a(e,t){return e.group().attr({class:t})}function s(e,t,n,r){this._eventBus=t,this._elementRegistry=r,this._graphicsFactory=n,this._init(e||{})}function c(e,t){var n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)}var u=e(392),l=e(398),p=e(271),d=e(268),f=e(280),h=e(232),m=e(235),g=e(248),v="base",y={shape:["x","y","width","height"],connection:["waypoints"]};s.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],t.exports=s,s.prototype._init=function(e){var t=this._eventBus,n=this._container=o(e),r=this._svg=g.createSnapAt("100%","100%",n),i=this._viewport=a(r,"viewport");this._layers={},e.deferUpdate!==!1&&(this._viewboxChanged=f(this._viewboxChanged,300)),t.on("diagram.init",function(){t.fire("canvas.init",{svg:r,viewport:i}),this.resized()},this),t.on("diagram.destroy",500,this._destroy,this),t.on("diagram.clear",500,this._clear,this)},s.prototype._destroy=function(e){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});var t=this._container.parentNode;t&&t.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._rootElement,delete this._viewport},s.prototype._clear=function(){var e=this,t=this._elementRegistry.getAll();t.forEach(function(t){var n=m.getType(t);"root"===n?e.setRootElement(null,!0):e._removeElement(t,n)}),delete this._cachedViewbox},s.prototype.getDefaultLayer=function(){return this.getLayer(v)},s.prototype.getLayer=function(e){if(!e)throw new Error("must specify a name");var t=this._layers[e];return t||(t=this._layers[e]=a(this._viewport,"layer-"+e)),t},s.prototype.getContainer=function(){return this._container},s.prototype._updateMarker=function(e,t,n){var r;e.id||(e=this._elementRegistry.get(e)),r=this._elementRegistry._elements[e.id],r&&(p([r.gfx,r.secondaryGfx],function(e){e&&e[n?"addClass":"removeClass"](t)}),this._eventBus.fire("element.marker.update",{element:e,gfx:r.gfx,marker:t,add:!!n}))},s.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)},s.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)},s.prototype.hasMarker=function(e,t){e.id||(e=this._elementRegistry.get(e));var n=this.getGraphics(e);return n&&n.hasClass(t)},s.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)},s.prototype.getRootElement=function(){return this._rootElement||this.setRootElement({id:"__implicitroot",children:[]}),this._rootElement},s.prototype.setRootElement=function(e,t){e&&this._ensureValid("root",e);var n=this._rootElement,r=this._elementRegistry,i=this._eventBus;if(n){if(!t)throw new Error("rootElement already set, need to specify override");i.fire("root.remove",{element:n}),i.fire("root.removed",{element:n}),r.remove(n)}if(e){var o=this.getDefaultLayer();i.fire("root.add",{element:e}),r.add(e,o,this._svg),i.fire("root.added",{element:e,gfx:o})}return this._rootElement=e,e},s.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element with id "+t.id+" already exists");var n=y[e],r=d(n,function(e){return"undefined"!=typeof t[e]});if(!r)throw new Error("must supply { "+n.join(", ")+" } with "+e)},s.prototype._setParent=function(e,t,n){h.add(t.children,e,n),e.parent=t},s.prototype._addElement=function(e,t,n,r){n=n||this.getRootElement();var i=this._eventBus,o=this._graphicsFactory;this._ensureValid(e,t),i.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,r);var a=o.create(e,t);return this._elementRegistry.add(t,a),o.update(e,t,a),i.fire(e+".added",{element:t,gfx:a}),t},s.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)},s.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)},s.prototype._removeElement=function(e,t){var n=this._elementRegistry,r=this._graphicsFactory,i=this._eventBus;if(e=n.get(e.id||e))return i.fire(t+".remove",{element:e}),r.remove(e),h.remove(e.parent&&e.parent.children,e),e.parent=null,i.fire(t+".removed",{element:e}),n.remove(e),e},s.prototype.removeShape=function(e){return this._removeElement(e,"shape")},s.prototype.removeConnection=function(e){return this._removeElement(e,"connection")},s.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)},s.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()},s.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},s.prototype.viewbox=function(e){if(void 0===e&&this._cachedViewbox)return this._cachedViewbox;var t,n,i,o,a,s=this._viewport,c=this.getSize();return e?(this._changeViewbox(function(){i=Math.min(c.width/e.width,c.height/e.height),n=(new g.Matrix).scale(i).translate(-e.x,-e.y),s.transform(n)}),e):(t=this.getDefaultLayer().getBBox(!0),n=s.transform().localMatrix,i=r(n.a,1e3),o=r(-n.e||0,1e3),a=r(-n.f||0,1e3),e=this._cachedViewbox={x:o?o/i:0,y:a?a/i:0,width:c.width/i,height:c.height/i,scale:i,inner:{width:t.width,height:t.height,x:t.x,y:t.y},outer:c})},s.prototype.scroll=function(e){var t=this._viewport.node,n=t.getCTM();return e&&this._changeViewbox(function(){e=l({dx:0,dy:0},e||{}),n=this._svg.node.createSVGMatrix().translate(e.dx,e.dy).multiply(n),c(t,n)}),{x:n.e,y:n.f}},s.prototype.zoom=function(e,t){if(!e)return this.viewbox(e).scale;if("fit-viewport"===e)return this._fitViewport(t);var n,i;return this._changeViewbox(function(){"object"!=typeof t&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),i=this._setZoom(e,t)}),r(i.a,1e3)},s.prototype._fitViewport=function(e){var t,n,r=this.viewbox(),i=r.outer,o=r.inner;return o.x>=0&&o.y>=0&&o.x+o.width<=i.width&&o.y+o.height<=i.height&&!e?n={x:0,y:0,width:Math.max(o.width+o.x,i.width),height:Math.max(o.height+o.y,i.height)}:(t=Math.min(1,i.width/o.width,i.height/o.height),n={x:o.x+(e?o.width/2-i.width/t/2:0),y:o.y+(e?o.height/2-i.height/t/2:0),width:i.width/t,height:i.height/t}),this.viewbox(n),this.viewbox(!1).scale},s.prototype._setZoom=function(e,t){var n,r,i,o,a,s=this._svg.node,u=this._viewport.node,p=s.createSVGMatrix(),d=s.createSVGPoint();i=u.getCTM();var f=i.a;return t?(n=l(d,t),r=n.matrixTransform(i.inverse()),
o=p.translate(r.x,r.y).scale(1/f*e).translate(-r.x,-r.y),a=i.multiply(o)):a=p.scale(e),c(this._viewport.node,a),a},s.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},s.prototype.getAbsoluteBBox=function(e){var t,n=this.viewbox();if(e.waypoints){var r=this.getGraphics(e),i=r.getBBox(!0);t=r.getBBox(),t.x-=i.x,t.y-=i.y,t.width+=2*i.x,t.height+=2*i.y}else t=e;var o=t.x*n.scale-n.x*n.scale,a=t.y*n.scale-n.y*n.scale,s=t.width*n.scale,c=t.height*n.scale;return{x:o,y:a,width:s,height:c}},s.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")}},{232:232,235:235,248:248,268:268,271:271,280:280,392:392,398:398}],106:[function(e,t,n){"use strict";function r(){this._uid=12}var i=e(224),o=e(398);t.exports=r,r.prototype.createRoot=function(e){return this.create("root",e)},r.prototype.createLabel=function(e){return this.create("label",e)},r.prototype.createShape=function(e){return this.create("shape",e)},r.prototype.createConnection=function(e){return this.create("connection",e)},r.prototype.create=function(e,t){return t=o({},t||{}),t.id||(t.id=e+"_"+this._uid++),i.create(e,t)}},{224:224,398:398}],107:[function(e,t,n){"use strict";function r(){this._elements={}}var i="data-element-id";t.exports=r,r.prototype.add=function(e,t,n){var r=e.id;this._validateId(r),t.attr(i,r),n&&n.attr(i,r),this._elements[r]={element:e,gfx:t,secondaryGfx:n}},r.prototype.remove=function(e){var t=this._elements,n=e.id||e,r=n&&t[n];r&&(r.gfx.attr(i,""),r.secondaryGfx&&r.secondaryGfx.attr(i,""),delete t[n])},r.prototype.updateId=function(e,t){this._validateId(t),"string"==typeof e&&(e=this.get(e));var n=this.getGraphics(e),r=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,r)},r.prototype.get=function(e){var t;t="string"==typeof e?e:e&&e.attr(i);var n=this._elements[t];return n&&n.element},r.prototype.filter=function(e){var t=[];return this.forEach(function(n,r){e(n,r)&&t.push(n)}),t},r.prototype.getAll=function(){return this.filter(function(e){return e})},r.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach(function(n){var r=t[n],i=r.element,o=r.gfx;return e(i,o)})},r.prototype.getGraphics=function(e,t){var n=e.id||e,r=this._elements[n];return r&&(t?r.secondaryGfx:r.gfx)},r.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")}},{}],108:[function(e,t,n){"use strict";function r(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}function i(){}function o(e,t){return e.apply(null,t)}var a=e(390),s=e(389),c=e(392),u=e(279),l=e(398),p="__fn",d=1e3,f=Array.prototype.slice;t.exports=r,r.prototype.on=function(e,t,n,r){if(e=s(e)?e:[e],a(t)&&(r=n,n=t,t=d),!c(t))throw new Error("priority must be a number");var i=n;r&&(i=u(n,r),i[p]=n[p]||n);var o=this,l={priority:t,callback:i};e.forEach(function(e){o._addListener(e,l)})},r.prototype.once=function(e,t,n,r){function i(){return o.off(e,i),n.apply(r,arguments)}var o=this;if(a(t)&&(r=n,n=t,t=d),!c(t))throw new Error("priority must be a number");i[p]=n,this.on(e,t,i)},r.prototype.off=function(e,t){var n,r,i,o=this._getListeners(e);if(t)for(i=o.length-1;n=o[i];i--)r=n.callback,r!==t&&r[p]!==t||o.splice(i,1);else o.length=0},r.prototype.fire=function(e,t){var n,r,o,a;if(a=f.call(arguments),"object"==typeof e&&(n=e,e=n.type),!e)throw new Error("no event type specified");if(r=this._listeners[e]){t instanceof i?n=t:(n=new i,n.init(t)),a[0]=n;var s=n.type;e!==s&&(n.type=e);try{o=this._invokeListeners(n,a,r)}finally{e!==s&&(n.type=s)}return void 0===o&&n.defaultPrevented&&(o=!1),o}},r.prototype.handleError=function(e){return this.fire("error",{error:e})===!1},r.prototype._destroy=function(){this._listeners={}},r.prototype._invokeListeners=function(e,t,n){var r,i,o;for(r=0;(i=n[r])&&!e.cancelBubble;r++)o=this._invokeListener(e,t,i);return o},r.prototype._invokeListener=function(e,t,n){var r;try{r=o(n.callback,t),void 0!==r&&(e.returnValue=r,e.stopPropagation()),r===!1&&e.preventDefault()}catch(e){if(!this.handleError(e))throw console.error("unhandled error in event listener"),console.error(e.stack),e}return r},r.prototype._addListener=function(e,t){var n,r,i=this._getListeners(e);for(r=0;n=i[r];r++)if(n.priority<t.priority)return void i.splice(r,0,t);i.push(t)},r.prototype._getListeners=function(e){var t=this._listeners[e];return t||(this._listeners[e]=t=[]),t},t.exports.Event=i,i.prototype.stopPropagation=function(){this.cancelBubble=!0},i.prototype.preventDefault=function(){this.defaultPrevented=!0},i.prototype.init=function(e){l(this,e||{})}},{279:279,389:389,390:390,392:392,398:398}],109:[function(e,t,n){"use strict";function r(e,t){this._eventBus=e,this._elementRegistry=t}var i=e(271),o=e(274),a=e(238),s=e(412);r.$inject=["eventBus","elementRegistry"],t.exports=r,r.prototype._getChildren=function(e){var t,n=this._elementRegistry.getGraphics(e);return e.parent?(t=a.getChildren(n),t||(t=n.parent().group().attr("class","djs-children"))):t=n,t},r.prototype._clear=function(e){var t=a.getVisual(e);return s(t.node),t},r.prototype._createContainer=function(e,t){var n=t.group().attr("class","djs-group"),r=n.group().attr("class","djs-element djs-"+e);return r.group().attr("class","djs-visual"),r},r.prototype.create=function(e,t){var n=this._getChildren(t.parent);return this._createContainer(e,n)},r.prototype.updateContainments=function(e){var t,n=this,r=this._elementRegistry;t=o(e,function(e,t){return t.parent&&(e[t.parent.id]=t.parent),e},{}),i(t,function(e){var t=n._getChildren(e),o=e.children;o&&i(o.slice().reverse(),function(e){var n=r.getGraphics(e);n.parent().prependTo(t)})})},r.prototype.drawShape=function(e,t){var n=this._eventBus;return n.fire("render.shape",{gfx:e,element:t})},r.prototype.getShapePath=function(e){var t=this._eventBus;return t.fire("render.getShapePath",e)},r.prototype.drawConnection=function(e,t){var n=this._eventBus;return n.fire("render.connection",{gfx:e,element:t})},r.prototype.getConnectionPath=function(e){var t=this._eventBus;return t.fire("render.getConnectionPath",e)},r.prototype.update=function(e,t,n){if(t.parent){var r=this._clear(n);if("shape"===e)this.drawShape(r,t),n.translate(t.x,t.y);else{if("connection"!==e)throw new Error("unknown type: "+e);this.drawConnection(r,t)}n.attr("display",t.hidden?"none":"block")}},r.prototype.remove=function(e){var t=this._elementRegistry.getGraphics(e);t.parent().remove()}},{238:238,271:271,274:274,412:412}],110:[function(e,t,n){t.exports={__depends__:[e(114)],__init__:["canvas"],canvas:["type",e(105)],elementRegistry:["type",e(107)],elementFactory:["type",e(106)],eventBus:["type",e(108)],graphicsFactory:["type",e(109)]}},{105:105,106:106,107:107,108:108,109:109,114:114}],111:[function(e,t,n){"use strict";function r(e,t){var n=this;t=t||i,e.on(["render.shape","render.connection"],t,function(e,t){var r=e.type,i=t.element,o=t.gfx;if(n.canRender(i))return"render.shape"===r?n.drawShape(o,i):n.drawConnection(o,i)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(e,t){if(n.canRender(t))return"render.getShapePath"===e.type?n.getShapePath(t):n.getConnectionPath(t)})}var i=1e3;r.prototype.canRender=function(){},r.prototype.drawShape=function(){},r.prototype.drawConnection=function(){},r.prototype.getShapePath=function(){},r.prototype.getConnectionPath=function(){},t.exports=r},{}],112:[function(e,t,n){"use strict";function r(e,t){o.call(this,e,u),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2})}var i=e(257),o=e(111),a=e(246),s=a.componentsToPath,c=a.createLine,u=1;i(r,o),r.prototype.canRender=function(){return!0},r.prototype.drawShape=function(e,t){return e.rect(0,0,t.width||0,t.height||0).attr(this.SHAPE_STYLE)},r.prototype.drawConnection=function(e,t){return c(t.waypoints,this.CONNECTION_STYLE).appendTo(e)},r.prototype.getShapePath=function(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=[["M",t,n],["l",r,0],["l",0,i],["l",-r,0],["z"]];return s(o)},r.prototype.getConnectionPath=function(e){var t,n,r=e.waypoints,i=[];for(t=0;n=r[t];t++)n=n.original||n,i.push([0===t?"M":"L",n.x,n.y]);return s(i)},r.$inject=["eventBus","styles"],t.exports=r},{111:111,246:246,257:257}],113:[function(e,t,n){"use strict";function r(){var e={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},t=this;this.cls=function(e,t,n){var r=this.style(t,n);return o(r,{class:e})},this.style=function(t,n){i(t)||n||(n=t,t=[]);var r=a(t,function(t,n){return o(t,e[n]||{})},{});return n?o(r,n):r},this.computeStyle=function(e,n,r){return i(n)||(r=n,n=[]),t.style(n||[],o({},r,e||{}))}}var i=e(389),o=e(398),a=e(274);t.exports=r},{274:274,389:389,398:398}],114:[function(e,t,n){t.exports={__init__:["defaultRenderer"],defaultRenderer:["type",e(112)],styles:["type",e(113)]}},{112:112,113:113}],115:[function(e,t,n){"use strict";function r(e,t,n,r){y.call(this,e),e.on("shape.move.start",v,function(e){var t=e.context,n=t.shapes,r=t.validatedShapes;t.shapes=o(n),t.validatedShapes=a(r)}),this.postExecuted(["elements.move"],function(e){var n=e.context,r=n.delta,o=n.newParent,a=n.closure,c=a.enclosedElements,u=i(c);s(u,function(e){c[e.id]||t.moveShape(e,r,o)})}),this.postExecuted(["elements.move"],function(e){var n,r=e.context,i=r.shapes,o=r.newHost;i.length>1||(n=o?i:l(i,function(e){return!!e.host}),s(n,function(e){t.updateAttachment(e,o)}))}),this.postExecuted(["elements.move"],function(e){var n=e.context.shapes;s(n,function(e){s(e.attachers,function(e){s(e.outgoing.slice(),function(e){var n=r.allowed("connection.reconnectStart",{connection:e,source:e.source,target:e.target});n||t.removeConnection(e)}),s(e.incoming.slice(),function(e){var n=r.allowed("connection.reconnectEnd",{connection:e,source:e.source,target:e.target});n||t.removeConnection(e)})})})}),this.postExecute(["shape.create"],function(e){var n=e.context,r=n.shape,i=n.host;i&&t.updateAttachment(r,i)}),this.postExecute(["shape.replace"],function(e){var n=e.context,i=n.oldShape,o=n.newShape;f(i.attachers,function(e){var n=r.allowed("elements.move",{target:o,shapes:[e]});"attach"===n?t.updateAttachment(e,o):t.removeShape(e)}),o.attachers.length&&s(o.attachers,function(e){var n=m(e,i,o);t.moveShape(e,n,e.parent)})}),this.postExecute(["shape.resize"],function(e){var n=e.context,r=n.shape,i=n.oldBounds,o=n.newBounds,a=r.attachers;a.length&&s(a,function(e){var n=m(e,i,o);t.moveShape(e,n,e.parent),e.label&&t.moveShape(e.label,n,e.label.parent)})}),this.preExecute(["shape.delete"],function(e){var n=e.context.shape;f(n.attachers,function(e){t.removeShape(e)}),n.host&&t.updateAttachment(n,null)}),e.on("spaceTool.move",function(e){var t=e.context.movingShapes,n=l(t,function(e){return e.host&&e.host.id});s(n,function(e){h.remove(t,e),e.label&&h.remove(t,e.label)})})}function i(e){return c(d(e,function(e){return e.attachers||[]}))}function o(e){var t=i(e);return u(e,t)}function a(e){var t=p(e,"id");return l(e,function(e){for(;e;){if(e.host&&t[e.host.id])return!1;e=e.parent}return!0})}var s=e(271),c=e(259),u=e(262),l=e(269),p=e(272),d=e(273),f=e(245).saveClear,h=e(232),m=e(230).getNewAttachShapeDelta,g=e(257),v=1500,y=e(102);g(r,y),r.$inject=["eventBus","modeling","moveVisuals","rules"],t.exports=r},{102:102,230:230,232:232,245:245,257:257,259:259,262:262,269:269,271:271,272:272,273:273}],116:[function(e,t,n){t.exports={__depends__:[e(185),e(154)],__init__:["attachSupport"],attachSupport:["type",e(115)]}},{115:115,154:154,185:185}],117:[function(e,t,n){"use strict";function r(e,t,n,r){f.call(this,e),this._elementRegistry=t,this._modeling=n,this._rules=r;var i=this;this.postExecuted(["shape.create"],function(e){var t=e.context,n=t.hints,r=t.shape,o=t.parent||t.newParent;n&&n.root===!1||i._expand([r],o)}),this.postExecuted(["elements.move"],function(e){var t=e.context,n=p(l(t.closure.topLevel)),r=d(n,function(e){return e.parent.id});u(r,function(e,t){i._expand(e,t)})})}var i=e(257),o=e(235).getBBox,a=e(222).asTRBL,s=e(222).asBounds,c=e(398),u=e(271),l=e(406),p=e(259),d=e(272),f=e(102);r.$inject=["eventBus","elementRegistry","modeling","rules"],i(r,f),t.exports=r,r.prototype._getOptimalBounds=function(e,t){var n=this.getOffset(t),r=this.getPadding(t),i=a(o(e)),u=a(t),l={};return i.top-u.top<r.top&&(l.top=i.top-n.top),i.left-u.left<r.left&&(l.left=i.left-n.left),u.right-i.right<r.right&&(l.right=i.right+n.right),u.bottom-i.bottom<r.bottom&&(l.bottom=i.bottom+n.bottom),s(c({},u,l))},r.prototype._expand=function(e,t){"string"==typeof t&&(t=this._elementRegistry.get(t));var n=this._rules.allowed("element.autoResize",{elements:e,target:t});if(n){var r=this._getOptimalBounds(e,t);this.resize(t,r);var i=t.parent;i&&this._expand([t],i)}},r.prototype.getOffset=function(e){return{top:60,bottom:60,left:100,right:100}},r.prototype.getPadding=function(e){return{top:2,bottom:2,left:15,right:15}},r.prototype.resize=function(e,t){this._modeling.resizeShape(e,t)}},{102:102,222:222,235:235,257:257,259:259,271:271,272:272,398:398,406:406}],118:[function(e,t,n){function r(e){i.call(this,e);var t=this;this.addRule("element.autoResize",function(e){return t.canResize(e.elements,e.target)})}var i=e(202),o=e(257);r.$inject=["eventBus"],o(r,i),t.exports=r,r.prototype.canResize=function(e,t){return!1}},{202:202,257:257}],119:[function(e,t,n){"use strict";t.exports={__init__:["autoResize"],autoResize:["type",e(117)]}},{117:117}],120:[function(e,t,n){"use strict";function r(e,t,n,r){this._canvas=n,this._mouseTracking=r,this._opts=o({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},e);var i=this;t.on("drag.move",function(e){var t=i._toBorderPoint(e);i.startScroll(t)}),t.on(["drag.cleanup"],function(){i.stopScroll()})}function i(e,t,n){return t<e&&e<n}var o=e(398),a=e(236);r.$inject=["config.autoScroll","eventBus","canvas","mouseTracking"],t.exports=r,r.prototype.startScroll=function(e){var t=this._canvas,n=this._opts,r=this,o=t.getContainer().getBoundingClientRect(),a=[e.x,e.y,o.width-e.x,o.height-e.y];this.stopScroll();for(var s=0,c=0,u=0;u<4;u++)i(a[u],n.scrollThresholdOut[u],n.scrollThresholdIn[u])&&(0===u?s=n.scrollStep:1==u?c=n.scrollStep:2==u?s=-n.scrollStep:3==u&&(c=-n.scrollStep));0===s&&0===c||(t.scroll({dx:s,dy:c}),this._scrolling=setTimeout(function(){r.startScroll(e)},n.scrollRepeatTimeout))},r.prototype.stopScroll=function(){clearTimeout(this._scrolling)},r.prototype.setOptions=function(e){this._opts=o({},this._opts,e)},r.prototype._toBorderPoint=function(e){var t=this._canvas._container.getBoundingClientRect(),n=a.toPoint(e.originalEvent);return{x:n.x-t.left,y:n.y-t.top}}},{236:236,398:398}],121:[function(e,t,n){t.exports={__depends__:[e(142),e(182)],__init__:["autoScroll"],autoScroll:["type",e(120)]}},{120:120,142:142,182:182}],122:[function(e,t,n){"use strict";function r(e,t,n,r,h,m,g){function v(e){h.update("connection",e.connection,e.connectionGfx)}function y(e){e=e.slice();for(var t,n,r,o=0;e[o];)t=e[o],n=e[o-1],r=e[o+1],0===i.pointDistance(t,r)||i.pointsOnLine(n,r,t)?e.splice(o,1):o++;return e}var x=e.get("connectionDocking",!1);this.start=function(e,t,i,o){var a,s,c=t.waypoints,u=n.getGraphics(t);a=o||0!==i?o||i!==c.length-1?l:d:p,s={connection:t,bendpointIndex:i,insert:o,type:a},r.init(e,"bendpoint.move",{data:{connection:t,connectionGfx:u,context:s}})},t.on("bendpoint.move.start",function(e){var t=e.context,r=t.connection,i=r.waypoints,a=i.slice(),s=t.insert,c=t.bendpointIndex;t.originalWaypoints=i,s&&a.splice(c,0,null),r.waypoints=a,t.draggerGfx=o.addBendpoint(n.getLayer("overlays")),t.draggerGfx.addClass("djs-dragging"),n.addMarker(r,u)}),t.on("bendpoint.move.hover",function(e){e.context.hover=e.hover,n.addMarker(e.hover,c)}),t.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(e){var t=e.context.hover;t&&(n.removeMarker(t,c),n.removeMarker(t,e.context.target?a:s))}),t.on("bendpoint.move.move",function(e){var t,r,i=e.context,o=i.type,c=e.connection;c.waypoints[i.bendpointIndex]={x:e.x,y:e.y},x&&(i.hover&&(o===p&&(t=i.hover),o===d&&(r=i.hover)),c.waypoints=x.getCroppedWaypoints(c,t,r));var u=i.allowed=m.allowed(i.type,i);u?i.hover&&(n.removeMarker(i.hover,s),n.addMarker(i.hover,a),i.target=i.hover):u===!1&&i.hover&&(n.removeMarker(i.hover,a),n.addMarker(i.hover,s),i.target=null),i.draggerGfx.translate(e.x,e.y),v(e)}),t.on(["bendpoint.move.end","bendpoint.move.cancel"],function(e){var t=e.context,r=t.hover,i=t.connection;t.draggerGfx.remove(),t.newWaypoints=i.waypoints.slice(),i.waypoints=t.originalWaypoints,n.removeMarker(i,u),r&&(n.removeMarker(r,a),n.removeMarker(r,s))}),t.on("bendpoint.move.end",function(e){var t,n=e.context,r=n.newWaypoints,i=n.bendpointIndex,o=r[i],a=n.allowed;if(o.x=f(o.x),o.y=f(o.y),a&&n.type===p)g.reconnectStart(n.connection,n.target,o);else if(a&&n.type===d)g.reconnectEnd(n.connection,n.target,o);else{if(a===!1||n.type!==l)return v(e),!1;t={bendpointMove:{insert:e.context.insert,bendpointIndex:i}},g.updateWaypoints(n.connection,y(r),t)}}),t.on("bendpoint.move.cancel",function(e){v(e)})}var i=e(237),o=e(124),a="connect-ok",s="connect-not-ok",c="connect-hover",u="djs-updating",l="connection.updateWaypoints",p="connection.reconnectStart",d="connection.reconnectEnd",f=Math.round;r.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","rules","modeling"],t.exports=r},{124:124,237:237}],123:[function(e,t,n){"use strict";function r(e){function t(e,t){return a.snapTo(e,t)}function n(e){if(e.width)return{x:s(e.width/2+e.x),y:s(e.height/2+e.y)}}function r(e){var t=e.snapPoints,r=e.connection,i=r.waypoints,a=e.segmentStart,s=e.segmentStartIndex,c=e.segmentEnd,u=e.segmentEndIndex,l=e.axis;if(t)return t;var p=[i[s-1],a,c,i[u+1]];return s<2&&p.unshift(n(r.source)),u>i.length-3&&p.unshift(n(r.target)),e.snapPoints=t={horizontal:[],vertical:[]},o(p,function(e){e&&(e=e.original||e,"y"===l&&t.horizontal.push(e.y),"x"===l&&t.vertical.push(e.x))}),t}function c(e){var t=e.snapPoints,n=e.connection.waypoints,r=e.bendpointIndex;if(t)return t;var i=[n[r-1],n[r+1]];return e.snapPoints=t={horizontal:[],vertical:[]},o(i,function(e){e&&(e=e.original||e,t.horizontal.push(e.y),t.vertical.push(e.x))}),t}e.on("connectionSegment.move.move",1500,function(e){var n,o,a=e.context,s=r(a),c=e.x,u=e.y;if(s){n=t(s.vertical,c),o=t(s.horizontal,u);var l=c-n,p=u-o;i(e,{dx:e.dx-l,dy:e.dy-p,x:n,y:o})}}),e.on("bendpoint.move.move",1500,function(e){var r,o,a=e.context,s=c(a),u=a.target,l=u&&n(u),p=e.x,d=e.y;if(s){r=t(l?s.vertical.concat([l.x]):s.vertical,p),o=t(l?s.horizontal.concat([l.y]):s.horizontal,d);var f=p-r,h=d-o;i(e,{dx:e.dx-f,dy:e.dy-h,x:e.x-f,y:e.y-h})}})}var i=e(398),o=e(271),a=e(248),s=Math.round;r.$inject=["eventBus"],t.exports=r},{248:248,271:271,398:398}],124:[function(e,t,n){"use strict";function r(e,t,n){var r=e.group(),i=14,o=3,s=6,c=i+s,u=o+s;r.rect(-i/2,-o/2,i,o).addClass("djs-visual"),r.rect(-c/2,-u/2,c,u).addClass("djs-hit");var l=(new a.Matrix).rotate("h"===n?90:0,0,0);return r.transform(l),r}var i=e(236),o=e(237),a=e(248),s=t.exports.BENDPOINT_CLS="djs-bendpoint",c=t.exports.SEGMENT_DRAGGER_CLS="djs-segment-dragger";t.exports.toCanvasCoordinates=function(e,t){var n,r=i.toPoint(t),o=e._container.getBoundingClientRect();n={x:o.left,y:o.top};var a=e.viewbox();return{x:a.x+(r.x-n.x)/a.scale,y:a.y+(r.y-n.y)/a.scale}},t.exports.addBendpoint=function(e,t){var n=e.group().addClass(s);return n.circle(0,0,4).addClass("djs-visual"),n.circle(0,0,10).addClass("djs-hit"),t&&n.addClass(t),n},t.exports.addSegmentDragger=function(e,t,n){var i=e.group(),a=o.getMidPoint(t,n),s=o.pointsAligned(t,n);return r(i,a,s),i.addClass(c),i.addClass("h"===s?"vertical":"horizontal"),i.translate(a.x,a.y),i}},{236:236,237:237,248:248}],125:[function(e,t,n){"use strict";function r(e,t,n,r,p){function d(e,n){var r=o.toCanvasCoordinates(t,n),i=l(e,r);return i}function f(e,t,n){var r,i,o,c,u,l,p=e.index,d=e.point;return!(p<=0||e.bendpoint)&&(r=t[p-1],i=t[p],o=s(r,i),c=a(r,i),u=Math.abs(d.x-o.x),l=Math.abs(d.y-o.y),c&&u<=n&&l<=n)}function h(e,t){var n=t.waypoints,i=d(n,e);i&&(f(i,n,10)?p.start(e,t,i.index):r.start(e,t,i.index,!i.bendpoint))}function m(e,t,r){i.bind(e,t,function(e){n.triggerMouseEvent(t,e,r),e.stopPropagation()})}function g(e,n){var r=t.getLayer("overlays"),i=r.select(".djs-bendpoints[data-element-id="+e.id+"]");return!i&&n&&(i=r.group().addClass("djs-bendpoints").attr("data-element-id",e.id),m(i.node,"mousedown",e),m(i.node,"click",e),m(i.node,"dblclick",e)),i}function v(e,t){t.waypoints.forEach(function(t,n){o.addBendpoint(e).translate(t.x,t.y)}),o.addBendpoint(e,"floating")}function y(e,t){for(var n,r,i=t.waypoints,s=1;s<i.length;s++)n=i[s-1],r=i[s],a(n,r)&&o.addSegmentDragger(e,n,r)}function x(e){e.selectAll("."+c).forEach(function(e){e.remove()})}function _(e){e.selectAll("."+u).forEach(function(e){e.remove()})}function b(e){var t=g(e);return t||(t=g(e,!0),v(t,e),y(t,e)),t}function w(e){var t=g(e);t&&(_(t),x(t),y(t,e),v(t,e))}e.on("connection.changed",function(e){w(e.element)}),e.on("connection.remove",function(e){var t=g(e.element);t&&t.remove()}),e.on("element.marker.update",function(e){var t,n=e.element;n.waypoints&&(t=b(n),t[e.add?"addClass":"removeClass"](e.marker))}),e.on("element.mousemove",function(e){var t,n,r,i=e.element,o=i.waypoints;if(o){if(t=g(i,!0),n=t.select(".floating"),!n)return;r=d(o,e.originalEvent),r&&n.translate(r.point.x,r.point.y)}}),e.on("element.mousedown",function(e){var t=e.originalEvent,n=e.element,r=n.waypoints;r&&h(t,n,r)}),e.on("selection.changed",function(e){var t=e.newSelection,n=t[0];n&&n.waypoints&&b(n)}),e.on("element.hover",function(e){var t=e.element;t.waypoints&&(b(t),n.registerEvent(e.gfx.node,"mousemove","element.mousemove"))}),e.on("element.out",function(e){n.unregisterEvent(e.gfx.node,"mousemove","element.mousemove")}),this.addHandles=b,this.updateHandles=w,this.getBendpointsContainer=g}var i=e(416),o=e(124),a=e(237).pointsAligned,s=e(237).getMidPoint,c=o.BENDPOINT_CLS,u=o.SEGMENT_DRAGGER_CLS,l=e(240).getApproxIntersection;r.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"],t.exports=r},{124:124,237:237,240:240,416:416}],126:[function(e,t,n){"use strict";function r(e,t,n){return i(e,t,e[t]+n)}function i(e,t,n){return{x:"x"===t?n:e.x,y:"y"===t?n:e.y}}function o(e,t,n,r){var o=Math.max(t[r],n[r]),a=Math.min(t[r],n[r]),s=20,c=Math.min(Math.max(a+s,e[r]),o-s);return i(t,r,c)}function a(e){return"x"===e?"y":"x"}function s(e,t,n){var r,o;return e.original?e.original:(r=p.getMid(t),o=a(n),i(e,o,r[o]))}function c(e,t,n,i,c,h,m){function g(e,t){if(!_)return t;var n,r=e.waypoints;return e.waypoints=t,n=_.getCroppedWaypoints(e),e.waypoints=r,n}function v(e){c.update("connection",e.connection,e.connectionGfx)}function y(e,t,n){var r=e.newWaypoints,i=e.segmentStartIndex+t,s=r[i],c=e.segmentEndIndex+t,u=r[c],l=a(e.axis),p=o(n,s,u,l);e.draggerGfx.translate(p.x,p.y)}function x(e,t){var n=0,r=e.filter(function(r,i){return!u.pointsOnLine(e[i-1],e[i+1],r)||(n=i<=t?n-1:n,!1)});return{waypoints:r,segmentOffset:n}}var _=e.get("connectionDocking",!1);this.start=function(e,t,r){var o,a,c,l=n.getGraphics(t),p=r-1,d=r,f=t.waypoints,h=f[p],m=f[d];a=u.pointsAligned(h,m),a&&(c="v"===a?"y":"x",0===p&&(h=s(h,t.source,c)),d===f.length-1&&(m=s(m,t.target,c)),o={connection:t,segmentStartIndex:p,segmentEndIndex:d,segmentStart:h,segmentEnd:m,axis:c},i.init(e,{x:(h.x+m.x)/2,y:(h.y+m.y)/2},"connectionSegment.move",{cursor:"x"===c?"resize-ew":"resize-ns",data:{connection:t,connectionGfx:l,context:o}}))},t.on("connectionSegment.move.start",function(e){var t=e.context,r=e.connection,i=n.getLayer("overlays");t.originalWaypoints=r.waypoints.slice(),t.draggerGfx=l.addSegmentDragger(i,t.segmentStart,t.segmentEnd),t.draggerGfx.addClass("djs-dragging"),n.addMarker(r,f)}),t.on("connectionSegment.move.move",function(e){var t=e.context,n=t.connection,i=t.segmentStartIndex,o=t.segmentEndIndex,a=t.segmentStart,s=t.segmentEnd,c=t.axis,u=t.originalWaypoints.slice(),l=r(a,c,e["d"+c]),d=r(s,c,e["d"+c]),f=u.length,h=0;u[i]=l,u[o]=d;var m,x;i<2&&(m=p.getOrientation(n.source,l),1===i?"intersect"===m&&(u.shift(),u[0]=l,h--):"intersect"!==m&&(u.unshift(a),h++)),o>f-3&&(x=p.getOrientation(n.target,d),o===f-2?"intersect"===x&&(u.pop(),u[u.length-1]=d):"intersect"!==x&&u.push(s)),t.newWaypoints=n.waypoints=g(n,u),y(t,h,e),t.newSegmentStartIndex=i+h,v(e)}),t.on("connectionSegment.move.hover",function(e){e.context.hover=e.hover,n.addMarker(e.hover,d)}),t.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(e){var t=e.context.hover;t&&n.removeMarker(t,d)}),t.on("connectionSegment.move.cleanup",function(e){var t=e.context,r=t.connection;t.draggerGfx&&t.draggerGfx.remove(),n.removeMarker(r,f)}),t.on(["connectionSegment.move.cancel","connectionSegment.move.end"],function(e){var t=e.context,n=t.connection;n.waypoints=t.originalWaypoints,v(e)}),t.on("connectionSegment.move.end",function(e){var t=e.context,n=t.connection,r=t.newWaypoints,i=t.newSegmentStartIndex;r=r.map(function(e){return{original:e.original,x:Math.round(e.x),y:Math.round(e.y)}});var o=x(r,i),a=o.waypoints,s=g(n,a),c=o.segmentOffset,u={segmentMove:{segmentStartIndex:t.segmentStartIndex,newSegmentStartIndex:i+c}};m.updateWaypoints(n,s,u)})}var u=e(237),l=e(124),p=e(222),d="connect-hover",f="djs-updating";c.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","rules","modeling"],t.exports=c},{124:124,222:222,237:237}],127:[function(e,t,n){t.exports={__depends__:[e(142),e(204)],__init__:["bendpoints","bendpointSnapping"],bendpoints:["type",e(125)],bendpointMove:["type",e(122)],connectionSegmentMove:["type",e(126)],bendpointSnapping:["type",e(123)]}},{122:122,123:123,125:125,126:126,142:142,204:204}],128:[function(e,t,n){"use strict";function r(e,t,n,r){e.on("element.changed",function(r){var o=r.element;(o.parent||o===t.getRootElement())&&(r.gfx=n.getGraphics(o)),r.gfx&&e.fire(i(o)+".changed",r)}),e.on("elements.changed",function(t){var n=t.elements;n.forEach(function(t){e.fire("element.changed",{element:t})}),r.updateContainments(n)}),e.on("shape.changed",function(e){r.update("shape",e.element,e.gfx)}),e.on("connection.changed",function(e){r.update("connection",e.element,e.gfx)})}var i=e(235).getType;r.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"],t.exports=r},{235:235}],129:[function(e,t,n){t.exports={__init__:["changeSupport"],changeSupport:["type",e(128)]}},{128:128}],130:[function(e,t,n){"use strict";function r(){}t.exports=r,r.prototype.get=function(){return this._data},r.prototype.set=function(e){this._data=e},r.prototype.clear=function(){var e=this._data;return delete this._data,e},r.prototype.isEmpty=function(){return!this._data}},{}],131:[function(e,t,n){t.exports={clipboard:["type",e(130)]}},{130:130}],132:[function(e,t,n){"use strict";function r(e,t,n,r,s,c){function u(e,t){return r.allowed("connection.create",{source:e,target:t})}function l(e,t,n,r){var o=c.getShapePath(n),a=r&&c.getShapePath(r),s=c.getConnectionPath({waypoints:[e,t]});return e=i.getElementLineIntersection(o,s,!0)||e,t=r&&i.getElementLineIntersection(a,s,!1)||t,[e,t]}e.on("connect.move",function(e){var t,n,r=e.context,i=r.source,o=r.target,a=r.visual,s=r.sourcePosition;t={x:e.x,y:e.y},n=l(s,t,i,o),a.attr("points",[n[0].x,n[0].y,n[1].x,n[1].y])}),e.on("connect.hover",function(e){var t,n=e.context,r=n.source,i=e.hover;t=n.canExecute=u(r,i),null!==t&&(n.target=i,s.addMarker(i,t?o:a))}),e.on(["connect.out","connect.cleanup"],function(e){var t=e.context;t.target&&s.removeMarker(t.target,t.canExecute?o:a),t.target=null}),e.on("connect.cleanup",function(e){var t=e.context;t.visual&&t.visual.remove()}),e.on("connect.start",function(e){var t,n=e.context;t=s.getDefaultLayer().polyline().attr({stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"}),n.visual=t}),e.on("connect.end",function(e){var t=e.context,r=t.source,i=t.sourcePosition,o=t.target,a={x:e.x,y:e.y},s=t.canExecute||u(r,o);if(!s)return!1;var c=null,l={connectionStart:i,connectionEnd:a};"object"==typeof s&&(c=s),n.connect(r,o,c,l)}),this.start=function(e,n,r,o){"object"!=typeof r&&(o=r,r=i.getMid(n)),t.init(e,"connect",{autoActivate:o,data:{shape:n,context:{source:n,sourcePosition:r}}})}}var i=e(222),o="connect-ok",a="connect-not-ok";r.$inject=["eventBus","dragging","modeling","rules","canvas","graphicsFactory"],t.exports=r},{222:222}],133:[function(e,t,n){t.exports={__depends__:[e(210),e(204),e(142)],connect:["type",e(132)]}},{132:132,142:142,204:204,210:210}],134:[function(e,t,n){"use strict";function r(e,t){this._providers=[],this._eventBus=e,this._overlays=t,this._current=null,this._init()}var i=e(390),o=e(271),a=e(414),s=e(416),c=e(410),u=e(418),l=e(411),p=e(415),d=".entry";r.$inject=["eventBus","overlays"],r.prototype._init=function(){var e=this._eventBus,t=this;e.on("selection.changed",function(e){var n=e.newSelection;1===n.length?t.open(n[0]):t.close()}),e.on("elements.delete",function(e){var n=e.elements;o(n,function(e){t.isOpen(e)&&t.close()})}),e.on("element.changed",function(e){var n=e.element,r=t._current;r&&r.element===n&&t.open(n,!0)})},r.prototype.registerProvider=function(e){this._providers.push(e)},r.prototype.getEntries=function(e){var t={};return o(this._providers,function(n){var r=n.getContextPadEntries(e);o(r,function(e,n){t[n]=e})}),t},r.prototype.trigger=function(e,t,n){var r,o,a,s=this._current.element,u=this._current.entries,l=t.delegateTarget||t.target;if(!l)return t.preventDefault();if(r=u[c(l,"data-action")],o=r.action,a=t.originalEvent||t,i(o)){if("click"===e)return o(a,s,n)}else if(o[e])return o[e](a,s,n);t.preventDefault()},r.prototype.open=function(e,t){!t&&this.isOpen(e)||(this.close(),this._updateAndOpen(e))},r.prototype._updateAndOpen=function(e){var t=this.getEntries(e),n=this.getPad(e),r=n.html;o(t,function(e,t){var n,i=e.group||"default",o=p(e.html||'<div class="entry" draggable="true"></div>');c(o,"data-action",t),n=u("[data-group="+i+"]",r),n||(n=p('<div class="group" data-group="'+i+'"></div>'),r.appendChild(n)),n.appendChild(o),e.className&&l(o).add(e.className),e.title&&c(o,"title",e.title),e.imageUrl&&o.appendChild(p('<img src="'+e.imageUrl+'">'))}),l(r).add("open"),this._current={element:e,pad:n,entries:t},this._eventBus.fire("contextPad.open",{current:this._current})},r.prototype.getPad=function(e){if(this.isOpen())return this._current.pad;var t=this,n=this._overlays,r=p('<div class="djs-context-pad"></div>');a.bind(r,d,"click",function(e){t.trigger("click",e)}),a.bind(r,d,"dragstart",function(e){t.trigger("dragstart",e)}),s.bind(r,"mousedown",function(e){e.stopPropagation()}),this._overlayId=n.add(e,"context-pad",{position:{right:-9,top:-6},html:r});var i=n.get(this._overlayId);return this._eventBus.fire("contextPad.create",{element:e,pad:i}),i},r.prototype.close=function(){this.isOpen()&&(this._overlays.remove(this._overlayId),this._overlayId=null,this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)},r.prototype.isOpen=function(e){return!(!this._current||e&&this._current.element!==e)},t.exports=r},{271:271,390:390,410:410,411:411,414:414,415:415,416:416,418:418}],135:[function(e,t,n){t.exports={__depends__:[e(150),e(190)],contextPad:["type",e(134)]}},{134:134,150:150,190:190}],136:[function(e,t,n){"use strict";function r(e,t,n,r,i,a){this._eventBus=e,this._modeling=t,this._elementFactory=n,this._rules=r,this._canvas=a,this._clipboard=i,this._descriptors=[],this.registerDescriptor(function(e,t){return t.priority=1,t.id=e.id,e.parent&&(t.parent=e.parent.id),e.labelTarget&&(t.priority=4,t.labelTarget=e.labelTarget.id),e.host&&(t.priority=2,t.host=e.host.id),e.x&&(t.x=e.x,t.y=e.y),e.width&&(t.width=e.width,t.height=e.height),e.waypoints&&(t.priority=3,t.waypoints=[],o(e.waypoints,function(e){var n={x:e.x,y:e.y};e.original&&(n.original={x:e.original.x,y:e.original.y}),t.waypoints.push(n)})),e.source&&e.target&&(t.source=e.source.id,t.target=e.target.id),
t})}var i=e(389),o=e(271),a=e(273),s=e(270),c=e(258),u=e(277),l=e(274),p=e(235).getBBox,d=e(244),f=e(233),h=e(235);r.$inject=["eventBus","modeling","elementFactory","rules","clipboard","canvas"],t.exports=r,r.prototype.copy=function(e){var t,n,r=this._clipboard;if(i(e)||(e=e?[e]:[]),e.length)return t=this.createTree(e),n=this._bbox=d.center(p(t.allShapes)),delete t.allShapes,o(t,function(e){o(e,function(t){var r,i;t.labelTarget?(i=s(e,{id:t.labelTarget}),r=i.waypoints?d.delta(t,i.waypoints[0]):d.delta(t,i)):3===t.priority?(r=[],o(t.waypoints,function(e){var t=d.delta(e,n);r.push(t)},this)):r=d.delta(t,n),t.delta=r})}),this._eventBus.fire("elements.copy",{context:{tree:t}}),0===Object.keys(t).length?r.clear():r.set(t),this._eventBus.fire("elements.copied",{context:{tree:t}}),t},r.prototype.paste=function(e){var t,n,r=this._clipboard,i=this._modeling,o=this._eventBus,a=this._rules,s=r.get(),c=e.element,u=e.point;if(!r.isEmpty())return t=l(s,function(e,t,n){var r=parseInt(n,10);return isNaN(r)?e:(e[r]=t,e)},{},this),(n=a.allowed("elements.paste",{tree:t,target:c}))?void i.pasteElements(t,c,u):void o.fire("elements.paste.rejected",{context:{tree:t,position:u,target:c}})},r.prototype._computeDelta=function(e,t){var n=this._bbox,r={};return t.labelTarget?(console.log(e),d.delta(t,t.labelTarget)):(3===t.priority?(r=[],o(t.waypoints,function(e){var t=d.delta(e,n);r.push(t)},this)):r=d.delta(t,n),r)},r.prototype.hasRelations=function(e,t){var n,r,i;return!(t.waypoints&&(n=s(e,{id:t.source.id}),r=s(e,{id:t.target.id}),!n||!r))&&!(t.labelTarget&&(i=s(e,{id:t.labelTarget.id}),!i))},r.prototype.registerDescriptor=function(e){if("function"!=typeof e)throw new Error("the descriptor must be a function");if(this._descriptors.indexOf(e)!==-1)throw new Error("this descriptor is already registered");this._descriptors.push(e)},r.prototype._executeDescriptors=function(e){return e.descriptor||(e.descriptor={}),o(this._descriptors,function(t){e.descriptor=t(e.element,e.descriptor)}),e},r.prototype.createTree=function(e){function t(e,t){return i.allowed("element.copy",{collection:e,element:t})}function n(e){var t,n=c(l,{element:e.element});return n===-1?l.push(e):(t=l[n],void(t.depth<e.depth&&(l.splice(n,1),l.push(e))))}var r,i=this._rules,s={},l=[],p=f.getTopLevel(e);return s.allShapes=[],h.eachElement(p,function(e,t,r){function i(e){o(e,function(e){e&&e.length&&o(e,function(e){e.label&&n({element:e.label,depth:r}),n({element:e,depth:r})})})}var a=e.children;if(!e.labelTarget)return e.label&&n({element:e.label,depth:r}),i([e.attachers,e.incoming,e.outgoing]),n({element:e,depth:r}),a?a:void 0}),l=a(l,function(e){return this._executeDescriptors(e)},this),l=u(l,function(e){return e.descriptor.priority}),r=a(l,function(e){return e.element}),o(l,function(e){var n=e.depth;this.hasRelations(s.allShapes,e.element)&&t(r,e.element)&&(s.allShapes.push(e.element),s[n]||(s[n]=[]),s[n].push(e.descriptor))},this),s}},{233:233,235:235,244:244,258:258,270:270,271:271,273:273,274:274,277:277,389:389}],137:[function(e,t,n){t.exports={__depends__:[e(131),e(204),e(182)],__init__:["copyPaste"],copyPaste:["type",e(136)]}},{131:131,136:136,182:182,204:204}],138:[function(e,t,n){"use strict";function r(e,t,n,r,u,l,p){function d(e,t,r,i){return r?n.allowed("shape.append",{source:r,shape:e,target:t,position:i}):n.allowed("shape.create",{shape:e,target:t,position:i})}function f(e,t){[s,o,a,c].forEach(function(n){n===t?u.addMarker(e,n):u.removeMarker(e,n)})}function h(e){var t,n,r;return t=u.getDefaultLayer().group().attr(l.cls("djs-drag-group",["no-events"])),n=t.group().addClass("djs-dragger"),n.translate(e.width/-2,e.height/-2),r=n.group().addClass("djs-visual"),p.drawShape(r,e),t}e.on("create.move",function(e){var t,n=e.context,r=e.hover,i={x:e.x,y:e.y};t=n.canExecute=r&&d(n.shape,r,n.source,i),r&&null!==t&&(n.target=r,"attach"===t?f(r,s):f(r,n.canExecute?c:a))}),e.on("create.move",i,function(e){var t=e.context,n=t.shape,r=t.visual;r||(r=t.visual=h(n)),r.translate(e.x,e.y)}),e.on(["create.end","create.out","create.cleanup"],function(e){var t=e.context,n=t.target;n&&f(n,null)}),e.on("create.end",function(e){var t,n=e.context,i=n.source,o=n.shape,a=n.target,s=n.canExecute,c={x:e.x,y:e.y};return!!s&&(i?o=r.appendShape(i,o,c,a):(t="attach"===s,o=r.createShape(o,c,a,t)),void(n.shape=o))}),e.on("create.cleanup",function(e){var t=e.context;t.visual&&t.visual.remove()}),this.start=function(e,n,r){t.init(e,"create",{cursor:"grabbing",autoActivate:!0,data:{shape:n,context:{shape:n,source:r}}})}}var i=750,o="drop-ok",a="drop-not-ok",s="attach-ok",c="new-parent";r.$inject=["eventBus","dragging","rules","modeling","canvas","styles","graphicsFactory"],t.exports=r},{}],139:[function(e,t,n){t.exports={__depends__:[e(142),e(210),e(204)],create:["type",e(138)]}},{138:138,142:142,204:204,210:210}],140:[function(e,t,n){"use strict";function r(e){e instanceof MouseEvent?l.stopEvent(e,!0):l.preventDefault(e)}function i(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function o(e,t){return{x:e.x-t.x,y:e.y-t.y}}function a(e,t,n){function a(e){var n=t.viewbox(),r=t._container.getBoundingClientRect();return{x:n.x+s((e.x-r.left)/n.scale),y:n.y+s((e.y-r.top)/n.scale)}}function m(t,n){n=n||T;var r=c(new f,n.payload,n.data);return e.fire("drag."+t,r)!==!1&&e.fire(n.prefix+"."+t,r)}function g(e,s){var u=T.payload,p=T.displacement,f=T.globalStart,g=l.toPoint(e),v=o(g,f),y=T.localStart,x=a(g),_=o(x,y);if(!T.active&&(s||i(v)>T.threshold)){if(c(u,{x:y.x+p.x,y:y.y+p.y,dx:0,dy:0},{originalEvent:e}),!1===m("start"))return E();T.active=!0,T.keepSelection||(u.previousSelection=n.get(),n.select(null)),T.cursor&&d.set(T.cursor),t.addMarker(t.getRootElement(),h)}r(e),T.active&&(c(u,{x:x.x+p.x,y:x.y+p.y,dx:_.x,dy:_.y},{originalEvent:e}),m("move"))}function v(e){var t,n=!0;T.active&&(e&&(T.payload.originalEvent=e,r(e)),n=m("end")),n===!1&&m("rejected"),t=C(n!==!0),m("ended",t)}function y(e){27===e.which&&(e.preventDefault(),E())}function x(e){var t;T.active&&(t=p.install(),setTimeout(t,400)),v(e)}function _(e){g(e)}function b(e){var t=T.payload;t.hoverGfx=e.gfx,t.hover=e.element,m("hover")}function w(e){m("out");var t=T.payload;t.hoverGfx=null,t.hover=null}function E(e){var t;if(T){var n=T.active;n&&m("cancel"),t=C(e),n&&m("canceled",t)}}function C(r){var i,o;m("cleanup"),d.unset(),o=T.trapClick?x:v,u.unbind(document,"mousemove",g),u.unbind(document,"mousedown",o,!0),u.unbind(document,"mouseup",o,!0),u.unbind(document,"keyup",y),u.unbind(document,"touchstart",_,!0),u.unbind(document,"touchcancel",E,!0),u.unbind(document,"touchmove",g,!0),u.unbind(document,"touchend",v,!0),e.off("element.hover",b),e.off("element.out",w),t.removeMarker(t.getRootElement(),h);var a=T.payload.previousSelection;return r!==!1&&a&&!n.get().length&&n.select(a),i=T,T=null,i}function S(t,n,i,s){T&&E(!1),"string"==typeof n&&(s=i,i=n,n=null),s=c({},M,s||{});var p,d,f,h=s.data||{};f=s.trapClick?x:v,t?(p=l.getOriginal(t)||t,d=l.toPoint(t),r(t)):(p=null,d={x:0,y:0});var C=a(d);n||(n=C),T=c({prefix:i,data:h,payload:{},globalStart:d,displacement:o(n,C),localStart:C},s),s.manual||("undefined"!=typeof TouchEvent&&p instanceof TouchEvent?(u.bind(document,"touchstart",_,!0),u.bind(document,"touchcancel",E,!0),u.bind(document,"touchmove",g,!0),u.bind(document,"touchend",v,!0)):(u.bind(document,"mousemove",g),u.bind(document,"mousedown",f,!0),u.bind(document,"mouseup",f,!0)),u.bind(document,"keyup",y),e.on("element.hover",b),e.on("element.out",w)),m("init"),s.autoActivate&&g(t,!0)}var T,M={threshold:5,trapClick:!0};e.on("diagram.destroy",E),this.init=S,this.move=g,this.hover=b,this.out=w,this.end=v,this.cancel=E,this.context=function(){return T},this.setOptions=function(e){c(M,e)}}var s=Math.round,c=e(398),u=e(416),l=e(236),p=e(231),d=e(234),f=e(108).Event,h="djs-drag-active";a.$inject=["eventBus","canvas","selection"],t.exports=a},{108:108,231:231,234:234,236:236,398:398,416:416}],141:[function(e,t,n){"use strict";function r(e){var t=o(e,"svg, .djs-element",!0);return t&&new a(t)}function i(e,t,n){var i=this;e.on("drag.start",function(t){e.once("drag.move",function(){e.once("drag.move",function(e){i.ensureHover(e)})})}),this.ensureHover=function(e){if(!e.hover){var i,o,a,c,u=e.originalEvent;u instanceof MouseEvent&&(i=s.toPoint(u),o=document.elementFromPoint(i.x,i.y),c=r(o),c&&(a=n.get(c),t.hover({element:a,gfx:c})))}}}var o=e(413),a=e(248),s=e(236);i.$inject=["eventBus","dragging","elementRegistry"],t.exports=i},{236:236,248:248,413:413}],142:[function(e,t,n){t.exports={__init__:["hoverFix"],__depends__:[e(210)],dragging:["type",e(140)],hoverFix:["type",e(141)]}},{140:140,141:141,210:210}],143:[function(e,t,n){"use strict";function r(e,t,n,r,i,o,s,c,u){this._actions={undo:function(){t.undo()},redo:function(){t.redo()},copy:function(){var e=r.get();o.copy(e)},paste:function(){var e=u.getHoverContext();o.paste(e)},stepZoom:function(e){i.stepZoom(e.value)},zoom:function(e){s.zoom(e.value)},removeSelection:function(){var e=r.get();if(e.length){var t,i=c.allowed("elements.delete",{elements:e});if(i===!1)return;t=a(i)?i:e,t.length&&n.removeElements(t.slice())}},moveCanvas:function(e){var t=0,n=0,r=e.invertY,i=e.speed,o=i/Math.min(Math.sqrt(s.viewbox().scale),1);switch(e.direction){case"left":t=o;break;case"up":n=o;break;case"right":t=-o;break;case"down":n=-o}n&&r&&(n=-n),s.scroll({dx:t,dy:n})}}}function i(e,t){return new Error(e+" "+t)}var o=e(271),a=e(389),s="is not a registered action",c="is already registered";r.$inject=["eventBus","commandStack","modeling","selection","zoomScroll","copyPaste","canvas","rules","mouseTracking"],t.exports=r,r.prototype.trigger=function(e,t){if(!this._actions[e])throw i(e,s);return this._actions[e](t)},r.prototype.register=function(e,t){return"string"==typeof e?this._registerAction(e,t):void o(e,function(e,t){this._registerAction(t,e)},this)},r.prototype._registerAction=function(e,t){if(this.isRegistered(e))throw i(e,c);this._actions[e]=t},r.prototype.unregister=function(e){if(!this.isRegistered(e))throw i(e,s);this._actions[e]=void 0},r.prototype.length=function(){return Object.keys(this._actions).length},r.prototype.isRegistered=function(e){return!!this._actions[e]}},{271:271,389:389}],144:[function(e,t,n){t.exports={__depends__:[e(210),e(137),e(229)],__init__:["editorActions"],editorActions:["type",e(143)]}},{137:137,143:143,210:210,229:229}],145:[function(e,t,n){"use strict";function r(e,t,n,r,a){var s=this;this._dragging=t,a.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"}),e.on("global-connect.hover",function(e){var t=e.context,n=e.hover,a=t.canStartConnect=s.canStartConnect(n);null!==a&&(t.startTarget=n,r.addMarker(n,a?i:o))}),e.on(["global-connect.out","global-connect.cleanup"],function(e){var t=e.context.startTarget,n=e.context.canStartConnect;t&&r.removeMarker(t,n?i:o)}),e.on(["global-connect.ended"],function(t){var r=t.context,i=r.startTarget,o={x:t.x,y:t.y},a=s.canStartConnect(i);if(a)return e.once("element.out",function(){e.once(["connect.ended","connect.canceled"],function(){e.fire("global-connect.drag.ended")}),n.start(null,i,o)}),!1})}var i="connect-ok",o="connect-not-ok";r.$inject=["eventBus","dragging","connect","canvas","toolManager"],t.exports=r,r.prototype.start=function(e){this._dragging.init(e,"global-connect",{trapClick:!1,data:{context:{}}})},r.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.start()},r.prototype.isActive=function(){var e=this._dragging.context();return e&&/^global-connect/.test(e.prefix)},r.prototype.registerProvider=function(e){this._provider=e},r.prototype.canStartConnect=function(e){return this._provider.canStartConnect(e)}},{}],146:[function(e,t,n){t.exports={__depends__:[e(133),e(204),e(142),e(219)],globalConnect:["type",e(145)]}},{133:133,142:142,145:145,204:204,219:219}],147:[function(e,t,n){"use strict";function r(e,t,n,r){this._dragging=n,r.registerTool("hand",{tool:"hand",dragging:"hand.move"}),e.on("element.mousedown",o,function(e){if(i(e))return this.activateMove(e.originalEvent),!1},this),e.on("hand.end",function(t){var n=t.originalEvent.target;return!!(t.hover||n instanceof SVGElement)&&void e.once("hand.ended",function(){this.activateMove(t.originalEvent,{reactivate:!0})},this)},this),e.on("hand.move.move",function(e){var n=t.viewbox().scale;t.scroll({dx:e.dx*n,dy:e.dy*n})}),e.on("hand.move.end",function(t){var n=t.context,r=n.reactivate;return!i(t)&&r&&e.once("hand.move.ended",function(e){this.activateHand(e.originalEvent,!0,!0)},this),!1},this)}var i=e(242).hasPrimaryModifier,o=1500,a="grab";r.$inject=["eventBus","canvas","dragging","toolManager"],t.exports=r,r.prototype.activateMove=function(e,t,n){"object"==typeof t&&(n=t,t=!1),this._dragging.init(e,"hand.move",{autoActivate:t,cursor:a,data:{context:n||{}}})},r.prototype.activateHand=function(e,t,n){this._dragging.init(e,"hand",{trapClick:!1,autoActivate:t,cursor:a,data:{context:{reactivate:n}}})},r.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.activateHand()},r.prototype.isActive=function(){var e=this._dragging.context();return e&&/^hand/.test(e.prefix)}},{242:242}],148:[function(e,t,n){"use strict";t.exports={__depends__:[e(219)],__init__:["handTool"],handTool:["type",e(147)]}},{147:147,219:219}],149:[function(e,t,n){arguments[4][93][0].apply(n,arguments)},{242:242,246:246,248:248,271:271,414:414,93:93}],150:[function(e,t,n){arguments[4][94][0].apply(n,arguments)},{149:149,94:94}],151:[function(e,t,n){"use strict";function r(e,t,n){var r=this;this._config=e||{},this._eventBus=t,this._editorActions=n,this._listeners=[],this._keyHandler=function(e){var t,n,i=e.target,o=r._listeners,a=e.keyCode||e.charCode||-1;if(!c(i,"input, textarea"))for(t=0;n=o[t];t++)n(a,e)&&(e.preventDefault(),e.stopPropagation())},t.on("diagram.destroy",function(){r._fire("destroy"),r.unbind(),r._listeners=null}),t.on("diagram.init",function(){r._fire("init"),e&&e.bindTo&&r.bind(e.bindTo)}),this._init()}function i(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function o(e){return e.ctrlKey||e.metaKey}function a(e){return e.shiftKey}var s=e(416),c=e(417);r.$inject=["config.keyboard","eventBus","editorActions"],t.exports=r,r.prototype.bind=function(e){this.unbind(),this._node=e,s.bind(e,"keydown",this._keyHandler,!0),this._fire("bind")},r.prototype.getBinding=function(){return this._node},r.prototype.unbind=function(){var e=this._node;e&&(this._fire("unbind"),s.unbind(e,"keydown",this._keyHandler,!0)),this._node=null},r.prototype._fire=function(e){this._eventBus.fire("keyboard."+e,{node:this._node,listeners:this._listeners})},r.prototype._init=function(){function e(e,t){if(o(t)&&!a(t)&&90===e)return d.trigger("undo"),!0}function t(e,t){if(o(t)&&(89===e||90===e&&a(t)))return d.trigger("redo"),!0}function n(e,t){if(o(t)&&67===e)return d.trigger("copy"),!0}function r(e,t){if(o(t)&&86===e)return d.trigger("paste"),!0}function i(e,t){if((107===e||187===e||171===e||61===e)&&o(t))return d.trigger("stepZoom",{value:1}),!0}function s(e,t){if((109===e||189===e||173===e)&&o(t))return d.trigger("stepZoom",{value:-1}),!0}function c(e,t){if((96===e||48===e)&&o(t))return d.trigger("zoom",{value:1}),!0}function u(e,t){if(46===e)return d.trigger("removeSelection"),!0}function l(e,t){if([37,38,39,40].indexOf(e)>=0){var n={invertY:f.invertY,speed:f.speed||50};switch(e){case 37:n.direction="left";break;case 38:n.direction="up";break;case 39:n.direction="right";break;case 40:n.direction="down"}return d.trigger("moveCanvas",n),!0}}var p=this._listeners,d=this._editorActions,f=this._config;p.push(e),p.push(t),p.push(n),p.push(r),p.push(u),p.push(i),p.push(s),p.push(c),p.push(l)},r.prototype.addListener=function(e){this._listeners.push(e)},r.prototype.hasModifier=i,r.prototype.isCmd=o,r.prototype.isShift=a},{416:416,417:417}],152:[function(e,t,n){t.exports={__init__:["keyboard"],keyboard:["type",e(151)]}},{151:151}],153:[function(e,t,n){"use strict";function r(e,t,n){l.call(this,e),e.on("shape.move.start",u,function(e){var t=e.context,n=t.shapes,r=t.validatedShapes;t.shapes=i(n),t.validatedShapes=i(r)}),e.on("shape.move.start",c,function(e){var t=e.context,r=t.shapes,i=[];o(r,function(e){var n=e.label;n&&!n.hidden&&t.shapes.indexOf(n)===-1&&i.push(n),e.labelTarget&&i.push(e)}),o(i,function(e){n.makeDraggable(t,e,!0)})}),this.postExecuted(["elements.move"],function(e){var n=e.context,r=n.closure,i=r.enclosedElements;o(i,function(e){e.label&&!i[e.label.id]&&t.moveShape(e.label,n.delta,e.parent)})})}function i(e){return a(e,function(t){return e.indexOf(t.labelTarget)===-1})}var o=e(271),a=e(269),s=e(257),c=250,u=1400,l=e(102);s(r,l),r.$inject=["eventBus","modeling","moveVisuals"],t.exports=r},{102:102,257:257,269:269,271:271}],154:[function(e,t,n){t.exports={__depends__:[e(185)],__init__:["labelSupport"],labelSupport:["type",e(153)]}},{153:153,185:185}],155:[function(e,t,n){"use strict";function r(e,t,n,r,o,a){this._selection=o,this._dragging=n;var u=this,l={create:function(e){var n,r=t.getDefaultLayer();n=e.frame=c.create("rect",{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),n.appendTo(r)},update:function(e){var t=e.frame,n=e.bbox;t.attr({x:n.x,y:n.y,width:n.width,height:n.height})},remove:function(e){e.frame&&e.frame.remove()}};a.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),e.on("lasso.selection.end",function(t){var n=t.originalEvent.target;(t.hover||n instanceof SVGElement)&&e.once("lasso.selection.ended",function(){u.activateLasso(t.originalEvent,!0)})}),e.on("lasso.end",function(e){var t=i(e),n=r.filter(function(e){return e});u.select(n,t)}),e.on("lasso.start",function(e){var t=e.context;t.bbox=i(e),l.create(t)}),e.on("lasso.move",function(e){var t=e.context;t.bbox=i(e),l.update(t)}),e.on("lasso.end",function(e){var t=e.context;l.remove(t)}),e.on("lasso.cleanup",function(e){var t=e.context;l.remove(t)}),e.on("element.mousedown",1500,function(e){s(e)&&(u.activateLasso(e.originalEvent),e.stopPropagation())})}function i(e){var t,n={x:e.x-e.dx,y:e.y-e.dy},r={x:e.x,y:e.y};return t=n.x<=r.x&&n.y<r.y||n.x<r.x&&n.y<=r.y?{x:n.x,y:n.y,width:r.x-n.x,height:r.y-n.y}:n.x>=r.x&&n.y<r.y||n.x>r.x&&n.y<=r.y?{x:r.x,y:n.y,width:n.x-r.x,height:r.y-n.y}:n.x<=r.x&&n.y>r.y||n.x<r.x&&n.y>=r.y?{x:n.x,y:r.y,width:r.x-n.x,height:n.y-r.y}:n.x>=r.x&&n.y>r.y||n.x>r.x&&n.y>=r.y?{x:r.x,y:r.y,width:n.x-r.x,height:n.y-r.y}:{x:r.x,y:r.y,width:0,height:0}}var o=e(406),a=e(235).getEnclosedElements,s=e(242).hasSecondaryModifier,c=e(248),u="crosshair";r.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager"],t.exports=r,r.prototype.activateLasso=function(e,t){this._dragging.init(e,"lasso",{autoActivate:t,cursor:u,data:{context:{}}})},r.prototype.activateSelection=function(e){this._dragging.init(e,"lasso.selection",{trapClick:!1,cursor:u,data:{context:{}}})},r.prototype.select=function(e,t){var n=a(e,t);this._selection.select(o(n))},r.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.activateSelection()},r.prototype.isActive=function(){var e=this._dragging.context();return e&&/^lasso/.test(e.prefix)}},{235:235,242:242,248:248,406:406}],156:[function(e,t,n){"use strict";t.exports={__depends__:[e(219)],__init__:["lassoTool"],lassoTool:["type",e(155)]}},{155:155,219:219}],157:[function(e,t,n){"use strict";function r(e,t,n){this._eventBus=e,this._elementFactory=t,this._commandStack=n;var r=this;e.on("diagram.init",function(){r.registerHandlers(n)})}var i=e(271),o=e(224);r.$inject=["eventBus","elementFactory","commandStack"],t.exports=r,r.prototype.getHandlers=function(){return{"shape.append":e(159),"shape.create":e(162),"shape.delete":e(165),"shape.move":e(170),"shape.resize":e(175),"shape.replace":e(174),spaceTool:e(176),"label.create":e(161),"connection.create":e(160),"connection.delete":e(163),"connection.move":e(168),"connection.layout":e(167),"connection.updateWaypoints":e(178),"connection.reconnectStart":e(173),"connection.reconnectEnd":e(173),"elements.move":e(169),"elements.delete":e(164),"elements.distribute":e(166),"elements.align":e(158),"element.updateAttachment":e(177),"elements.paste":e(172)}},r.prototype.registerHandlers=function(e){i(this.getHandlers(),function(t,n){e.registerHandler(n,t)})},r.prototype.moveShape=function(e,t,n,r,i){"object"==typeof r&&(i=r,r=null);var o={shape:e,delta:t,newParent:n,newParentIndex:r,hints:i||{}};this._commandStack.execute("shape.move",o)},r.prototype.updateAttachment=function(e,t){var n={shape:e,newHost:t};this._commandStack.execute("element.updateAttachment",n)},r.prototype.moveElements=function(e,t,n,r,i){"object"==typeof r&&(i=r,r=void 0);var o,a=n;r===!0&&(o=n,a=n.parent),r===!1&&(o=null);var s={shapes:e,delta:t,newParent:a,newHost:o,hints:i||{}};this._commandStack.execute("elements.move",s)},r.prototype.moveConnection=function(e,t,n,r,i){"object"==typeof r&&(i=r,r=void 0);var o={connection:e,delta:t,newParent:n,newParentIndex:r,hints:i||{}};this._commandStack.execute("connection.move",o)},r.prototype.layoutConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.layout",n)},r.prototype.createConnection=function(e,t,n,r,i,o){"object"==typeof n&&(o=i,i=r,r=n,n=void 0),r=this._create("connection",r);var a={source:e,target:t,parent:i,parentIndex:n,connection:r,hints:o};return this._commandStack.execute("connection.create",a),a.connection},r.prototype.createShape=function(e,t,n,r,i,o){"number"!=typeof r&&(o=i,i=r),"boolean"!=typeof i&&(o=i,i=!1),e=this._create("shape",e);var a={position:t,shape:e,parent:n,parentIndex:r,host:e.host,hints:o||{}};return i&&(a.parent=n.parent,a.host=n),this._commandStack.execute("shape.create",a),a.shape},r.prototype.createLabel=function(e,t,n,r){n=this._create("label",n);var i={labelTarget:e,position:t,parent:r||e.parent,shape:n};return this._commandStack.execute("label.create",i),i.shape},r.prototype.appendShape=function(e,t,n,r,i,o){t=this._create("shape",t);var a={source:e,position:n,parent:r,shape:t,connection:i,connectionParent:o};return this._commandStack.execute("shape.append",a),a.shape},r.prototype.removeElements=function(e){var t={elements:e};this._commandStack.execute("elements.delete",t)},r.prototype.distributeElements=function(e,t,n){var r={groups:e,axis:t,dimension:n};this._commandStack.execute("elements.distribute",r)},r.prototype.removeShape=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.delete",n)},r.prototype.removeConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.delete",n)},r.prototype.replaceShape=function(e,t,n){var r={oldShape:e,newData:t,hints:n||{}};return this._commandStack.execute("shape.replace",r),r.newShape},r.prototype.pasteElements=function(e,t,n){var r={tree:e,topParent:t,position:n};this._commandStack.execute("elements.paste",r)},r.prototype.alignElements=function(e,t){var n={elements:e,alignment:t};this._commandStack.execute("elements.align",n)},r.prototype.resizeShape=function(e,t){var n={shape:e,newBounds:t};this._commandStack.execute("shape.resize",n)},r.prototype.createSpace=function(e,t,n,r){var i={movingShapes:e,resizingShapes:t,delta:n,direction:r};this._commandStack.execute("spaceTool",i)},r.prototype.updateWaypoints=function(e,t,n){var r={connection:e,newWaypoints:t,hints:n||{}};this._commandStack.execute("connection.updateWaypoints",r)},r.prototype.reconnectStart=function(e,t,n){var r={connection:e,newSource:t,dockingOrPoints:n};this._commandStack.execute("connection.reconnectStart",r)},r.prototype.reconnectEnd=function(e,t,n){var r={connection:e,newTarget:t,dockingOrPoints:n};this._commandStack.execute("connection.reconnectEnd",r)},r.prototype.connect=function(e,t,n,r){return this.createConnection(e,t,n||{},e.parent,r)},r.prototype._create=function(e,t){return t instanceof o.Base?t:this._elementFactory.create(e,t)}},{158:158,159:159,160:160,161:161,162:162,163:163,164:164,165:165,166:166,167:167,168:168,169:169,170:170,172:172,173:173,174:174,175:175,176:176,177:177,178:178,224:224,271:271}],158:[function(e,t,n){"use strict";function r(e,t){this._modeling=e,this._canvas=t}var i=e(271);r.$inject=["modeling","canvas"],t.exports=r,r.prototype.preExecute=function(e){var t=this._modeling,n=e.elements,r=e.alignment;i(n,function(e){var n={x:0,y:0};r.left?n.x=r.left-e.x:r.right?n.x=r.right-e.width-e.x:r.center?n.x=r.center-Math.round(e.width/2)-e.x:r.top?n.y=r.top-e.y:r.bottom?n.y=r.bottom-e.height-e.y:r.middle&&(n.y=r.middle-Math.round(e.height/2)-e.y),t.moveElements([e],n,e.parent)})},r.prototype.postExecute=function(e){}},{271:271}],159:[function(e,t,n){"use strict";function r(e){this._modeling=e}function i(e,t){return o(e.outgoing,function(e){return e.target===t})}var o=e(267),a=e(257);a(r,e(171)),r.$inject=["modeling"],t.exports=r,r.prototype.preExecute=function(e){if(!e.source)throw new Error("source required");var t=e.parent||e.source.parent,n=this._modeling.createShape(e.shape,e.position,t);e.shape=n},r.prototype.postExecute=function(e){var t=e.connectionParent||e.shape.parent;i(e.source,e.shape)||this._modeling.connect(e.source,e.shape,e.connection,t)}},{171:171,257:257,267:267}],160:[function(e,t,n){"use strict";function r(e,t){this._canvas=e,this._layouter=t}r.$inject=["canvas","layouter"],t.exports=r,r.prototype.execute=function(e){var t=e.connection,n=e.source,r=e.target,i=e.parent,o=e.hints;if(!n||!r)throw new Error("source and target required");if(!i)throw new Error("parent required");return t.source=n,t.target=r,t.waypoints||(t.waypoints=this._layouter.layoutConnection(t,o)),this._canvas.addConnection(t,i),t},r.prototype.revert=function(e){var t=e.connection;this._canvas.removeConnection(t),t.source=null,t.target=null}},{}],161:[function(e,t,n){"use strict";function r(e){a.call(this,e)}function i(e){["width","height"].forEach(function(t){"undefined"==typeof e[t]&&(e[t]=0)})}var o=e(257),a=e(162);o(r,a),r.$inject=["canvas"],t.exports=r;var s=a.prototype.execute;r.prototype.execute=function(e){var t=e.shape;return i(t),t.labelTarget=e.labelTarget,s.call(this,e)};var c=a.prototype.revert;r.prototype.revert=function(e){return e.shape.labelTarget=null,c.call(this,e)}},{162:162,257:257}],162:[function(e,t,n){"use strict";function r(e){this._canvas=e}var i=e(398),o=Math.round;r.$inject=["canvas"],t.exports=r,r.prototype.execute=function(e){var t=e.shape,n=e.position,r=e.parent,a=e.parentIndex;if(!r)throw new Error("parent required");if(!n)throw new Error("position required");return void 0!==n.width?i(t,n):i(t,{x:n.x-o(t.width/2),y:n.y-o(t.height/2)}),this._canvas.addShape(t,r,a),t},r.prototype.revert=function(e){this._canvas.removeShape(e.shape)}},{398:398}],163:[function(e,t,n){"use strict";function r(e,t){this._canvas=e,this._modeling=t}var i=e(232);r.$inject=["canvas","modeling"],t.exports=r,r.prototype.preExecute=function(e){var t=e.connection;t.label&&this._modeling.removeShape(t.label)},r.prototype.execute=function(e){var t=e.connection,n=t.parent;return e.parent=n,e.parentIndex=i.indexOf(n.children,t),e.source=t.source,e.target=t.target,this._canvas.removeConnection(t),t.source=null,t.target=null,t.label=null,t},r.prototype.revert=function(e){var t=e.connection,n=e.parent,r=e.parentIndex;return t.source=e.source,t.target=e.target,i.add(n.children,t,r),this._canvas.addConnection(t,n),t}},{232:232}],164:[function(e,t,n){"use strict";function r(e,t){this._modeling=e,this._elementRegistry=t}var i=e(271),o=e(257);o(r,e(171)),r.$inject=["modeling","elementRegistry"],t.exports=r,r.prototype.postExecute=function(e){var t=this._modeling,n=this._elementRegistry,r=e.elements;i(r,function(e){n.get(e.id)&&(e.waypoints?t.removeConnection(e):t.removeShape(e))})}},{171:171,257:257,271:271}],165:[function(e,t,n){"use strict";function r(e,t){this._canvas=e,this._modeling=t}var i=e(232),o=e(245).saveClear;r.$inject=["canvas","modeling"],t.exports=r,r.prototype.preExecute=function(e){var t=this._modeling,n=e.shape,r=n.label;n.labelTarget&&(e.labelTarget=n.labelTarget,n.labelTarget=null),r&&this._modeling.removeShape(r,{nested:!0}),o(n.incoming,function(e){t.removeConnection(e,{nested:!0})}),o(n.outgoing,function(e){t.removeConnection(e,{nested:!0})}),o(n.children,function(e){t.removeShape(e,{nested:!0})})},r.prototype.execute=function(e){var t=this._canvas,n=e.shape,r=n.parent;return e.oldParent=r,e.oldParentIndex=i.indexOf(r.children,n),n.label=null,t.removeShape(n),n},r.prototype.revert=function(e){var t=this._canvas,n=e.shape,r=e.oldParent,o=e.oldParentIndex,a=e.labelTarget;return i.add(r.children,n,o),a&&(a.label=n),t.addShape(n,r),n}},{232:232,245:245}],166:[function(e,t,n){"use strict";function r(e){this._modeling=e}var i=e(271),o=e(277);r.$inject=["modeling"],t.exports=r;var a={x:"y",y:"x"};r.prototype.preExecute=function(e){function t(e,t){e.range.min=Math.min(t[f],e.range.min),e.range.max=Math.max(t[f]+t[h],e.range.max)}function n(e){return e[f]+e[h]/2}function r(e){return e.length-1}function s(e){return e.max-e.min}function c(e,t){var r={y:0};r[f]=e-n(t),r[f]&&(r[a[f]]=0,p.moveElements([t],r,t.parent))}var u,l,p=this._modeling,d=e.groups,f=e.axis,h=e.dimension,m=d[0],g=r(d),v=d[g],y=0;i(d,function(e,a){var u,l,p;return e.elements.length<2?void(a&&a!==d.length-1&&(t(e,e.elements[0]),y+=s(e.range))):(u=o(e.elements,f),l=u[0],a===g&&(l=u[r(u)]),p=n(l),e.range=null,i(u,function(n){return c(p,n),null===e.range?void(e.range={min:n[f],max:n[f]+n[h]}):void t(e,n)}),void(a&&a!==d.length-1&&(y+=s(e.range))))}),l=Math.abs(v.range.min-m.range.max),u=Math.round((l-y)/(d.length-1)),u<d.length-1||i(d,function(e,t){var n,r={};e!==m&&e!==v&&(n=d[t-1],e.range.max=0,i(e.elements,function(t,i){r[a[f]]=0,r[f]=n.range.max-t[f]+u,e.range.min!==t[f]&&(r[f]+=t[f]-e.range.min),r[f]&&p.moveElements([t],r,t.parent),e.range.max=Math.max(t[f]+t[h],i?e.range.max:0)}))})},r.prototype.postExecute=function(e){}},{271:271,277:277}],167:[function(e,t,n){"use strict";function r(e,t){this._layouter=e,this._canvas=t}function i(e){function t(e,n){var r=e.indexOf(n);if(r<0&&n){var i=n.parent;r=t(e,i)}return r}var n=e.parent.children,r=n.indexOf(e),i=t(n,e.source),o=t(n,e.target),a=Math.max(i+1,o+1,r);return r<a&&(n.splice(a,0,e),n.splice(r,1)),a}var o=e(398);r.$inject=["layouter","canvas"],t.exports=r,r.prototype.execute=function(e){var t=e.connection,n=t.parent,r=n.children,a=r.indexOf(t),s=t.waypoints;return o(e,{oldWaypoints:s,oldIndex:a}),i(t),t.waypoints=this._layouter.layoutConnection(t,e.hints),t},r.prototype.revert=function(e){var t=e.connection,n=t.parent,r=n.children,i=r.indexOf(t),o=e.oldIndex;return t.waypoints=e.oldWaypoints,o!==i&&(r.splice(i,1),r.splice(o,0,t)),t}},{398:398}],168:[function(e,t,n){"use strict";function r(){}var i=e(271),o=e(232);t.exports=r,r.prototype.execute=function(e){var t=e.connection,n=e.delta,r=e.newParent||t.parent,a=e.newParentIndex,s=t.parent;return e.oldParent=s,e.oldParentIndex=o.remove(s.children,t),o.add(r.children,t,a),t.parent=r,i(t.waypoints,function(e){e.x+=n.x,e.y+=n.y,e.original&&(e.original.x+=n.x,e.original.y+=n.y)}),t},r.prototype.revert=function(e){var t=e.connection,n=t.parent,r=e.oldParent,a=e.oldParentIndex,s=e.delta;return o.remove(n.children,t),o.add(r.children,t,a),t.parent=r,i(t.waypoints,function(e){e.x-=s.x,e.y-=s.y,e.original&&(e.original.x-=s.x,e.original.y-=s.y)}),t}},{232:232,271:271}],169:[function(e,t,n){"use strict";function r(e){this._helper=new i(e)}var i=e(180);r.$inject=["modeling"],t.exports=r,r.prototype.preExecute=function(e){e.closure=this._helper.getClosure(e.shapes)},r.prototype.postExecute=function(e){var t,n=e.hints;n&&n.primaryShape&&(t=n.primaryShape,n.oldParent=t.parent),this._helper.moveClosure(e.closure,e.delta,e.newParent,e.newHost,t)},r.prototype.execute=function(e){},r.prototype.revert=function(e){}},{180:180}],170:[function(e,t,n){"use strict";function r(e){this._modeling=e,this._helper=new s(e)}var i=e(398),o=e(271),a=e(404),s=e(180),c=e(232),u=e(179).getMovedSourceAnchor,l=e(179).getMovedTargetAnchor;r.$inject=["modeling"],t.exports=r,r.prototype.execute=function(e){var t=e.shape,n=e.delta,r=e.newParent||t.parent,o=e.newParentIndex,s=t.parent;
return e.oldBounds=a(t,["x","y","width","height"]),e.oldParent=s,e.oldParentIndex=c.remove(s.children,t),c.add(r.children,t,o),i(t,{parent:r,x:t.x+n.x,y:t.y+n.y}),t},r.prototype.postExecute=function(e){var t=e.shape,n=e.delta,r=e.hints,i=this._modeling;r.layout!==!1&&(o(t.incoming,function(e){i.layoutConnection(e,{connectionEnd:l(e,t,n)})}),o(t.outgoing,function(e){i.layoutConnection(e,{connectionStart:u(e,t,n)})})),r.recurse!==!1&&this.moveChildren(e)},r.prototype.revert=function(e){var t=e.shape,n=e.oldParent,r=e.oldParentIndex,o=e.delta;return c.add(n.children,t,r),i(t,{parent:n,x:t.x-o.x,y:t.y-o.y}),t},r.prototype.moveChildren=function(e){var t=e.delta,n=e.shape;this._helper.moveRecursive(n.children,t,null)},r.prototype.getNewParent=function(e){return e.newParent||e.shape.parent}},{179:179,180:180,232:232,271:271,398:398,404:404}],171:[function(e,t,n){"use strict";function r(){}t.exports=r,r.prototype.execute=function(){},r.prototype.revert=function(){}},{}],172:[function(e,t,n){"use strict";function r(e,t){o(t,function(t){e[t]&&delete e[t]})}function i(e,t,n,r,i,o){this._eventBus=e,this._canvas=t,this._selection=n,this._elementFactory=r,this._modeling=i,this._rules=o}var o=e(271),a=e(273),s=e(277),c=e(387),u=e(257);u(i,e(171)),i.$inject=["eventBus","canvas","selection","elementFactory","modeling","rules"],t.exports=i,i.prototype.preExecute=function(e){var t=this._eventBus,n=e.tree,i=e.topParent,u=e.position;n.createdElements={},n.labels=[],o(n,function(e,l){var p=parseInt(l,10);isNaN(p)||(p||(e=a(e,function(e){return e.parent=i,e})),e=s(e,"priority"),o(e,function(e){var o,a,s=e.id,l=e.parent,d=!1,f=c(e);if(p&&(f.parent=this._getCreatedElement(l,n)),l){if(t.fire("element.paste",{createdElements:n.createdElements,descriptor:f}),l=f.parent,f.waypoints)return f=this._createConnection(f,l,u,n),void(f&&(n.createdElements[s]={element:f,descriptor:e}));if(f.parent!==i&&(o={root:!1}),f.host&&(d=!0,l=this._getCreatedElement(f.host,n)),f.labelTarget)return n.labels.push(f);a={x:Math.round(u.x+f.delta.x+f.width/2),y:Math.round(u.y+f.delta.y+f.height/2)},r(f,["id","parent","delta","host","priority"]),f=this._createShape(f,l,a,d,o),f&&(n.createdElements[s]={element:f,descriptor:e})}},this))},this)},i.prototype.postExecute=function(e){var t=this._modeling,n=this._selection,r=e.tree,i=r.labels,a=[];o(i,function(e){var n,i,o,a=this._getCreatedElement(e.labelTarget,r);a&&(n=a.label,n&&(i={x:a.x,y:a.y},a.waypoints&&(i=a.waypoints[0]),o={x:Math.round(i.x-n.x+e.delta.x),y:Math.round(i.y-n.y+e.delta.y)},t.moveShape(n,o,a.parent)))},this),o(r[0],function(e){var t=e.id,n=r.createdElements[t];n&&a.push(n.element)}),n.select(a)},i.prototype._createConnection=function(e,t,n,i){var o,s,c,u,l=this._modeling,p=this._rules;return e.waypoints=a(e.waypoints,function(t,r){return{x:Math.round(n.x+e.delta[r].x),y:Math.round(n.y+e.delta[r].y)}}),s=this._getCreatedElement(e.source,i),c=this._getCreatedElement(e.target,i),s&&c&&(u=p.allowed("element.paste",{source:s,target:c}))?(r(e,["id","parent","delta","source","target","width","height","priority"]),o=l.createConnection(s,c,e,t)):null},i.prototype._createShape=function(e,t,n,r,i){var o=this._modeling,a=this._elementFactory,s=this._rules,c=s.allowed("element.paste",{element:e,position:n,parent:t});if(!c)return null;var u=a.createShape(e);return o.createShape(u,n,t,r,i),u},i.prototype._getCreatedElement=function(e,t){return t.createdElements[e]&&t.createdElements[e].element}},{171:171,257:257,271:271,273:273,277:277,387:387}],173:[function(e,t,n){"use strict";function r(){}var i=e(389);r.$inject=[],t.exports=r,r.prototype.execute=function(e){var t,n=e.newSource,r=e.newTarget,o=e.connection,a=e.dockingOrPoints,s=o.waypoints;if(!n&&!r)throw new Error("newSource or newTarget are required");if(n&&r)throw new Error("must specify either newSource or newTarget");return e.oldWaypoints=s,i(a)?t=a:(t=s.slice(),t.splice(n?0:-1,1,a)),n&&(e.oldSource=o.source,o.source=n),r&&(e.oldTarget=o.target,o.target=r),o.waypoints=t,o},r.prototype.revert=function(e){var t=e.newSource,n=e.newTarget,r=e.connection;return t&&(r.source=e.oldSource),n&&(r.target=e.oldTarget),r.waypoints=e.oldWaypoints,r}},{389:389}],174:[function(e,t,n){"use strict";function r(e,t){this._modeling=e,this._rules=t}var i=e(271);r.$inject=["modeling","rules"],t.exports=r,r.prototype.preExecute=function(e){function t(e,t,n,r){return a.allowed(e,{source:t,target:n,connection:r})}var n,r=this,o=this._modeling,a=this._rules,s=e.oldShape,c=e.newData,u=e.hints,l={x:c.x,y:c.y};n=e.newShape=e.newShape||r.createShape(c,l,s.parent),s.host&&o.updateAttachment(n,s.host);var p;u.moveChildren!==!1&&(p=s.children.slice(),o.moveElements(p,{x:0,y:0},n));var d=s.incoming.slice(),f=s.outgoing.slice();i(d,function(e){var i=e.waypoints,o=i[i.length-1],a=e.source,s=t("connection.reconnectEnd",a,n,e);s&&r.reconnectEnd(e,n,o)}),i(f,function(e){var i=e.waypoints,o=i[0],a=e.target,s=t("connection.reconnectStart",n,a,e);s&&r.reconnectStart(e,n,o)})},r.prototype.postExecute=function(e){var t=this._modeling,n=e.oldShape,r=e.newShape;i(r.incoming,function(e){t.layoutConnection(e,{endChanged:!0})}),i(r.outgoing,function(e){t.layoutConnection(e,{startChanged:!0})}),t.removeShape(n)},r.prototype.execute=function(e){},r.prototype.revert=function(e){},r.prototype.createShape=function(e,t,n){var r=this._modeling;return r.createShape(e,t,n)},r.prototype.reconnectStart=function(e,t,n){var r=this._modeling;r.reconnectStart(e,t,n)},r.prototype.reconnectEnd=function(e,t,n){var r=this._modeling;r.reconnectEnd(e,t,n)}},{271:271}],175:[function(e,t,n){"use strict";function r(e){this._modeling=e}var i=e(398),o=e(271),a=e(179).getResizedSourceAnchor,s=e(179).getResizedTargetAnchor;r.$inject=["modeling"],t.exports=r,r.prototype.execute=function(e){var t=e.shape,n=e.newBounds;if(void 0===n.x||void 0===n.y||void 0===n.width||void 0===n.height)throw new Error("newBounds must have {x, y, width, height} properties");if(n.width<10||n.height<10)throw new Error("width and height cannot be less than 10px");return e.oldBounds={width:t.width,height:t.height,x:t.x,y:t.y},i(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t},r.prototype.postExecute=function(e){var t=e.shape,n=e.oldBounds,r=this._modeling;o(t.incoming,function(e){r.layoutConnection(e,{connectionEnd:s(e,t,n)})}),o(t.outgoing,function(e){r.layoutConnection(e,{connectionStart:a(e,t,n)})})},r.prototype.revert=function(e){var t=e.shape,n=e.oldBounds;return i(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t}},{179:179,271:271,398:398}],176:[function(e,t,n){"use strict";function r(e){this._modeling=e}var i=e(271),o=e(216);r.$inject=["modeling"],t.exports=r,r.prototype.preExecute=function(e){var t=this._modeling,n=e.resizingShapes,r=e.delta,a=e.direction;i(n,function(e){var n=o.resizeBounds(e,a,r);t.resizeShape(e,n)})},r.prototype.postExecute=function(e){var t=this._modeling,n=e.movingShapes,r=e.delta;t.moveElements(n,r)},r.prototype.execute=function(e){},r.prototype.revert=function(e){}},{216:216,271:271}],177:[function(e,t,n){"use strict";function r(e){this._modeling=e}function i(e,t){return a.remove(e&&e.attachers,t)}function o(e,t,n){if(e){var r=e.attachers;r||(e.attachers=r=[]),a.add(r,t,n)}}var a=e(232);t.exports=r,r.$inject=["modeling"],r.prototype.execute=function(e){var t=e.shape,n=e.newHost,r=t.host;return e.oldHost=r,e.attacherIdx=i(r,t),o(n,t),t.host=n,t},r.prototype.revert=function(e){var t=e.shape,n=e.newHost,r=e.oldHost,a=e.attacherIdx;return t.host=r,i(n,t),o(r,t,a),t}},{232:232}],178:[function(e,t,n){"use strict";function r(){}t.exports=r,r.prototype.execute=function(e){var t=e.connection,n=e.newWaypoints;return e.oldWaypoints=t.waypoints,t.waypoints=n,t},r.prototype.revert=function(e){var t=e.connection,n=e.oldWaypoints;return t.waypoints=n,t}},{}],179:[function(e,t,n){"use strict";function r(e,t,n){var r=c(e),i=r[0];return u(i.original||i,n,t)}function i(e,t,n){var r=c(e),i=r[r.length-1];return u(i.original||i,n,t)}function o(e,t,n){return r(e,t,s(t,n))}function a(e,t,n){return i(e,t,s(t,n))}function s(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height}}function c(e){var t=e.waypoints;if(!t.length)throw new Error("connection#"+e.id+": no waypoints");return t}var u=e(230).getNewAttachPoint;t.exports.getResizedSourceAnchor=r,t.exports.getResizedTargetAnchor=i,t.exports.getMovedSourceAnchor=o,t.exports.getMovedTargetAnchor=a},{230:230}],180:[function(e,t,n){"use strict";function r(e){this._modeling=e}var i=e(271),o=e(235),a=e(179).getMovedSourceAnchor,s=e(179).getMovedTargetAnchor;t.exports=r,r.prototype.moveRecursive=function(e,t,n){return e?this.moveClosure(this.getClosure(e),t,n):[]},r.prototype.moveClosure=function(e,t,n,r,o){var c=this._modeling,u=e.allShapes,l=e.allConnections,p=e.enclosedConnections,d=e.topLevel,f=!1;o&&o.parent===n&&(f=!0),i(u,function(e){c.moveShape(e,t,d[e.id]&&!f&&n,{recurse:!1,layout:!1})}),i(l,function(e){var r=!!u[e.source.id],i=!!u[e.target.id];p[e.id]&&r&&i?c.moveConnection(e,t,d[e.id]&&!f&&n):c.layoutConnection(e,{connectionStart:r&&a(e,e.source,t),connectionEnd:i&&s(e,e.target,t)})})},r.prototype.getClosure=function(e){return o.getClosure(e)}},{179:179,235:235,271:271}],181:[function(e,t,n){"use strict";function r(e,t){this._eventBus=e,this._canvas=t,this._init()}var i=e(279);r.$inject=["eventBus","canvas"],t.exports=r,r.prototype.getHoverContext=function(){var e=this._canvas.viewbox();return{element:this._hoverElement,point:{x:e.x+Math.round(this._mouseX/e.scale),y:e.y+Math.round(this._mouseY/e.scale)}}},r.prototype._init=function(){var e=this._eventBus,t=this._canvas,n=t.getContainer();this._setMousePosition=i(this._setMousePosition,this),n.addEventListener("mousemove",this._setMousePosition),e.on("diagram.destroy",function(){n.removeEventListener("mousemove",this._setMousePosition)},this),e.on("element.hover",this._setHoverElement,this)},r.prototype._setHoverElement=function(e){this._hoverElement=e.element},r.prototype._setMousePosition=function(e){this._mouseX=e.layerX,this._mouseY=e.layerY}},{279:279}],182:[function(e,t,n){"use strict";t.exports={__init__:["mouseTracking"],mouseTracking:["type",e(181)]}},{181:181}],183:[function(e,t,n){"use strict";function r(e){return{x:e.x+f(e.width/2),y:e.y+f(e.height/2)}}function i(e,t,n,i,s){function c(e,t,n,r){return s.allowed("elements.move",{shapes:e,delta:t,position:n,target:r})}function h(e,n,i){if(!n.waypoints&&n.parent){var o=r(n);t.init(e,o,"shape.move",{cursor:"grabbing",autoActivate:i,data:{shape:n,context:{}}})}}e.on("shape.move.start",p,function(e){var t=e.context,n=e.shape,r=i.get().slice();r.indexOf(n)===-1&&(r=[n]),r=o(r),a(t,{shapes:r,validatedShapes:r,shape:n})}),e.on("shape.move.start",l,function(e){var t,n=e.context,r=n.validatedShapes;if(t=n.canExecute=c(r),!t)return e.stopPropagation(),!1}),e.on("shape.move.move",u,function(e){var t,n=e.context,r=n.validatedShapes,i=e.hover,o={x:e.dx,y:e.dy},a={x:e.x,y:e.y};return t=c(r,o,a,i),n.delta=o,n.canExecute=t,null===t?void(n.target=null):void(n.target=i)}),e.on("shape.move.end",function(e){var t=e.context,r=t.delta,i=t.canExecute,o="attach"===i,a=t.shapes;return!!i&&(r.x=f(r.x),r.y=f(r.y),void n.moveElements(a,r,t.target,o,{primaryShape:t.shape}))}),e.on("element.mousedown",function(e){var t=d(e);if(!t)throw new Error("must supply DOM mousedown event");h(t,e.element)}),this.start=h}function o(e){var t=c(e,"id");return s(e,function(e){for(;e=e.parent;)if(t[e.id])return!1;return!0})}var a=e(398),s=e(269),c=e(272),u=500,l=1250,p=1500,d=e(236).getOriginal,f=Math.round;i.$inject=["eventBus","dragging","modeling","selection","rules"],t.exports=i},{236:236,269:269,272:272,398:398}],184:[function(e,t,n){"use strict";function r(e,t,n,r){function c(e){return t.getGraphics(e)}function u(e){var t=l(e),n=i(t);return n}function l(e){var t=f.selfAndAllChildren(e,!0),n=d(t,function(e){return(e.incoming||[]).concat(e.outgoing||[])});return a(t.concat(n),!0)}function p(e,t){[x,g,v,y].forEach(function(r){r===t?n.addMarker(e,r):n.removeMarker(e,r)})}function _(e,t){var i=e.dragGroup;i||(i=e.dragGroup=n.getDefaultLayer().group().attr(r.cls("djs-drag-group",["no-events"])));var o=c(t),a=o.clone(),s=o.getBBox();return a.attr(r.cls("djs-dragger",[],{x:s.x,y:s.y})),i.add(a),a}function b(e,t,r){_(e,t),r&&n.addMarker(t,m),e.allDraggedElements?e.allDraggedElements.push(t):e.allDraggedElements=[t]}this.addDragger=_,this.makeDraggable=b,e.on("shape.move.start",h,function(e){var t=e.context,r=t.shapes,i=t.allDraggedElements,c=u(r);c.forEach(function(e){_(t,e)}),i=i?a(i,l(r)):l(r),s(i,function(e){n.addMarker(e,m)}),t.allDraggedElements=i,t.differentParents=o(r)}),e.on("shape.move.move",h,function(e){var t=e.context,n=t.dragGroup,r=t.target,i=t.shape.parent,o=t.canExecute;r&&("attach"===o?p(r,x):t.canExecute&&r&&r.id!==i.id?p(r,y):p(r,t.canExecute?g:v)),n.translate(e.dx,e.dy)}),e.on(["shape.move.out","shape.move.cleanup"],function(e){var t=e.context,n=t.target;n&&p(n,null)}),e.on("shape.move.cleanup",function(e){var t=e.context,r=t.allDraggedElements,i=t.dragGroup;s(r,function(e){n.removeMarker(e,m)}),i&&i.remove()})}function i(e){var t=c(e,function(t){if(t.waypoints){var n=u(e,t.source),r=u(e,t.target);return n&&r}return!0});return t}function o(e){return 1!==l(p(e,function(e){return e.parent&&e.parent.id}))}var a=e(259),s=e(271),c=e(269),u=e(270),l=e(275),p=e(272),d=e(273),f=e(235),h=500,m="djs-dragging",g="drop-ok",v="drop-not-ok",y="new-parent",x="attach-ok";r.$inject=["eventBus","elementRegistry","canvas","styles"],t.exports=r},{235:235,259:259,269:269,270:270,271:271,272:272,273:273,275:275}],185:[function(e,t,n){t.exports={__depends__:[e(150),e(210),e(188),e(204),e(142)],__init__:["move","moveVisuals"],move:["type",e(183)],moveVisuals:["type",e(184)]}},{142:142,150:150,183:183,184:184,188:188,204:204,210:210}],186:[function(e,t,n){"use strict";function r(e){o.call(this,e);var t=this;this.preExecute(["shape.create","connection.create"],function(e){var n=e.context,r=n.shape||n.connection,i=n.parent,o=t.getOrdering(r,i);o&&(void 0!==o.parent&&(n.parent=o.parent),n.parentIndex=o.index)}),this.preExecute(["shape.move","connection.move"],function(e){var n=e.context,r=n.shape||n.connection,i=n.newParent||r.parent,o=t.getOrdering(r,i);o&&(void 0!==o.parent&&(n.newParent=o.parent),n.newParentIndex=o.index)})}var i=e(257),o=e(102);r.prototype.getOrdering=function(e,t){return null},i(r,o),t.exports=r},{102:102,257:257}],187:[function(e,t,n){"use strict";function r(e,t,n){function r(e,t){return e.rect(10,10,0,0).attr(i)}this.offset=6;var i=t.cls("djs-outline",["no-fill"]),o=this;e.on(["shape.added","shape.changed"],function(e){var t=e.element,n=e.gfx,i=n.select(".djs-outline");i||(i=r(n,t)),o.updateShapeOutline(i,t)}),e.on(["connection.added","connection.changed"],function(e){var t=e.element,n=e.gfx,i=n.select(".djs-outline");i||(i=r(n,t)),o.updateConnectionOutline(i,t)})}var i=e(235).getBBox;r.prototype.updateShapeOutline=function(e,t){e.attr({x:-this.offset,y:-this.offset,width:t.width+2*this.offset,height:t.height+2*this.offset})},r.prototype.updateConnectionOutline=function(e,t){var n=i(t);e.attr({x:n.x-this.offset,y:n.y-this.offset,width:n.width+2*this.offset,height:n.height+2*this.offset})},r.$inject=["eventBus","styles","elementRegistry"],t.exports=r},{235:235}],188:[function(e,t,n){"use strict";t.exports={__init__:["outline"],outline:["type",e(187)]}},{187:187}],189:[function(e,t,n){"use strict";function r(e){var t=h('<div class="djs-overlay-container" style="position: absolute; width: 0; height: 0;" />');return e.insertBefore(t,e.firstChild),t}function i(e,t,n){l(e.style,{left:t+"px",top:n+"px"})}function o(e,t){e.style.display=t===!1?"none":""}function a(e,t,n){this._eventBus=e,this._canvas=t,this._elementRegistry=n,this._ids=_,this._overlayDefaults={show:{minZoom:.7,maxZoom:5}},this._overlays={},this._overlayContainers=[],this._overlayRoot=r(t.getContainer()),this._init()}var s=e(389),c=e(395),u=e(393),l=e(398),p=e(271),d=e(270),f=e(269),h=e(415),m=e(411),g=e(410),v=e(419),y=e(412),x=e(235).getBBox,_=new(e(239))("ov");a.$inject=["eventBus","canvas","elementRegistry"],t.exports=a,a.prototype.get=function(e){if(c(e)&&(e={id:e}),c(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?f(t.overlays,{type:e.type}):t.overlays.slice():[]}return e.type?f(this._overlays,{type:e.type}):e.id?this._overlays[e.id]:null},a.prototype.add=function(e,t,n){if(u(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!e)throw new Error("invalid element specified");var r=this._ids.next();return n=l({},this._overlayDefaults,n,{id:r,type:t,element:e,html:n.html}),this._addOverlay(n),r},a.prototype.remove=function(e){var t=this.get(e)||[];s(t)||(t=[t]);var n=this;p(t,function(e){var t=n._getOverlayContainer(e.element,!0);if(e&&(v(e.html),v(e.htmlContainer),delete e.htmlContainer,delete e.element,delete n._overlays[e.id]),t){var r=t.overlays.indexOf(e);r!==-1&&t.overlays.splice(r,1)}})},a.prototype.show=function(){o(this._overlayRoot)},a.prototype.hide=function(){o(this._overlayRoot,!1)},a.prototype.clear=function(){this._overlays={},this._overlayContainers=[],y(this._overlayRoot)},a.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,r=t.x,o=t.y;if(t.waypoints){var a=x(t);r=a.x,o=a.y}i(n,r,o),g(e.html,"data-container-id",t.id)},a.prototype._updateOverlay=function(e){var t=e.position,n=e.htmlContainer,r=e.element,o=t.left,a=t.top;if(void 0!==t.right){var s;s=r.waypoints?x(r).width:r.width,o=t.right*-1+s}if(void 0!==t.bottom){var c;c=r.waypoints?x(r).height:r.height,a=t.bottom*-1+c}i(n,o||0,a||0)},a.prototype._createOverlayContainer=function(e){var t=h('<div class="djs-overlays" style="position: absolute" />');this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n},a.prototype._updateRoot=function(e){var t=e.scale||1,n=e.scale||1,r="matrix("+t+",0,0,"+n+","+-1*e.x*t+","+-1*e.y*n+")";this._overlayRoot.style.transform=r,this._overlayRoot.style["-ms-transform"]=r,this._overlayRoot.style["-webkit-transform"]=r},a.prototype._getOverlayContainer=function(e,t){var n=d(this._overlayContainers,function(t){return t.element===e});return n||t?n:this._createOverlayContainer(e)},a.prototype._addOverlay=function(e){var t,n,r=e.id,i=e.element,o=e.html;o.get&&(o=o.get(0)),c(o)&&(o=h(o)),n=this._getOverlayContainer(i),t=h('<div class="djs-overlay" data-overlay-id="'+r+'" style="position: absolute">'),t.appendChild(o),e.type&&m(t).add("djs-overlay-"+e.type),e.htmlContainer=t,n.overlays.push(e),n.html.appendChild(t),this._overlays[r]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())},a.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,r=e.htmlContainer,i=!0;n&&((n.minZoom>t.scale||n.maxZoom<t.scale)&&(i=!1),o(r,i))},a.prototype._updateOverlaysVisibilty=function(e){var t=this;p(this._overlays,function(n){t._updateOverlayVisibilty(n,e)})},a.prototype._init=function(){function e(e){n._updateRoot(e),n._updateOverlaysVisibilty(e),n.show()}var t=this._eventBus,n=this;t.on("canvas.viewbox.changing",function(e){n.hide()}),t.on("canvas.viewbox.changed",function(t){e(t.viewbox)}),t.on(["shape.remove","connection.remove"],function(e){var t=e.element,r=n.get({element:t});p(r,function(e){n.remove(e.id)});var i=n._getOverlayContainer(t);if(i){v(i.html);var o=n._overlayContainers.indexOf(i);o!==-1&&n._overlayContainers.splice(o,1)}}),t.on(["element.changed"],function(e){var t=e.element,r=n._getOverlayContainer(t,!0);r&&(p(r.overlays,function(e){n._updateOverlay(e)}),n._updateOverlayContainer(r))}),t.on("element.marker.update",function(e){var t=n._getOverlayContainer(e.element,!0);t&&m(t.html)[e.add?"add":"remove"](e.marker)}),t.on("diagram.clear",this.clear,this)}},{235:235,239:239,269:269,270:270,271:271,389:389,393:393,395:395,398:398,410:410,411:411,412:412,415:415,419:419}],190:[function(e,t,n){t.exports={__init__:["overlays"],overlays:["type",e(189)]}},{189:189}],191:[function(e,t,n){"use strict";function r(e,t,n){this._eventBus=e,this._canvas=t,this._dragging=n,this._providers=[];var r=this;e.on("tool-manager.update",function(e){var t=e.tool;r.updateToolHighlight(t)}),e.on("i18n.changed",function(){r._update()})}var i=e(390),o=e(271),a=e(415),s=e(418),c=e(410),u=e(412),l=e(411),p=e(417),d=e(414),f=e(416),h=".djs-palette-toggle",m=".entry",g=h+", "+m;r.$inject=["eventBus","canvas","dragging"],t.exports=r,r.prototype.registerProvider=function(e){this._providers.push(e),this._container||this._init(),this._update()},r.prototype.getEntries=function(){var e={};return o(this._providers,function(t){var n=t.getPaletteEntries();o(n,function(t,n){e[n]=t})}),e},r.prototype._init=function(){var e=this._canvas,t=this._eventBus,n=e.getContainer(),i=this._container=a(r.HTML_MARKUP),o=this;n.appendChild(i),d.bind(i,g,"click",function(e){var t=e.delegateTarget;return p(t,h)?o.toggle():void o.trigger("click",e)}),f.bind(i,"mousedown",function(e){e.stopPropagation()}),d.bind(i,m,"dragstart",function(e){o.trigger("dragstart",e)}),t.fire("palette.create",{html:i}),t.on("canvas.resized",function(){n.clientHeight<650?l(i).add("two-column"):l(i).remove("two-column")})},r.prototype._update=function(){var e=s(".djs-palette-entries",this._container),t=this._entries=this.getEntries();u(e),o(t,function(t,n){var r=t.group||"default",i=s("[data-group="+r+"]",e);i||(i=a('<div class="group" data-group="'+r+'"></div>'),e.appendChild(i));var o=t.html||(t.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),u=a(o);i.appendChild(u),t.separator||(c(u,"data-action",n),t.title&&c(u,"title",t.title),t.className&&l(u).add(t.className),t.imageUrl&&u.appendChild(a('<img src="'+t.imageUrl+'">')))}),this.open(!0)},r.prototype.trigger=function(e,t,n){var r,o,a,s=this._entries,u=t.delegateTarget||t.target;return u?(r=s[c(u,"data-action")],void(r&&(o=r.action,a=t.originalEvent||t,i(o)?"click"===e&&o(a,n):o[e]&&o[e](a,n),t.preventDefault()))):t.preventDefault()},r.prototype.close=function(){l(this._container).remove("open")},r.prototype.open=function(){l(this._container).add("open")},r.prototype.toggle=function(e){this.isOpen()?this.close():this.open()},r.prototype.isActiveTool=function(e){return e&&this._activeTool===e},r.prototype.updateToolHighlight=function(e){var t,n;this._toolsContainer||(t=s(".djs-palette-entries",this._container),this._toolsContainer=s("[data-group=tools]",t)),n=this._toolsContainer,o(n.children,function(t){var n=t.getAttribute("data-action");n&&(n=n.replace("-tool",""),t.classList.contains("entry")&&n===e?l(t).add("highlighted-entry"):l(t).remove("highlighted-entry"))})},r.prototype.isOpen=function(){return this._container&&l(this._container).has("open")},r.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>'},{271:271,390:390,410:410,411:411,412:412,414:414,415:415,416:416,417:417,418:418}],192:[function(e,t,n){"use strict";t.exports={__depends__:[e(219)],__init__:["palette"],palette:["type",e(191)]}},{191:191,219:219}],193:[function(e,t,n){"use strict";function r(e,t){this._eventBus=e,this._canvas=t,this._providers={}}var i=e(271),o=e(398),a=e(270),s=e(414),c=e(415),u=e(411),l=e(410),p=e(419),d="data-id";r.$inject=["eventBus","canvas"],r.prototype.registerProvider=function(e,t){this._providers[e]=t},r.prototype.create=function(e,t){var n=this._providers[e];if(!n)throw new Error("Provider is not registered: "+e);if(!t)throw new Error("Element is missing");var r=this._current={provider:n,className:e,element:t};return n.getHeaderEntries&&(r.headerEntries=n.getHeaderEntries(t)),r.entries=n.getEntries(t),this},r.prototype.isEmpty=function(){var e=this._current;return 0===e.entries.length&&e.headerEntries&&0===e.headerEntries.length},r.prototype.open=function(e){if(!e)throw new Error("the position argument is missing");this.isOpen()&&this.close();var t=this._current,n=this._canvas,r=n.getContainer();if(t.position=e,t.container=this._createContainer(),t.headerEntries){var i=this._createEntries(t.headerEntries,"djs-popup-header");t.container.appendChild(i)}if(t.entries){var o=this._createEntries(t.entries,"djs-popup-body");t.container.appendChild(o)}return this._attachContainer(t.container,r,e.cursor),this},r.prototype.close=function(){this.isOpen()&&(this._unbindHandlers(),p(this._current.container),this._current.container=null)},r.prototype.isOpen=function(){return!!this._current.container},r.prototype.trigger=function(e){e.preventDefault();var t=e.delegateTarget||e.target,n=l(t,d),r=this._getEntry(n);if(r.action)return r.action.call(null,e,r)},r.prototype._getEntry=function(e){var t={id:e},n=a(this._current.entries,t)||a(this._current.headerEntries,t);if(!n)throw new Error("entry not found");return n},r.prototype._createContainer=function(){var e=c('<div class="djs-popup">'),t=this._current.position,n=this._current.className;return o(e.style,{position:"absolute",left:t.x+"px",top:t.y+"px",visibility:"hidden"}),u(e).add(n),e},r.prototype._attachContainer=function(e,t,n){var r=this;s.bind(e,".entry","click",function(e){r.trigger(e)});var i=this._canvas.zoom();e.style.transformOrigin="top left",e.style.transform="scale("+i+")",t.appendChild(e),n&&this._assureIsInbounds(e,n),this._bindHandlers()},r.prototype._assureIsInbounds=function(e,t){var n,r,i=this._canvas,a=i._container.getBoundingClientRect(),s=e.offsetLeft,c=e.offsetTop,u=e.scrollWidth,l=e.scrollHeight,p={},d={x:t.x-a.left,y:t.y-a.top};s+u>a.width&&(p.x=!0),c+l>a.height&&(p.y=!0),p.x&&p.y?(n=d.x-u+"px",r=d.y-l+"px"):p.x?(n=d.x-u+"px",r=d.y+"px"):p.y&&d.y<l?(n=d.x+"px",r="10px"):p.y&&(n=d.x+"px",r=d.y-l+"px"),o(e.style,{left:n,top:r},{visibility:"visible","z-index":1e3})},r.prototype._createEntries=function(e,t){var n=c("<div>"),r=this;return u(n).add(t),i(e,function(e){var t=r._createEntry(e,n);n.appendChild(t)}),n},r.prototype._createEntry=function(e){if(!e.id)throw new Error("every entry must have the id property set");var t=c("<div>"),n=u(t);if(n.add("entry"),e.className&&n.add(e.className),l(t,d,e.id),e.label){var r=c("<span>");r.textContent=e.label,t.appendChild(r)}return e.imageUrl&&t.appendChild(c('<img src="'+e.imageUrl+'" />')),e.active===!0&&n.add("active"),e.disabled===!0&&n.add("disabled"),e.title&&(t.title=e.title),t},r.prototype._bindHandlers=function(){function e(){n.close()}var t=this._eventBus,n=this;t.once("contextPad.close",e),t.once("canvas.viewbox.changing",e),t.once("commandStack.changed",e)},r.prototype._unbindHandlers=function(){function e(){n.close()}var t=this._eventBus,n=this;t.off("contextPad.close",e),t.off("canvas.viewbox.changed",e),t.off("commandStack.changed",e)},t.exports=r},{270:270,271:271,398:398,410:410,411:411,414:414,415:415,419:419}],194:[function(e,t,n){"use strict";t.exports={__init__:["popupMenu"],popupMenu:["type",e(193)]}},{193:193}],195:[function(e,t,n){"use strict";function r(e){this._modeling=e}t.exports=r,r.$inject=["modeling"],r.prototype.replaceElement=function(e,t,n){var r=this._modeling,i=null;return e.waypoints||(t.x=Math.ceil(e.x+(t.width||e.width)/2),t.y=Math.ceil(e.y+(t.height||e.height)/2),i=r.replaceShape(e,t,n)),i}},{}],196:[function(e,t,n){"use strict";t.exports={__init__:["replace"],replace:["type",e(195)]}},{195:195}],197:[function(e,t,n){"use strict";function r(e,t,n,r){this._dragging=r,this._rules=t;var i=this;e.on("resize.start",function(e){var t=e.context,n=t.resizeConstraints,r=t.minBounds;void 0===n&&(void 0===r&&(r=i.computeMinResizeBox(t)),t.resizeConstraints={min:s(r)})}),e.on("resize.move",function(e){var t,n,r=e.context,o=r.shape,s=r.direction,c=r.resizeConstraints;t={x:e.dx,y:e.dy},r.delta=t,n=a.resizeBounds(o,s,t),r.newBounds=a.ensureConstraints(n,c),r.canExecute=i.canResize(r)}),e.on("resize.end",function(e){var t=e.context,r=t.shape,i=t.canExecute,o=t.newBounds;i&&(o=c(o),n.resizeShape(r,o))})}var i=e(404),o=e(398),a=e(199),s=e(222).asTRBL,c=e(222).roundBounds,u=10;r.prototype.canResize=function(e){var t=this._rules,n=i(e,["newBounds","shape","delta","direction"]);return t.allowed("shape.resize",n)},r.prototype.activate=function(e,t,n){var r,i,a=this._dragging;if("string"==typeof n&&(n={direction:n}),r=o({shape:t},n),i=r.direction,!i)throw new Error("must provide a direction (nw|se|ne|sw)");a.init(e,"resize",{autoActivate:!0,cursor:"resize-"+(/nw|se/.test(i)?"nwse":"nesw"),data:{shape:t,context:r}})},r.prototype.computeMinResizeBox=function(e){var t,n,r=e.shape,i=e.direction;return t=e.minDimensions||{width:u,height:u},n=a.computeChildrenBBox(r,e.childrenBoxPadding),a.getMinResizeBounds(i,r,t,n)},r.$inject=["eventBus","rules","modeling","dragging"],t.exports=r},{199:199,222:222,398:398,404:404}],198:[function(e,t,n){"use strict";function r(e,t,n,r){this._resize=r,this._canvas=t;var o=this;e.on("selection.changed",function(e){var t=e.newSelection;o.removeResizers(),1===t.length&&i(t,o.addResizer,o)}),e.on("shape.changed",function(e){var t=e.element;n.isSelected(t)&&(o.removeResizers(),o.addResizer(t))})}var i=e(271),o=e(248),a=-2,s=5,c=20,u="djs-resizer",l=e(416),p=e(242).isPrimaryButton,d=e(222).asTRBL;r.prototype.makeDraggable=function(e,t,n){function r(t){p(t)&&i.activate(t,e,n)}var i=this._resize;l.bind(t.node,"mousedown",r),l.bind(t.node,"touchstart",r)},r.prototype._createResizer=function(e,t,n,r,i){var l=this._getResizersParent(),p=l.group().addClass(u).addClass(u+"-"+e.id).addClass(u+"-"+i),d=-s+a;p.rect(d,d,s,s).addClass(u+"-visual"),p.rect(d,d,c,c).addClass(u+"-hit");var f=(new o.Matrix).translate(t,n).rotate(r,0,0);return p.transform(f),p},r.prototype.createResizer=function(e,t){var n,r=d(e);n="nw"===t?this._createResizer(e,r.left,r.top,0,t):"ne"===t?this._createResizer(e,r.right,r.top,90,t):"se"===t?this._createResizer(e,r.right,r.bottom,180,t):this._createResizer(e,r.left,r.bottom,270,t),this.makeDraggable(e,n,t)},r.prototype.addResizer=function(e){var t=this._resize;t.canResize({shape:e})&&(this.createResizer(e,"nw"),this.createResizer(e,"ne"),this.createResizer(e,"se"),this.createResizer(e,"sw"))},r.prototype.removeResizers=function(){var e=this._getResizersParent(),t=e.selectAll("."+u);i(t,function(e){e.remove()})},r.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")},r.$inject=["eventBus","canvas","selection","resize"],t.exports=r},{222:222,242:242,248:248,271:271,416:416}],199:[function(e,t,n){"use strict";function r(e){return"number"==typeof e}function i(e,t,n){var i=t[e],o=n.min&&n.min[e],a=n.max&&n.max[e];return r(o)&&(i=(/top|left/.test(e)?p:l)(i,o)),r(a)&&(i=(/top|left/.test(e)?l:p)(i,a)),i}function o(e,t){return"undefined"!=typeof e?e:d}function a(e,t){var n,r,i,a;return"object"==typeof t?(n=o(t.left),r=o(t.right),i=o(t.top),a=o(t.bottom)):n=r=i=a=o(t),{x:e.x-n,y:e.y-i,width:e.width+n+r,height:e.height+i+a}}function s(e){return!e.waypoints&&"label"!==e.type}function c(e,t){var n;if(n=void 0===e.length?u(e.children,s):e,n.length)return a(f(n),t)}var u=e(269),l=Math.max,p=Math.min,d=20,f=e(235).getBBox,h=e(222).asTRBL,m=e(222).asBounds;t.exports.substractTRBL=function(e,t){return{top:e.top-t.top,right:e.right-t.right,bottom:e.bottom-t.bottom,left:e.left-t.left}},t.exports.resizeBounds=function(e,t,n){var r=n.x,i=n.y;switch(t){case"nw":return{x:e.x+r,y:e.y+i,width:e.width-r,height:e.height-i};case"sw":return{x:e.x+r,y:e.y,width:e.width-r,height:e.height+i};case"ne":return{x:e.x,y:e.y+i,width:e.width+r,height:e.height-i};case"se":return{x:e.x,y:e.y,width:e.width+r,height:e.height+i};default:throw new Error("unrecognized direction: "+t)}},t.exports.resizeTRBL=function(e,t){return{x:e.x+(t.left||0),y:e.y+(t.top||0),width:e.width-(t.left||0)+(t.right||0),height:e.height-(t.top||0)+(t.bottom||0)}},t.exports.reattachPoint=function(e,t,n){var r=e.width/t.width,i=e.height/t.height;return{x:Math.round(t.x+t.width/2)-Math.floor((e.x+e.width/2-n.x)/r),
y:Math.round(t.y+t.height/2)-Math.floor((e.y+e.height/2-n.y)/i)}},t.exports.ensureConstraints=function(e,t){if(!t)return e;var n=h(e);return m({top:i("top",n,t),right:i("right",n,t),bottom:i("bottom",n,t),left:i("left",n,t)})},t.exports.getMinResizeBounds=function(e,t,n,r){var i=h(t),o={top:/n/.test(e)?i.bottom-n.height:i.top,left:/w/.test(e)?i.right-n.width:i.left,bottom:/s/.test(e)?i.top+n.height:i.bottom,right:/e/.test(e)?i.left+n.width:i.right},a=r?h(r):o,s={top:p(o.top,a.top),left:p(o.left,a.left),bottom:l(o.bottom,a.bottom),right:l(o.right,a.right)};return m(s)},t.exports.addPadding=a,t.exports.computeChildrenBBox=c},{222:222,235:235,269:269}],200:[function(e,t,n){"use strict";function r(e,t){this._canvas=t;var n=this;e.on("resize.start",s,function(e){var r=e.context,i=r.shape;t.addMarker(i,o),n.create(r)}),e.on("resize.move",s,function(e){var t=e.context;n.update(t)}),e.on("resize.cleanup",function(e){var r=e.context,i=r.shape;t.removeMarker(i,o),n.remove(r)})}var i=e(248),o="djs-resizing",a="resize-not-ok",s=500;r.prototype.create=function(e){var t,n=this._canvas.getDefaultLayer(),r=e.shape;t=e.frame=i.create("rect",{class:"djs-resize-overlay",width:r.width+10,height:r.height+10,x:r.x-5,y:r.y-5}),t.appendTo(n)},r.prototype.update=function(e){var t=e.frame,n=e.newBounds;n.width>5&&t.attr({x:n.x,width:n.width}),n.height>5&&t.attr({y:n.y,height:n.height}),t[e.canExecute?"removeClass":"addClass"](a)},r.prototype.remove=function(e){e.frame&&e.frame.remove()},r.$inject=["eventBus","canvas"],t.exports=r},{248:248}],201:[function(e,t,n){t.exports={__depends__:[e(204),e(142)],__init__:["resize","resizeVisuals","resizeHandles"],resize:["type",e(197)],resizeVisuals:["type",e(200)],resizeHandles:["type",e(198)]}},{142:142,197:197,198:198,200:200,204:204}],202:[function(e,t,n){"use strict";function r(e){o.call(this,e),this.init()}var i=e(257),o=e(102);r.$inject=["eventBus"],i(r,o),t.exports=r,r.prototype.addRule=function(e,t,n){var r=this;"string"==typeof e&&(e=[e]),e.forEach(function(e){r.canExecute(e,t,function(e,t,r){return n(e)},!0)})},r.prototype.init=function(){}},{102:102,257:257}],203:[function(e,t,n){"use strict";function r(e){this._commandStack=e.get("commandStack",!1)}r.$inject=["injector"],t.exports=r,r.prototype.allowed=function(e,t){var n=!0,r=this._commandStack;return r&&(n=r.canExecute(e,t)),void 0===n||n}},{}],204:[function(e,t,n){t.exports={__init__:["rules"],rules:["type",e(203)]}},{203:203}],205:[function(e,t,n){"use strict";function r(e,t,n,i){this._open=!1,this._results=[],this._eventMaps=[],this._canvas=e,this._eventBus=t,this._overlays=n,this._selection=i,this._container=d(r.BOX_HTML),this._searchInput=u(r.INPUT_SELECTOR,this._container),this._resultsContainer=u(r.RESULTS_CONTAINER_SELECTOR,this._container),this._canvas.getContainer().appendChild(this._container),t.on(["canvas.destroy","diagram.destroy"],this.close,this)}function i(e){var t=6,n=e.width+2*t,i=e.height+2*t,o=["width: "+n+"px","height: "+i+"px"].join("; ");return{position:{bottom:i-t,right:n-t},show:!0,html:'<div style="'+o+'" class="'+r.OVERLAY_CLASS+'"></div>'}}function o(e,t,n){var r=a(t),i=d(n);i.innerHTML=r,e.appendChild(i)}function a(e){var t="";return e.forEach(function(e){t+=e.matched?'<strong class="'+r.RESULT_HIGHLIGHT_CLASS+'">'+e.matched+"</strong>":e.normal}),""!==t?t:null}var s=e(412),c=e(414),u=e(418),l=e(411),p=e(410),d=e(415),f=e(235).getBBox;r.$inject=["canvas","eventBus","overlays","selection"],r.prototype._bindEvents=function(){function e(e,n,r,i){t._eventMaps.push({el:e,type:r,listener:c.bind(e,n,r,i)})}var t=this;e(document,"html","click",function(e){t.close()},!0),e(this._container,r.INPUT_SELECTOR,"click",function(e){e.stopPropagation(),e.delegateTarget.focus()}),e(this._container,r.RESULT_SELECTOR,"mouseover",function(e){e.stopPropagation(),t._scrollToNode(e.delegateTarget),t._preselect(e.delegateTarget)}),e(this._container,r.RESULT_SELECTOR,"click",function(e){e.stopPropagation(),t._select(e.delegateTarget)}),e(this._container,r.INPUT_SELECTOR,"keydown",function(e){38===e.keyCode&&e.preventDefault(),40===e.keyCode&&e.preventDefault()}),e(this._container,r.INPUT_SELECTOR,"keyup",function(e){if(27===e.keyCode)return t.close();if(13===e.keyCode){var n=t._getCurrentResult();return n?t._select(n):t.close()}return 38===e.keyCode?t._scrollToDirection(!0):40===e.keyCode?t._scrollToDirection():void(37!==e.keyCode&&39!==e.keyCode&&t._search(e.delegateTarget.value))})},r.prototype._unbindEvents=function(){this._eventMaps.forEach(function(e){c.unbind(e.el,e.type,e.listener)})},r.prototype._search=function(e){var t=this;if(this._clearResults(),e&&""!==e){var n=this._searchProvider.find(e);if(n.length){n.forEach(function(e){var n=e.element.id,r=t._createResultNode(e,n);t._results[n]={element:e.element,node:r}});var i=u(r.RESULT_SELECTOR,this._resultsContainer);this._scrollToNode(i),this._preselect(i)}}},r.prototype._scrollToDirection=function(e){var t=this._getCurrentResult();if(t){var n=e?t.previousElementSibling:t.nextElementSibling;n&&(this._scrollToNode(n),this._preselect(n))}},r.prototype._scrollToNode=function(e){if(e&&e!==this._getCurrentResult()){var t=e.offsetTop,n=this._resultsContainer.scrollTop,r=t-this._resultsContainer.clientHeight+e.clientHeight;t<n?this._resultsContainer.scrollTop=t:n<r&&(this._resultsContainer.scrollTop=r)}},r.prototype._clearResults=function(){s(this._resultsContainer),this._results=[],this._resetOverlay(),this._eventBus.fire("searchPad.cleared")},r.prototype._getCurrentResult=function(){return u(r.RESULT_SELECTED_SELECTOR,this._resultsContainer)},r.prototype._createResultNode=function(e,t){var n=d(r.RESULT_HTML);return e.primaryTokens.length>0&&o(n,e.primaryTokens,r.RESULT_PRIMARY_HTML),o(n,e.secondaryTokens,r.RESULT_SECONDARY_HTML),p(n,r.RESULT_ID_ATTRIBUTE,t),this._resultsContainer.appendChild(n),n},r.prototype.registerProvider=function(e){this._searchProvider=e},r.prototype.open=function(){if(!this._searchProvider)throw new Error("no search provider registered");this.isOpen()||(this._bindEvents(),this._open=!0,l(this._container).add("open"),this._searchInput.focus(),this._eventBus.fire("searchPad.opened"))},r.prototype.close=function(){this.isOpen()&&(this._unbindEvents(),this._open=!1,l(this._container).remove("open"),this._clearResults(),this._searchInput.value="",this._searchInput.blur(),this._resetOverlay(),this._eventBus.fire("searchPad.closed"))},r.prototype.toggle=function(){this.isOpen()?this.close():this.open()},r.prototype.isOpen=function(){return this._open},r.prototype._preselect=function(e){var t=this._getCurrentResult();if(e!==t){t&&l(t).remove(r.RESULT_SELECTED_CLASS);var n=p(e,r.RESULT_ID_ATTRIBUTE),i=this._results[n].element;l(e).add(r.RESULT_SELECTED_CLASS),this._resetOverlay(i),this._centerViewbox(i),this._selection.select(i),this._eventBus.fire("searchPad.preselected",i)}},r.prototype._select=function(e){var t=p(e,r.RESULT_ID_ATTRIBUTE),n=this._results[t].element;this.close(),this._resetOverlay(),this._centerViewbox(n),this._selection.select(n),this._eventBus.fire("searchPad.selected",n)},r.prototype._centerViewbox=function(e){var t=this._canvas.viewbox(),n=f(e),r={x:n.x+n.width/2-t.outer.width/2,y:n.y+n.height/2-t.outer.height/2,width:t.outer.width,height:t.outer.height};this._canvas.viewbox(r),this._canvas.zoom(t.scale)},r.prototype._resetOverlay=function(e){if(this._overlayId&&this._overlays.remove(this._overlayId),e){var t=f(e),n=i(t);this._overlayId=this._overlays.add(e,n)}},t.exports=r,r.CONTAINER_SELECTOR=".djs-search-container",r.INPUT_SELECTOR=".djs-search-input input",r.RESULTS_CONTAINER_SELECTOR=".djs-search-results",r.RESULT_SELECTOR=".djs-search-result",r.RESULT_SELECTED_CLASS="djs-search-result-selected",r.RESULT_SELECTED_SELECTOR="."+r.RESULT_SELECTED_CLASS,r.RESULT_ID_ATTRIBUTE="data-result-id",r.RESULT_HIGHLIGHT_CLASS="djs-search-highlight",r.OVERLAY_CLASS="djs-search-overlay",r.BOX_HTML='<div class="djs-search-container djs-draggable djs-scrollable"><div class="djs-search-input"><input type="text"/></div><div class="djs-search-results"></div></div>',r.RESULT_HTML='<div class="djs-search-result"></div>',r.RESULT_PRIMARY_HTML='<div class="djs-search-result-primary"></div>',r.RESULT_SECONDARY_HTML='<p class="djs-search-result-secondary"></p>'},{235:235,410:410,411:411,412:412,414:414,415:415,418:418}],206:[function(e,t,n){t.exports={__depends__:[e(190),e(210)],searchPad:["type",e(205)]}},{190:190,205:205,210:210}],207:[function(e,t,n){"use strict";function r(e){this._eventBus=e,this._selectedElements=[];var t=this;e.on(["shape.remove","connection.remove"],function(e){var n=e.element;t.deselect(n)}),e.on(["diagram.clear"],function(e){t.select(null)})}var i=e(389),o=e(271);r.$inject=["eventBus"],t.exports=r,r.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(n!==-1){var r=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:r,newSelection:t})}},r.prototype.get=function(){return this._selectedElements},r.prototype.isSelected=function(e){return this._selectedElements.indexOf(e)!==-1},r.prototype.select=function(e,t){var n=this._selectedElements,r=n.slice();i(e)||(e=e?[e]:[]),t?o(e,function(e){n.indexOf(e)===-1&&n.push(e)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:r,newSelection:n})}},{271:271,389:389}],208:[function(e,t,n){"use strict";function r(e,t,n,r){e.on("create.end",500,function(e){e.context.canExecute&&t.select(e.context.shape)}),e.on("connect.end",500,function(e){e.context.canExecute&&e.context.target&&t.select(e.context.target)}),e.on("shape.move.end",500,function(e){var n=e.previousSelection||[],i=r.get(e.context.shape.id),a=o(n,function(e){return i.id===e.id});a||t.select(i)}),e.on("element.click",function(e){var r=e.element;r===n.getRootElement()&&(r=null);var o=t.isSelected(r),a=t.get().length>1,s=i(e);return o&&a?s?t.deselect(r):t.select(r):void(o?t.deselect(r):t.select(r,s))})}var i=e(242).hasPrimaryModifier,o=e(270);r.$inject=["eventBus","selection","canvas","elementRegistry"],t.exports=r},{242:242,270:270}],209:[function(e,t,n){"use strict";function r(e,t,n,r,s){function c(e,n){t.addMarker(e,n)}function u(e,n){t.removeMarker(e,n)}this._multiSelectionBox=null,e.on("element.hover",function(e){c(e.element,o)}),e.on("element.out",function(e){u(e.element,o)}),e.on("selection.changed",function(e){function t(e){u(e,a)}function n(e){c(e,a)}var r=e.oldSelection,o=e.newSelection;i(r,function(e){o.indexOf(e)===-1&&t(e)}),i(o,function(e){r.indexOf(e)===-1&&n(e)})})}var i=e(271),o="hover",a="selected";r.$inject=["eventBus","canvas","selection","graphicsFactory","styles"],t.exports=r},{271:271}],210:[function(e,t,n){t.exports={__init__:["selectionVisuals","selectionBehavior"],__depends__:[e(150),e(188)],selection:["type",e(207)],selectionVisuals:["type",e(209)],selectionBehavior:["type",e(208)]}},{150:150,188:188,207:207,208:208,209:209}],211:[function(e,t,n){"use strict";function r(){this._targets={},this._snapOrigins={},this._snapLocations=[],this._defaultSnaps={}}function i(e){this._snapValues={}}var o=e(271),a=e(212).snapTo;r.prototype.getSnapOrigin=function(e){return this._snapOrigins[e]},r.prototype.setSnapOrigin=function(e,t){this._snapOrigins[e]=t,this._snapLocations.indexOf(e)===-1&&this._snapLocations.push(e)},r.prototype.addDefaultSnap=function(e,t){var n=this._defaultSnaps[e];n||(n=this._defaultSnaps[e]=[]),n.push(t)},r.prototype.getSnapLocations=function(){return this._snapLocations},r.prototype.setSnapLocations=function(e){this._snapLocations=e},r.prototype.pointsForTarget=function(e){var t=e.id||e,n=this._targets[t];return n||(n=this._targets[t]=new i,n.initDefaults(this._defaultSnaps)),n},t.exports=r,i.prototype.add=function(e,t){var n=this._snapValues[e];n||(n=this._snapValues[e]={x:[],y:[]}),n.x.indexOf(t.x)===-1&&n.x.push(t.x),n.y.indexOf(t.y)===-1&&n.y.push(t.y)},i.prototype.snap=function(e,t,n,r){var i=this._snapValues[t];return i&&a(e[n],i[n],r)},i.prototype.initDefaults=function(e){var t=this;o(e||{},function(e,n){o(e,function(e){t.add(n,e)})})}},{212:212,271:271}],212:[function(e,t,n){"use strict";function r(e,t,n){n=void 0===n?10:n;var r,i;for(r=0;r<t.length;r++)if(i=t[r],s(i-e)<=n)return i}function i(e){return{x:e.x,y:e.y}}function o(e,t){return!e||isNaN(e.x)||isNaN(e.y)?t:{x:c(e.x+e.width/2),y:c(e.y+e.height/2)}}function a(e){return{x:e.x+e.width,y:e.y+e.height}}var s=Math.abs,c=Math.round;t.exports.snapTo=r,t.exports.topLeft=i,t.exports.mid=o,t.exports.bottomRight=a,t.exports.isSnapped=function(e,t){var n=e.snapped;return!!n&&("string"==typeof t?n[t]:n.x&&n.y)},t.exports.setSnapped=function(e,t,n){if("string"!=typeof t)throw new Error("axis must be in [x, y]");if("number"!=typeof n&&n!==!1)throw new Error("value must be Number or false");var r,i=e[t],o=e.snapped=e.snapped||{};return n===!1?o[t]=!1:(o[t]=!0,r=n-i,e[t]+=r,e["d"+t]+=r),i}},{}],213:[function(e,t,n){"use strict";function r(e,t){this._canvas=t;var n=this;e.on(["shape.move.start","create.start"],function(e){n.initSnap(e)}),e.on(["shape.move.move","shape.move.end","create.move","create.end"],l,function(e){e.originalEvent&&e.originalEvent.ctrlKey||p(e)||n.snap(e)}),e.on(["shape.move.cleanup","create.cleanup"],function(e){n.hide()}),this._asyncHide=a(this.hide,1e3)}var i=e(269),o=e(271),a=e(280),s=e(212).mid,c=e(211),u=e(212),l=1250,p=u.isSnapped,d=u.setSnapped;r.$inject=["eventBus","canvas"],t.exports=r,r.prototype.initSnap=function(e){var t=e.context,n=t.shape,r=t.snapContext;r||(r=t.snapContext=new c);var i=s(n,e);return r.setSnapOrigin("mid",{x:i.x-e.x,y:i.y-e.y}),r},r.prototype.snap=function(e){var t=e.context,n=t.snapContext,r=t.shape,i=t.target,a=n.getSnapLocations();if(i){var s=n.pointsForTarget(i);s.initialized||(this.addTargetSnaps(s,r,i),s.initialized=!0);var c={x:p(e,"x"),y:p(e,"y")};o(a,function(t){var r=n.getSnapOrigin(t),i={x:e.x+r.x,y:e.y+r.y};if(o(["x","y"],function(e){var n;c[e]||(n=s.snap(i,t,e,7),void 0!==n&&(c[e]={value:n,originValue:n-r[e]}))}),c.x&&c.y)return!1}),this.showSnapLine("vertical",c.x&&c.x.value),this.showSnapLine("horizontal",c.y&&c.y.value),o(["x","y"],function(t){var n=c[t];"object"==typeof n&&d(e,t,n.originValue)})}},r.prototype._createLine=function(e){var t=this._canvas.getLayer("snap"),n=t.path("M0,0 L0,0").addClass("djs-snap-line");return{update:function(t){"number"!=typeof t?n.attr({display:"none"}):"horizontal"===e?n.attr({path:"M-100000,"+t+" L+100000,"+t,display:""}):n.attr({path:"M "+t+",-100000 L "+t+", +100000",display:""})}}},r.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),vertical:this._createLine("vertical")}},r.prototype.showSnapLine=function(e,t){var n=this.getSnapLine(e);n&&n.update(t),this._asyncHide()},r.prototype.getSnapLine=function(e){return this._snapLines||this._createSnapLines(),this._snapLines[e]},r.prototype.hide=function(){o(this._snapLines,function(e){e.update()})},r.prototype.addTargetSnaps=function(e,t,n){var r=this.getSiblings(t,n);o(r,function(t){e.add("mid",s(t))})},r.prototype.getSiblings=function(e,t){return t&&i(t.children,function(t){return!t.hidden&&!t.labelTarget&&!t.waypoints&&t.host!==e&&t!==e})}},{211:211,212:212,269:269,271:271,280:280}],214:[function(e,t,n){"use strict";function r(e,t,n,r,i,o){this._canvas=n,this._dragging=t,this._modeling=r,this._rules=i,this._toolManager=o;var a=this;o.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),e.on("spaceTool.selection.end",function(t){var n=t.originalEvent.target;(t.hover||n instanceof SVGElement)&&e.once("spaceTool.selection.ended",function(){a.activateMakeSpace(t.originalEvent)})}),e.on("spaceTool.move",u,function(e){var t=e.context;t.initialized||(t.initialized=a.initializeMakeSpace(e,t))}),e.on("spaceTool.end",function(t){var n=t.context,r=n.axis,i=n.direction,o=n.movingShapes,s=n.resizingShapes;if(n.initialized){var u={x:c(t.dx),y:c(t.dy)};u[d[r]]=0;var l=!0;m(s,function(e){if("w"===i&&t.x>e.x+e.width||"e"===i&&t.x<e.x||"n"===i&&t.y>e.y+e.height||"s"===i&&t.y<e.y)return void(l=!1)}),l&&a.makeSpace(o,s,u,i),e.once("spaceTool.ended",function(e){a.activateSelection(e.originalEvent,!0,!0)})}})}var i=e(216),o=e(234),a=e(242).hasPrimaryModifier,s=Math.abs,c=Math.round,u=1500,l="crosshair",p={x:"width",y:"height"},d={x:"y",y:"x"},f=e(235).selfAndAllChildren,h=e(398),m=e(271);r.$inject=["eventBus","dragging","canvas","modeling","rules","toolManager"],t.exports=r,r.prototype.activateSelection=function(e,t,n){this._dragging.init(e,"spaceTool.selection",{trapClick:!1,cursor:l,autoActivate:t,data:{context:{reactivate:n}}})},r.prototype.activateMakeSpace=function(e){this._dragging.init(e,"spaceTool",{autoActivate:!0,cursor:l,data:{context:{}}})},r.prototype.makeSpace=function(e,t,n,r){return this._modeling.createSpace(e,t,n,r)},r.prototype.initializeMakeSpace=function(e,t){var n=s(e.dx)>s(e.dy)?"x":"y",r=e["d"+n],c=e[n]-r;if(s(r)<5)return!1;r<0&&(r*=-1),a(e)&&(r*=-1);var u=this._canvas.getRootElement(),l=f(u,!0),p=this.calculateAdjustments(l,n,r,c);return h(t,p,{axis:n,direction:i.getDirection(n,r)}),o.set("resize-"+("x"===n?"ew":"ns")),!0},r.prototype.calculateAdjustments=function(e,t,n,r){var i=[],o=[],a=this._rules;return e.forEach(function(e){var s=e[t],c=s+e[p[t]];if(e.parent&&!e.waypoints)return n>0&&s>r?i.push(e):n<0&&c<r?i.push(e):s<r&&c>r&&a.allowed("shape.resize",{shape:e})?o.push(e):void 0}),{movingShapes:i,resizingShapes:o}},r.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.activateSelection()},r.prototype.isActive=function(){var e=this._dragging.context();return e&&/^spaceTool/.test(e.prefix)}},{216:216,234:234,235:235,242:242,271:271,398:398}],215:[function(e,t,n){"use strict";function r(e,t,n,r){function s(e){return t.getGraphics(e)}function c(e,t){var n=s(e),i=n.clone(),o=n.getBBox();i.attr(r.cls("djs-dragger",[],{x:o.x,y:o.y})),t.add(i)}e.on("spaceTool.selection.start",function(e){var t=n.getLayer("space"),i=e.context,o={x:"M 0,-10000 L 0,10000",y:"M -10000,0 L 10000,0"},a=t.group().attr(r.cls("djs-crosshair-group",["no-events"]));a.path(o.x).addClass("djs-crosshair"),a.path(o.y).addClass("djs-crosshair"),i.crosshairGroup=a}),e.on("spaceTool.selection.move",function(e){var t=e.context.crosshairGroup;t.translate(e.x,e.y)}),e.on("spaceTool.selection.cleanup",function(e){var t=e.context,n=t.crosshairGroup;n&&n.remove()}),e.on("spaceTool.move",a,function(e){var t=e.context,a=t.line,s=t.axis,u=t.movingShapes;if(t.initialized){if(!t.dragGroup){var l=n.getLayer("space");a=l.path("M0,0 L0,0").addClass("djs-crosshair"),t.line=a;var p=n.getDefaultLayer().group().attr(r.cls("djs-drag-group",["no-events"]));i(u,function(e){c(e,p),n.addMarker(e,o)}),t.dragGroup=p}var d={x:"M"+e.x+", -10000 L"+e.x+", 10000",y:"M -10000, "+e.y+" L 10000, "+e.y};a.attr({path:d[s],display:""});var f={x:"y",y:"x"},h={x:e.dx,y:e.dy};h[f[t.axis]]=0,t.dragGroup.translate(h.x,h.y)}}),e.on("spaceTool.cleanup",function(e){var t=e.context,r=t.movingShapes,a=t.line,s=t.dragGroup;i(r,function(e){n.removeMarker(e,o)}),s&&(a.remove(),s.remove())})}var i=e(271),o="djs-dragging",a=250;r.$inject=["eventBus","elementRegistry","canvas","styles"],t.exports=r},{271:271}],216:[function(e,t,n){"use strict";function r(e,t){if("x"===e){if(t>0)return"e";if(t<0)return"w"}if("y"===e){if(t>0)return"s";if(t<0)return"n"}return null}t.exports.getDirection=r,t.exports.resizeBounds=function(e,t,n){var r=n.x,i=n.y;switch(t){case"n":return{x:e.x,y:e.y+i,width:e.width,height:e.height-i};case"s":return{x:e.x,y:e.y,width:e.width,height:e.height+i};case"w":return{x:e.x+r,y:e.y,width:e.width-r,height:e.height};case"e":return{x:e.x,y:e.y,width:e.width+r,height:e.height};default:throw new Error("unrecognized direction: "+t)}}},{}],217:[function(e,t,n){"use strict";t.exports={__init__:["spaceToolVisuals"],__depends__:[e(142),e(204),e(219)],spaceTool:["type",e(214)],spaceToolVisuals:["type",e(215)]}},{142:142,204:204,214:214,215:215,219:219}],218:[function(e,t,n){"use strict";function r(e,t){this._eventBus=e,this._dragging=t,this._tools=[],this._active=null}var i=e(271),o=250;r.$inject=["eventBus","dragging"],t.exports=r,r.prototype.registerTool=function(e,t){var n=this._tools;if(!t)throw new Error('A tool has to be registered with it\'s "events"');n.push(e),this.bindEvents(e,t)},r.prototype.isActive=function(e){return e&&this._active===e},r.prototype.length=function(e){return this._tools.length},r.prototype.setActive=function(e){var t=this._eventBus;this._active!==e&&(this._active=e,t.fire("tool-manager.update",{tool:e}))},r.prototype.bindEvents=function(e,t){var n=this._eventBus,r=this._dragging,a=[];n.on(t.tool+".init",function(t){var n=t.context;return!n.reactivate&&this.isActive(e)?(this.setActive(null),void r.cancel()):void this.setActive(e)},this),i(t,function(e){a.push(e+".ended"),a.push(e+".canceled")}),n.on(a,o,function(e){var t=e.originalEvent;!this._active||t&&"tools"===t.target.parentElement.getAttribute("data-group")||this.setActive(null)},this)}},{271:271}],219:[function(e,t,n){"use strict";t.exports={__depends__:[e(142)],__init__:["toolManager"],toolManager:["type",e(218)]}},{142:142,218:218}],220:[function(e,t,n){"use strict";function r(){}var i=e(222).getMid;t.exports=r,r.prototype.layoutConnection=function(e,t){return t=t||{},[t.connectionStart||i(e.source),t.connectionEnd||i(e.target)]}},{222:222}],221:[function(e,t,n){"use strict";function r(e){return o({original:e.point.original||e.point},e.actual)}function i(e,t){this._elementRegistry=e,this._graphicsFactory=t}var o=e(398),a=e(222);i.$inject=["elementRegistry","graphicsFactory"],t.exports=i,i.prototype.getCroppedWaypoints=function(e,t,n){t=t||e.source,n=n||e.target;var i=this.getDockingPoint(e,t,!0),o=this.getDockingPoint(e,n),a=e.waypoints.slice(i.idx+1,o.idx);return a.unshift(r(i)),a.push(r(o)),a},i.prototype.getDockingPoint=function(e,t,n){var r,i,o,a=e.waypoints;return r=n?0:a.length-1,i=a[r],o=this._getIntersection(t,e,n),{point:i,actual:o||i,idx:r}},i.prototype._getIntersection=function(e,t,n){var r=this._getShapePath(e),i=this._getConnectionPath(t);return a.getElementLineIntersection(r,i,n)},i.prototype._getConnectionPath=function(e){return this._graphicsFactory.getConnectionPath(e)},i.prototype._getShapePath=function(e){return this._graphicsFactory.getShapePath(e)},i.prototype._getGfx=function(e){return this._elementRegistry.getGraphics(e)}},{222:222,398:398}],222:[function(e,t,n){"use strict";function r(e){return{x:Math.round(e.x),y:Math.round(e.y),width:Math.round(e.width),height:Math.round(e.height)}}function i(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function o(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function a(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}function s(e){return i({x:e.x+(e.width||0)/2,y:e.y+(e.height||0)/2})}function c(e,t,n){n=n||0,p(n)||(n={x:n,y:n});var r=o(e),i=o(t),a=r.bottom+n.y<=i.top,s=r.left-n.x>=i.right,c=r.top-n.y>=i.bottom,u=r.right+n.x<=i.left,l=a?"top":c?"bottom":null,d=u?"left":s?"right":null;return d&&l?l+"-"+d:d||l||"intersect"}function u(e,t,n){var r=l(e,t);return 1===r.length?i(r[0]):2===r.length&&f(r[0],r[1])<1?i(r[0]):r.length>1?(r=d(r,function(e){var t=Math.floor(100*e.t2)||1;return t=100-t,t=(t<10?"0":"")+t,e.segment2+"#"+t}),i(r[n?0:r.length-1])):null}function l(e,t){return h.path.intersection(e,t)}var p=e(393),d=e(277),f=e(237).pointDistance,h=e(248);t.exports.roundBounds=r,t.exports.roundPoint=i,t.exports.asTRBL=o,t.exports.asBounds=a,t.exports.getMid=s,t.exports.getOrientation=c,t.exports.getElementLineIntersection=u,t.exports.getIntersections=l},{237:237,248:248,277:277,393:393}],223:[function(e,t,n){"use strict";function r(e,t,n){return e>=t&&e<=n}function i(e,t,n){var i={x:"width",y:"height"};return r(t[e],n[e],n[e]+n[i[e]])}function o(e,t){switch(e){case"intersect":return null;case"top":case"bottom":return"v:v";case"left":case"right":return"h:h";default:return t}}var a=e(389),s=e(270),c=e(265),u=e(398),l=e(222),p=e(237),d=l.getOrientation,f=l.getMid,h=p.pointsAligned,m=p.pointInRect,g=p.pointDistance,v=20,y={"h:h":20,"v:v":20,"h:v":-10,"v:h":-10};t.exports.getBendpoints=function(e,t,n){n=n||"h:h";var r,i;if("h:v"===n)return[{x:t.x,y:e.y}];if("v:h"===n)return[{x:e.x,y:t.y}];if("h:h"===n)return r=Math.round((t.x-e.x)/2+e.x),[{x:r,y:e.y},{x:r,y:t.y}];if("v:v"===n)return i=Math.round((t.y-e.y)/2+e.y),[{x:e.x,y:i},{x:t.x,y:i}];throw new Error("unknown directions: <"+n+">: directions must be specified as {a direction}:{b direction} (direction in h|v)")},t.exports.connectPoints=function(e,t,n){var r=[];return h(e,t)||(r=this.getBendpoints(e,t,n)),r.unshift(e),r.push(t),r},t.exports.connectRectangles=function(e,t,n,r,i){var a=i&&i.preferredLayouts||[],s=c(a,"straight")[0]||"h:h",u=y[s]||0,l=d(e,t,u),p=o(l,s);if(n=n||f(e),r=r||f(t),p){if("h:h"===p)switch(l){case"top-right":case"right":case"bottom-right":n={original:n,x:e.x,y:n.y},r={original:r,x:t.x+t.width,y:r.y};break;case"top-left":case"left":case"bottom-left":n={original:n,x:e.x+e.width,y:n.y},r={original:r,x:t.x,y:r.y}}if("v:v"===p)switch(l){case"top-left":case"top":case"top-right":n={original:n,x:n.x,y:e.y+e.height},r={original:r,x:r.x,y:t.y};break;case"bottom-left":case"bottom":case"bottom-right":n={original:n,x:n.x,y:e.y},r={original:r,x:r.x,y:t.y+t.height}}return this.connectPoints(n,r,p)}},t.exports.repairConnection=function(e,t,n,r,i,o){a(n)&&(i=n,o=r,n=f(e),r=f(t)),o=u({preferredLayouts:[]},o),i=i||[];var s,c=o.preferredLayouts,l=c.indexOf("straight")!==-1;return l&&(s=this.layoutStraight(e,t,n,r,o)),s||(o.connectionEnd?(s=this._repairConnectionSide(t,e,r,i.slice().reverse()),s=s&&s.reverse()):o.connectionStart?s=this._repairConnectionSide(e,t,n,i):i&&i.length&&(s=i)),s||(s=this.connectRectangles(e,t,n,r,o)),s},t.exports.layoutStraight=function(e,t,n,r,o){var a,s,c={};return s=d(e,t),/^(top|bottom|left|right)$/.test(s)?(/top|bottom/.test(s)&&(a="x"),/left|right/.test(s)&&(a="y"),"target"===o.preserveDocking?i(a,r,e)?(c[a]=r[a],[{x:void 0!==c.x?c.x:n.x,y:void 0!==c.y?c.y:n.y,original:{x:void 0!==c.x?c.x:n.x,y:void 0!==c.y?c.y:n.y}},{x:r.x,y:r.y}]):null:i(a,n,t)?(c[a]=n[a],[{x:n.x,y:n.y},{x:void 0!==c.x?c.x:r.x,y:void 0!==c.y?c.y:r.y,original:{x:void 0!==c.x?c.x:r.x,y:void 0!==c.y?c.y:r.y}}]):null):null},t.exports._repairConnectionSide=function(e,t,n,r){function i(e,t,n){return n.length<3||!(n.length>4)&&!!s(n,function(e,t){var r=n[t-1];return r&&g(e,r)<3})}function o(e,t,n){var r=h(t,e);switch(r){case"v":return{x:e.x,y:n.y};case"h":return{x:n.x,y:e.y}}return{x:e.x,y:e.y}}function a(e,t,n){var r;for(r=e.length-2;0!==r;r--)if(m(e[r],t,v)||m(e[r],n,v))return e.slice(r);return e}if(i(e,t,r))return null;var c,u=r[0],l=r.slice();return l[0]=n,l[1]=o(l[1],u,n),c=a(l,e,t),c!==l?this._repairConnectionSide(e,t,n,c):l}},{222:222,237:237,265:265,270:270,389:389,398:398}],224:[function(e,t,n){"use strict";function r(){Object.defineProperty(this,"businessObject",{writable:!0}),p.bind(this,"parent"),d.bind(this,"label"),h.bind(this,"outgoing"),m.bind(this,"incoming")}function i(){r.call(this),p.bind(this,"children"),f.bind(this,"host"),f.bind(this,"attachers")}function o(){i.call(this)}function a(){i.call(this),d.bind(this,"labelTarget")}function s(){r.call(this),h.bind(this,"source"),m.bind(this,"target")}var c=e(398),u=e(257),l=e(432),p=new l({name:"children",enumerable:!0,collection:!0},{name:"parent"}),d=new l({name:"label",enumerable:!0},{name:"labelTarget"}),f=new l({name:"attachers",collection:!0},{name:"host"}),h=new l({name:"outgoing",collection:!0},{name:"source"}),m=new l({name:"incoming",collection:!0},{name:"target"});u(i,r),u(o,i),u(a,i),u(s,r);var g={connection:s,shape:i,label:a,root:o};t.exports.create=function(e,t){var n=g[e];if(!n)throw new Error("unknown type: <"+e+">");return c(new n,t)},t.exports.Base=r,t.exports.Root=o,t.exports.Shape=i,t.exports.Connection=s,t.exports.Label=a},{257:257,398:398,432:432}],225:[function(e,t,n){"use strict";function r(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function i(e,t){function n(e){var n=f.start,i=l.toPoint(e),c=s(i,n);if(!f.dragging&&r(c)>p&&(f.dragging=!0,a.install(),o.set("grab")),f.dragging){var u=f.last||f.start;c=s(i,u),t.scroll({dx:c.x,dy:c.y}),f.last=i}e.preventDefault()}function i(e){c.unbind(document,"mousemove",n),c.unbind(document,"mouseup",i),f=null,o.unset(),l.stopEvent(e)}function d(e){u(e.target,".djs-draggable")||e.button||e.ctrlKey||e.shiftKey||e.altKey||(f={start:l.toPoint(e)},c.bind(document,"mousemove",n),c.bind(document,"mouseup",i),l.stopEvent(e))}var f,h=t._container;c.bind(h,"mousedown",d)}var o=e(234),a=e(231),s=e(241).substract,c=e(416),u=e(413),l=e(236),p=15;i.$inject=["eventBus","canvas"],t.exports=i},{231:231,234:234,236:236,241:241,413:413,416:416}],226:[function(e,t,n){t.exports={__init__:["moveCanvas"],moveCanvas:["type",e(225)]}},{225:225}],227:[function(e,t,n){"use strict";function r(e,t,n){this._enabled=!1,this._canvas=t,this._container=t._container,this._handleWheel=d(this._handleWheel,this);var r=!n||n.enabled!==!1,i=this;e.on("canvas.init",function(e){i._init(r)})}var i=e(416),o=e(413),a=e(242).hasPrimaryModifier,s=e(242).hasSecondaryModifier,c=e(243).isMac,u=e(228).getStepRange,l=e(228).cap,p=e(241).log10,d=e(279),f={min:.2,max:4},h=10;r.$inject=["eventBus","canvas","config.zoomScroll"],t.exports=r,r.prototype.scroll=function(e){this._canvas.scroll(e)},r.prototype.reset=function(){this._canvas.zoom("fit-viewport")},r.prototype.zoom=function(e,t){var n=this._canvas,r=n.zoom(!1),i=Math.pow(1+Math.abs(e),e>0?1:-1);n.zoom(l(f,r*i),t)},r.prototype._handleWheel=function(e){if(!o(e.target,".djs-scrollable",!0)){var t=this._container;e.preventDefault();var n,r=a(e),i=s(e);if(r||i){n=c?0===e.deltaMode?1.25:50:0===e.deltaMode?.025:.5;var u={};i?u.dx=n*(e.deltaX||e.deltaY):u.dy=n*e.deltaY,this.scroll(u)}else{n=0===e.deltaMode?.025:.5;var l=t.getBoundingClientRect(),p={x:e.clientX-l.left,y:e.clientY-l.top};this.zoom(e.deltaY*n/-5,p)}}},r.prototype.stepZoom=function(e,t){var n=this._canvas,r=u(f,h);e=e>0?1:-1;var i=p(n.zoom()),o=Math.round(i/r)*r;o+=r*e;var a=Math.pow(10,o);n.zoom(l(f,a),t)},r.prototype.toggle=function(e){var t=this._container,n=this._handleWheel,r=this._enabled;return"undefined"==typeof e&&(e=!r),r!==e&&i[e?"bind":"unbind"](t,"wheel",n,!1),this._enabled=e,e},r.prototype._init=function(e){this.toggle(e)}},{228:228,241:241,242:242,243:243,279:279,413:413,416:416}],228:[function(e,t,n){"use strict";var r=e(241).log10;t.exports.getStepRange=function(e,t){var n=r(e.min),i=r(e.max),o=Math.abs(n)+Math.abs(i);return o/t},t.exports.cap=function(e,t){return Math.max(e.min,Math.min(e.max,t))}},{241:241}],229:[function(e,t,n){t.exports={__init__:["zoomScroll"],zoomScroll:["type",e(227)]}},{227:227}],230:[function(e,t,n){"use strict";function r(e,t,n){var r=a(t),i=a(n),c=s(e,r),u={x:c.x*(n.width/t.width),y:c.y*(n.height/t.height)};return o({x:i.x+u.x,y:i.y+u.y})}function i(e,t,n){var r=a(e),i=a(t),c=a(n),u=s(e,r),l=s(r,i),p={x:l.x*(n.width/t.width),y:l.y*(n.height/t.height)},d={x:c.x+p.x,y:c.y+p.y};return o({x:d.x+u.x-e.x,y:d.y+u.y-e.y})}var o=e(222).roundPoint,a=e(244).center,s=e(244).delta;t.exports.getNewAttachPoint=r,t.exports.getNewAttachShapeDelta=i},{222:222,244:244}],231:[function(e,t,n){"use strict";function r(e){s(e),i(!1)}function i(e){a[e?"bind":"unbind"](document.body,"click",r,!0)}function o(){return i(!0),function(){i(!1)}}var a=e(416),s=e(236).stopEvent;t.exports.install=o},{236:236,416:416}],232:[function(e,t,n){"use strict";t.exports.remove=function(e,t){if(!e||!t)return-1;var n=e.indexOf(t);return n!==-1&&e.splice(n,1),n},t.exports.add=function(e,t,n){if(e&&t){"number"!=typeof n&&(n=-1);var r=e.indexOf(t);if(r!==-1){if(r===n)return;if(n===-1)return;e.splice(r,1)}n!==-1?e.splice(n,0,t):e.push(t)}},t.exports.indexOf=function(e,t){return e&&t?e.indexOf(t):-1}},{}],233:[function(e,t,n){"use strict";function r(e){var t={},n=[],r=[],o=[];return i(e,function(e){var r=e.parent;t[r.id]||(t[r.id]=[]),n.indexOf(r.id)===-1&&n.push(r.id),
t[r.id].push(e)}),i(n,function(e){i(t[e],function(e){t[e.id]&&o.push(e.id)})}),i(n,function(e){var n=o.indexOf(e);n===-1&&(r=r.concat(t[e]))}),r}var i=e(271);t.exports.getTopLevel=r},{271:271}],234:[function(e,t,n){"use strict";var r=e(411),i=/^djs-cursor-.*$/;t.exports.set=function(e){var t=r(document.body);t.removeMatching(i),e&&t.add("djs-cursor-"+e)},t.exports.unset=function(){this.set(null)},t.exports.has=function(e){var t=r(document.body);return t.has("djs-cursor-"+e)}},{411:411}],235:[function(e,t,n){"use strict";function r(e,t,n){var r=!n||e.indexOf(t)===-1;return r&&e.push(t),r}function i(e,t,n){n=n||0,d(e)||(e=[e]),m(e,function(e,r){var o=t(e,r,n);d(o)&&o.length&&i(o,t,n+1)})}function o(e,t,n){var o=[],a=[];return i(e,function(e,i,s){r(o,e,t);var c=e.children;if((n===-1||s<n)&&c&&r(a,c,t))return c}),o}function a(e,t){return o(e,!t,1)}function s(e,t){return o(e,!t,-1)}function c(e){function t(e){r[e.source.id]&&r[e.target.id]&&(r[e.id]=e),o[e.source.id]&&o[e.target.id]&&(c[e.id]=s[e.id]=e),a[e.id]=e}function n(e){return s[e.id]=e,e.waypoints?void(c[e.id]=a[e.id]=e):(o[e.id]=e,m(e.incoming,t),m(e.outgoing,t),e.children)}var r=h(e,function(e){return e.id}),o={},a={},s={},c={};return i(e,n),{allShapes:o,allConnections:a,topLevel:r,enclosedConnections:c,enclosedElements:s}}function u(e,t){t=!!t,d(e)||(e=[e]);var n,r,i,o;return m(e,function(e){var a=e;e.waypoints&&!t&&(a=u(e.waypoints,!0));var s=a.x,c=a.y,l=a.height||0,p=a.width||0;(s<n||void 0===n)&&(n=s),(c<r||void 0===r)&&(r=c),(s+p>i||void 0===i)&&(i=s+p),(c+l>o||void 0===o)&&(o=c+l)}),{x:n,y:r,height:o-r,width:i-n}}function l(e,t){var n={};return m(e,function(e){var r=e;r.waypoints&&(r=u(r)),!f(t.y)&&r.x>t.x&&(n[e.id]=e),!f(t.x)&&r.y>t.y&&(n[e.id]=e),r.x>t.x&&r.y>t.y&&(f(t.width)&&f(t.height)&&r.width+r.x<t.width+t.x&&r.height+r.y<t.height+t.y?n[e.id]=e:f(t.width)&&f(t.height)||(n[e.id]=e))}),n}function p(e){return"waypoints"in e?"connection":"x"in e?"shape":"root"}var d=e(389),f=e(392),h=e(272),m=e(271);t.exports.add=r,t.exports.eachElement=i,t.exports.selfAndDirectChildren=a,t.exports.selfAndAllChildren=s,t.exports.getBBox=u,t.exports.getEnclosedElements=l,t.exports.getClosure=c,t.exports.getType=p},{271:271,272:272,389:389,392:392}],236:[function(e,t,n){arguments[4][95][0].apply(n,arguments)},{95:95}],237:[function(e,t,n){"use strict";function r(e,t){return e&&t?Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)):-1}function i(e,t){return Math.abs(e.x-t.x)<=o?"h":Math.abs(e.y-t.y)<=o&&"v"}t.exports.pointDistance=r,t.exports.pointsOnLine=function(e,t,n){if(!e||!t||!n)return!1;var i=(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x),o=r(e,t);return Math.abs(i/o)<5};var o=2;t.exports.pointsAligned=i,t.exports.pointInRect=function(e,t,n){return n=n||0,e.x>t.x-n&&e.y>t.y-n&&e.x<t.x+t.width+n&&e.y<t.y+t.height+n},t.exports.getMidPoint=function(e,t){return{x:Math.round(e.x+(t.x-e.x)/2),y:Math.round(e.y+(t.y-e.y)/2)}}},{}],238:[function(e,t,n){"use strict";function r(e){return e.select(".djs-visual")}function i(e){return e.parent().children()[1]}function o(e){return r(e).select("*").getBBox()}t.exports.getVisual=r,t.exports.getChildren=i,t.exports.getBBox=o},{}],239:[function(e,t,n){"use strict";function r(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(1e9*Math.random())+"-"}t.exports=r,r.prototype.next=function(){return this._prefix+ ++this._counter}},{}],240:[function(e,t,n){"use strict";function r(e,t){var n=e.x,r=e.y;return[["M",n,r],["m",0,-t],["a",t,t,0,1,1,0,2*t],["a",t,t,0,1,1,0,-2*t],["z"]]}function i(e){var t=[];return e.forEach(function(e,n){t.push([0===n?"M":"L",e.x,e.y])}),t}function o(e,t){var n,r;for(n=0;r=e[n];n++)if(s(r,t)<=p)return{point:e[n],bendpoint:!0,index:n};return null}function a(e,t){var n,o=c.path.intersection(r(t,p),i(e)),a=o[0],s=o[o.length-1];return a?a!==s?a.segment2!==s.segment2?(n=l(a.segment2,s.segment2)-1,{point:e[n],bendpoint:!0,index:n}):{point:{x:u(a.x+s.x)/2,y:u(a.y+s.y)/2},index:a.segment2}:{point:{x:u(a.x),y:u(a.y)},index:a.segment2}:null}var s=e(237).pointDistance,c=e(248),u=Math.round,l=Math.max,p=10;t.exports.getApproxIntersection=function(e,t){return o(e,t)||a(e,t)}},{237:237,248:248}],241:[function(e,t,n){"use strict";function r(e){return Math.log(e)/Math.log(10)}function i(e,t){return{x:e.x-t.x,y:e.y-t.y}}t.exports.log10=r,t.exports.substract=i},{}],242:[function(e,t,n){arguments[4][96][0].apply(n,arguments)},{236:236,243:243,96:96}],243:[function(e,t,n){arguments[4][97][0].apply(n,arguments)},{97:97}],244:[function(e,t,n){"use strict";function r(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function i(e,t){return{x:e.x-t.x,y:e.y-t.y}}t.exports.center=r,t.exports.delta=i},{}],245:[function(e,t,n){"use strict";t.exports.saveClear=function(e,t){if("function"!=typeof t)throw new Error("removeFn iterator must be a function");if(e){for(var n;n=e[0];)t(n);return e}}},{}],246:[function(e,t,n){arguments[4][98][0].apply(n,arguments)},{248:248,98:98}],247:[function(e,t,n){"use strict";function r(e){var t=e.split("-");return{horizontal:t[0]||"center",vertical:t[1]||"top"}}function i(e){return p(e)?d({top:0,left:0,right:0,bottom:0},e):{top:e,left:e,right:e,bottom:e}}function o(e,t){return t.textContent=e,f(t.getBBox(),["width","height"])}function a(e,t,n){for(var r,i=e.shift(),a=i;;){if(r=o(a,n),r.width=a?r.width:0," "===a||""===a||r.width<Math.round(t)||a.length<4)return s(e,a,i,r);a=u(a,r.width,t)}}function s(e,t,n,r){if(t.length<n.length){var i=e[0]||"",o=n.slice(t.length).trim();i=/-\s*$/.test(o)?o+i.replace(/^\s+/,""):o+" "+i,e[0]=i}return{width:r.width,height:r.height,text:t}}function c(e,t){var n,r=e.split(/(\s|-)/g),i=[],o=0;if(r.length>1)for(;n=r.shift();){if(!(n.length+o<t)){"-"===n&&i.pop();break}i.push(n),o+=n.length}return i.join("")}function u(e,t,n){var r=Math.max(e.length*(n/t),1),i=c(e,r);return i||(i=e.slice(0,Math.max(Math.round(r-1),1))),i}function l(e){this._config=d({},{size:x,padding:y,style:{},align:"center-top"},e||{})}var p=e(393),d=e(398),f=e(404),h=e(271),m=e(274),g=e(401),v=e(248),y=0,x={width:150,height:50};l.prototype.createText=function(e,t,n){for(var o=g({},this._config.size,n.box||{}),s=g({},this._config.style,n.style||{}),c=r(n.align||this._config.align),u=i(void 0!==n.padding?n.padding:this._config.padding),l=t.split(/\r?\n/g),p=[],d=o.width-u.left-u.right,f=e.paper.text(0,0,"").attr(s).node;l.length;)p.push(a(l,d,f));var y,x,_=m(p,function(e,t,n){return e+t.height},0);switch(c.vertical){case"middle":y=(o.height-_)/2-p[0].height/4;break;default:y=u.top}var b=e.text().attr(s);return h(p,function(e){switch(y+=e.height,c.horizontal){case"left":x=u.left;break;case"right":x=d-u.right-e.width;break;default:x=Math.max((d-e.width)/2+u.left,0)}var t=v.create("tspan",{x:x,y:y}).node;t.textContent=e.text,b.append(t)}),f.parentNode.removeChild(f),b},t.exports=l},{248:248,271:271,274:274,393:393,398:398,401:401,404:404}],248:[function(e,t,n){arguments[4][99][0].apply(n,arguments)},{436:436,99:99}],249:[function(e,t,n){var r=function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=function(){var e=Array.prototype.slice.call(arguments);1===e.length&&r(e[0])&&(e=e[0]);var t=e.pop();return t.$inject=e,t},o=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,a=/\/\*([^\*]*)\*\//m,s=function(e){if("function"!=typeof e)throw new Error('Cannot annotate "'+e+'". Expected a function!');var t=e.toString().match(o);return t[1]&&t[1].split(",").map(function(e){return t=e.match(a),t?t[1].trim():e.trim()})||[]};n.annotate=i,n.parse=s,n.isArray=r},{}],250:[function(e,t,n){t.exports={annotate:e(249).annotate,Module:e(252),Injector:e(251)}},{249:249,251:251,252:252}],251:[function(e,t,n){var r=e(252),i=e(249).parse,o=e(249).annotate,a=e(249).isArray,s=function(e,t){t=t||{get:function(e,t){if(n.push(e),t===!1)return null;throw p('No provider for "'+e+'"!')}};var n=[],c=this._providers=Object.create(t._providers||null),u=this._instances=Object.create(null),l=u.injector=this,p=function(e){var t=n.join(" -> ");return n.length=0,new Error(t?e+" (Resolving: "+t+")":e)},d=function(e,r){if(!c[e]&&e.indexOf(".")!==-1){for(var i=e.split("."),o=d(i.shift());i.length;)o=o[i.shift()];return o}if(Object.hasOwnProperty.call(u,e))return u[e];if(Object.hasOwnProperty.call(c,e)){if(n.indexOf(e)!==-1)throw n.push(e),p("Cannot resolve circular dependency!");return n.push(e),u[e]=c[e][0](c[e][1]),n.pop(),u[e]}return t.get(e,r)},f=function(e){var t=Object.create(e.prototype),n=h(e,t);return"object"==typeof n?n:t},h=function(e,t){if("function"!=typeof e){if(!a(e))throw new Error('Cannot invoke "'+e+'". Expected a function!');e=o(e.slice())}var n=e.$inject&&e.$inject||i(e),r=n.map(function(e){return d(e)});return e.apply(t,r)},m=function(e){return o(function(t){return e.get(t)})},g=function(e,t){if(t&&t.length){var n,r,i,o,a=Object.create(null),u=Object.create(null),p=[],d=[],f=[];for(var h in c)n=c[h],t.indexOf(h)!==-1&&("private"===n[2]?(r=p.indexOf(n[3]),r===-1?(i=n[3].createChild([],t),o=m(i),p.push(n[3]),d.push(i),f.push(o),a[h]=[o,h,"private",i]):a[h]=[f[r],h,"private",d[r]]):a[h]=[n[2],n[1]],u[h]=!0),"factory"!==n[2]&&"type"!==n[2]||!n[1].$scope||t.forEach(function(e){n[1].$scope.indexOf(e)!==-1&&(a[h]=[n[2],n[1]],u[e]=!0)});t.forEach(function(e){if(!u[e])throw new Error('No provider for "'+e+'". Cannot use provider from the parent!')}),e.unshift(a)}return new s(e,l)},v={factory:h,type:f,value:function(e){return e}};e.forEach(function(e){function t(e,t){return"value"!==e&&a(t)&&(t=o(t.slice())),t}if(e instanceof r)e.forEach(function(e){var n=e[0],r=e[1],i=e[2];c[n]=[v[r],t(r,i),r]});else if("object"==typeof e)if(e.__exports__){var n=Object.keys(e).reduce(function(t,n){return"__"!==n.substring(0,2)&&(t[n]=e[n]),t},Object.create(null)),i=new s((e.__modules__||[]).concat([n]),l),u=o(function(e){return i.get(e)});e.__exports__.forEach(function(e){c[e]=[u,e,"private",i]})}else Object.keys(e).forEach(function(n){if("private"===e[n][2])return void(c[n]=e[n]);var r=e[n][0],i=e[n][1];c[n]=[v[r],t(r,i),r]})}),this.get=d,this.invoke=h,this.instantiate=f,this.createChild=g};t.exports=s},{249:249,252:252}],252:[function(e,t,n){var r=function(){var e=[];this.factory=function(t,n){return e.push([t,"factory",n]),this},this.value=function(t,n){return e.push([t,"value",n]),this},this.type=function(t,n){return e.push([t,"type",n]),this},this.forEach=function(t){e.forEach(t)}};t.exports=r},{}],253:[function(e,t,n){function r(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var r=n[1];if("body"==r){var i=t.createElement("html");return i.innerHTML=e,i.removeChild(i.lastChild)}var o=a[r]||a._default,s=o[0],c=o[1],u=o[2],i=t.createElement("div");for(i.innerHTML=c+e+u;s--;)i=i.lastChild;if(i.firstChild==i.lastChild)return i.removeChild(i.firstChild);for(var l=t.createDocumentFragment();i.firstChild;)l.appendChild(i.removeChild(i.firstChild));return l}t.exports=r;var i,o=!1;"undefined"!=typeof document&&(i=document.createElement("div"),i.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',o=!i.getElementsByTagName("link").length,i=void 0);var a={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:o?[1,"X<div>","</div>"]:[0,"",""]};a.td=a.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],a.option=a.optgroup=[1,'<select multiple="multiple">',"</select>"],a.thead=a.tbody=a.colgroup=a.caption=a.tfoot=[1,"<table>","</table>"],a.polyline=a.ellipse=a.polygon=a.circle=a.text=a.line=a.path=a.rect=a.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},{}],254:[function(t,n,r){!function(t){var r,i,o="0.4.2",a="hasOwnProperty",s=/[\.\/]/,c=/\s*,\s*/,u="*",l=function(e,t){return e-t},p={n:{}},d=function(){for(var e=0,t=this.length;e<t;e++)if("undefined"!=typeof this[e])return this[e]},f=function(){for(var e=this.length;--e;)if("undefined"!=typeof this[e])return this[e]},h=function(e,t){e=String(e);var n,o=i,a=Array.prototype.slice.call(arguments,2),s=h.listeners(e),c=0,u=[],p={},m=[],g=r;m.firstDefined=d,m.lastDefined=f,r=e,i=0;for(var v=0,y=s.length;v<y;v++)"zIndex"in s[v]&&(u.push(s[v].zIndex),s[v].zIndex<0&&(p[s[v].zIndex]=s[v]));for(u.sort(l);u[c]<0;)if(n=p[u[c++]],m.push(n.apply(t,a)),i)return i=o,m;for(v=0;v<y;v++)if(n=s[v],"zIndex"in n)if(n.zIndex==u[c]){if(m.push(n.apply(t,a)),i)break;do if(c++,n=p[u[c]],n&&m.push(n.apply(t,a)),i)break;while(n)}else p[n.zIndex]=n;else if(m.push(n.apply(t,a)),i)break;return i=o,r=g,m};h._events=p,h.listeners=function(e){var t,n,r,i,o,a,c,l,d=e.split(s),f=p,h=[f],m=[];for(i=0,o=d.length;i<o;i++){for(l=[],a=0,c=h.length;a<c;a++)for(f=h[a].n,n=[f[d[i]],f[u]],r=2;r--;)t=n[r],t&&(l.push(t),m=m.concat(t.f||[]));h=l}return m},h.on=function(e,t){if(e=String(e),"function"!=typeof t)return function(){};for(var n=e.split(c),r=0,i=n.length;r<i;r++)!function(e){for(var n,r=e.split(s),i=p,o=0,a=r.length;o<a;o++)i=i.n,i=i.hasOwnProperty(r[o])&&i[r[o]]||(i[r[o]]={n:{}});for(i.f=i.f||[],o=0,a=i.f.length;o<a;o++)if(i.f[o]==t){n=!0;break}!n&&i.f.push(t)}(n[r]);return function(e){+e==+e&&(t.zIndex=+e)}},h.f=function(e){var t=[].slice.call(arguments,1);return function(){h.apply(null,[e,null].concat(t).concat([].slice.call(arguments,0)))}},h.stop=function(){i=1},h.nt=function(e){return e?new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(r):r},h.nts=function(){return r.split(s)},h.off=h.unbind=function(e,t){if(!e)return void(h._events=p={n:{}});var n=e.split(c);if(n.length>1)for(var r=0,i=n.length;r<i;r++)h.off(n[r],t);else{n=e.split(s);var o,l,d,r,i,f,m,g=[p];for(r=0,i=n.length;r<i;r++)for(f=0;f<g.length;f+=d.length-2){if(d=[f,1],o=g[f].n,n[r]!=u)o[n[r]]&&d.push(o[n[r]]);else for(l in o)o[a](l)&&d.push(o[l]);g.splice.apply(g,d)}for(r=0,i=g.length;r<i;r++)for(o=g[r];o.n;){if(t){if(o.f){for(f=0,m=o.f.length;f<m;f++)if(o.f[f]==t){o.f.splice(f,1);break}!o.f.length&&delete o.f}for(l in o.n)if(o.n[a](l)&&o.n[l].f){var v=o.n[l].f;for(f=0,m=v.length;f<m;f++)if(v[f]==t){v.splice(f,1);break}!v.length&&delete o.n[l].f}}else{delete o.f;for(l in o.n)o.n[a](l)&&o.n[l].f&&delete o.n[l].f}o=o.n}}},h.once=function(e,t){var n=function(){return h.unbind(e,n),t.apply(this,arguments)};return h.on(e,n)},h.version=o,h.toString=function(){return"You are running Eve "+o},"undefined"!=typeof n&&n.exports?n.exports=h:"function"==typeof e&&e.amd?e("eve",[],function(){return h}):t.eve=h}(this)},{}],255:[function(e,t,n){var r=t.exports=function(e,t){if(t||(t=16),void 0===e&&(e=128),e<=0)return"0";for(var n=Math.log(Math.pow(2,e))/Math.log(t),i=2;n===1/0;i*=2)n=Math.log(Math.pow(2,e/i))/Math.log(t)*i;for(var o=n-Math.floor(n),a="",i=0;i<Math.floor(n);i++){var s=Math.floor(Math.random()*t).toString(t);a=s+a}if(o){var c=Math.pow(t,o),s=Math.floor(Math.random()*c).toString(t);a=s+a}var u=parseInt(a,t);return u!==1/0&&u>=Math.pow(2,e)?r(e,t):a};r.rack=function(e,t,n){var i=function(i){var a=0;do{if(a++>10){if(!n)throw new Error("too many ID collisions, use more bits");e+=n}var s=r(e,t)}while(Object.hasOwnProperty.call(o,s));return o[s]=i,s},o=i.hats={};return i.get=function(e){return i.hats[e]},i.set=function(e,t){return i.hats[e]=t,i},i.bits=e||128,i.base=t||16,i}},{}],256:[function(e,t,n){"use strict";function r(e){return this instanceof r?(e=e||[128,36,1],void(this._seed=e.length?i.rack(e[0],e[1],e[2]):e)):new r(e)}var i=e(255);t.exports=r,r.prototype.next=function(e){return this._seed(e||!0)},r.prototype.nextPrefixed=function(e,t){var n;do n=e+this.next(!0);while(this.assigned(n));return this.claim(n,t),n},r.prototype.claim=function(e,t){this._seed.set(e,t||!0)},r.prototype.assigned=function(e){return this._seed.get(e)||!1},r.prototype.unclaim=function(e){delete this._seed.hats[e]},r.prototype.clear=function(){var e,t=this._seed.hats;for(e in t)this.unclaim(e)}},{255:255}],257:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],258:[function(e,t,n){var r=e(348),i=r();t.exports=i},{348:348}],259:[function(e,t,n){function r(e,t,n){var r=e?e.length:0;return n&&o(e,t,n)&&(t=!1),r?i(e,t):[]}var i=e(308),o=e(368);t.exports=r},{308:308,368:368}],260:[function(e,t,n){var r=e(313),i=e(335),o=e(345),a=e(366),s=e(282),c=s(function(e){for(var t=e.length,n=t,s=Array(h),c=r,u=!0,l=[];n--;){var p=e[n]=a(p=e[n])?p:[];s[n]=u&&p.length>=120?o(n&&p):null}var d=e[0],f=-1,h=d?d.length:0,m=s[0];e:for(;++f<h;)if(p=d[f],(m?i(m,p):c(l,p,0))<0){for(var n=t;--n;){var g=s[n];if((g?i(g,p):c(e[n],p,0))<0)continue e}m&&m.push(p),l.push(p)}return l});t.exports=c},{282:282,313:313,335:335,345:345,366:366}],261:[function(e,t,n){function r(e){var t=e?e.length:0;return t?e[t-1]:void 0}t.exports=r},{}],262:[function(e,t,n){var r=e(308),i=e(331),o=e(282),a=o(function(e){return i(r(e,!1,!0))});t.exports=a},{282:282,308:308,331:331}],263:[function(e,t,n){function r(e,t,n,r){var c=e?e.length:0;return c?(null!=t&&"boolean"!=typeof t&&(r=n,n=a(e,t,r)?void 0:t,t=!1),n=null==n?n:i(n,r,3),t?s(e,n):o(e,n)):[]}var i=e(296),o=e(331),a=e(368),s=e(383);t.exports=r},{296:296,331:331,368:368,383:383}],264:[function(e,t,n){t.exports=e(263)},{263:263}],265:[function(e,t,n){var r=e(302),i=e(366),o=e(282),a=o(function(e,t){return i(e)?r(e,t):[]});t.exports=a},{282:282,302:302,366:366}],266:[function(e,t,n){function r(e){if(c(e)&&!s(e)&&!(e instanceof i)){if(e instanceof o)return e;if(p.call(e,"__chain__")&&p.call(e,"__wrapped__"))return u(e)}return new o(e)}var i=e(283),o=e(284),a=e(317),s=e(389),c=e(372),u=e(386),l=Object.prototype,p=l.hasOwnProperty;r.prototype=a.prototype,t.exports=r},{283:283,284:284,317:317,372:372,386:386,389:389}],267:[function(e,t,n){t.exports=e(276)},{276:276}],268:[function(e,t,n){function r(e,t,n){var r=s(e)?i:a;return n&&c(e,t,n)&&(t=void 0),"function"==typeof t&&void 0===n||(t=o(t,n,3)),r(e,t)}var i=e(288),o=e(296),a=e(304),s=e(389),c=e(368);t.exports=r},{288:288,296:296,304:304,368:368,389:389}],269:[function(e,t,n){function r(e,t,n){var r=s(e)?i:a;return t=o(t,n,3),r(e,t)}var i=e(289),o=e(296),a=e(305),s=e(389);t.exports=r},{289:289,296:296,305:305,389:389}],270:[function(e,t,n){var r=e(303),i=e(347),o=i(r);t.exports=o},{303:303,347:347}],271:[function(e,t,n){var r=e(287),i=e(303),o=e(349),a=o(r,i);t.exports=a},{287:287,303:303,349:349}],272:[function(e,t,n){var r=e(340),i=Object.prototype,o=i.hasOwnProperty,a=r(function(e,t,n){o.call(e,n)?e[n].push(t):e[n]=[t]});t.exports=a},{340:340}],273:[function(e,t,n){function r(e,t,n){var r=s(e)?i:a;return t=o(t,n,3),r(e,t)}var i=e(290),o=e(296),a=e(318),s=e(389);t.exports=r},{290:290,296:296,318:318,389:389}],274:[function(e,t,n){var r=e(292),i=e(303),o=e(352),a=o(r,i);t.exports=a},{292:292,303:303,352:352}],275:[function(e,t,n){function r(e){var t=e?i(e):0;return o(t)?t:a(e).length}var i=e(359),o=e(371),a=e(399);t.exports=r},{359:359,371:371,399:399}],276:[function(e,t,n){function r(e,t,n){var r=s(e)?i:a;return n&&c(e,t,n)&&(t=void 0),"function"==typeof t&&void 0===n||(t=o(t,n,3)),r(e,t)}var i=e(293),o=e(296),a=e(328),s=e(389),c=e(368);t.exports=r},{293:293,296:296,328:328,368:368,389:389}],277:[function(e,t,n){function r(e,t,n){if(null==e)return[];n&&c(e,t,n)&&(t=void 0);var r=-1;t=i(t,n,3);var u=o(e,function(e,n,i){return{criteria:t(e,n,i),index:++r,value:e}});return a(u,s)}var i=e(296),o=e(318),a=e(329),s=e(337),c=e(368);t.exports=r},{296:296,318:318,329:329,337:337,368:368}],278:[function(e,t,n){var r=e(361),i=r(Date,"now"),o=i||function(){return(new Date).getTime()};t.exports=o},{361:361}],279:[function(e,t,n){var r=e(353),i=e(380),o=e(282),a=1,s=32,c=o(function(e,t,n){var o=a;if(n.length){var u=i(n,c.placeholder);o|=s}return r(e,o,t,n,u)});c.placeholder={},t.exports=c},{282:282,353:353,380:380}],280:[function(e,t,n){function r(e,t,n){function r(){v&&clearTimeout(v),f&&clearTimeout(f),x=0,f=v=y=void 0}function c(t,n){n&&clearTimeout(n),f=v=y=void 0,t&&(x=o(),h=e.apply(g,d),v||f||(d=g=void 0))}function u(){var e=t-(o()-m);e<=0||e>t?c(y,f):v=setTimeout(u,e)}function l(){c(b,v)}function p(){if(d=arguments,m=o(),g=this,y=b&&(v||!w),_===!1)var n=w&&!v;else{f||w||(x=m);var r=_-(m-x),i=r<=0||r>_;i?(f&&(f=clearTimeout(f)),x=m,h=e.apply(g,d)):f||(f=setTimeout(l,r))}return i&&v?v=clearTimeout(v):v||t===_||(v=setTimeout(u,t)),n&&(i=!0,h=e.apply(g,d)),!i||v||f||(d=g=void 0),h}var d,f,h,m,g,v,y,x=0,_=!1,b=!0;if("function"!=typeof e)throw new TypeError(a);if(t=t<0?0:+t||0,n===!0){var w=!0;b=!1}else i(n)&&(w=!!n.leading,_="maxWait"in n&&s(+n.maxWait||0,t),b="trailing"in n?!!n.trailing:b);return p.cancel=r,p}var i=e(393),o=e(278),a="Expected a function",s=Math.max;t.exports=r},{278:278,393:393}],281:[function(e,t,n){var r=e(301),i=e(282),o=i(function(e,t){return r(e,1,t)});t.exports=o},{282:282,301:301}],282:[function(e,t,n){function r(e,t){if("function"!=typeof e)throw new TypeError(i);return t=o(void 0===t?e.length-1:+t||0,0),function(){for(var n=arguments,r=-1,i=o(n.length-t,0),a=Array(i);++r<i;)a[r]=n[t+r];switch(t){case 0:return e.call(this,a);case 1:return e.call(this,n[0],a);case 2:return e.call(this,n[0],n[1],a)}var s=Array(t+1);for(r=-1;++r<t;)s[r]=n[r];return s[t]=a,e.apply(this,s)}}var i="Expected a function",o=Math.max;t.exports=r},{}],283:[function(e,t,n){function r(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=a,this.__views__=[]}var i=e(300),o=e(317),a=Number.POSITIVE_INFINITY;r.prototype=i(o.prototype),r.prototype.constructor=r,t.exports=r},{300:300,317:317}],284:[function(e,t,n){function r(e,t,n){this.__wrapped__=e,this.__actions__=n||[],this.__chain__=!!t}var i=e(300),o=e(317);r.prototype=i(o.prototype),r.prototype.constructor=r,t.exports=r},{300:300,317:317}],285:[function(e,t,n){(function(n){function r(e){var t=e?e.length:0;for(this.data={hash:s(null),set:new a};t--;)this.push(e[t])}var i=e(336),o=e(361),a=o(n,"Set"),s=o(Object,"create");r.prototype.push=i,t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{336:336,361:361}],286:[function(e,t,n){function r(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}t.exports=r},{}],287:[function(e,t,n){function r(e,t){for(var n=-1,r=e.length;++n<r&&t(e[n],n,e)!==!1;);return e}t.exports=r},{}],288:[function(e,t,n){function r(e,t){for(var n=-1,r=e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}t.exports=r},{}],289:[function(e,t,n){function r(e,t){for(var n=-1,r=e.length,i=-1,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[++i]=a)}return o}t.exports=r},{}],290:[function(e,t,n){function r(e,t){for(var n=-1,r=e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}t.exports=r},{}],291:[function(e,t,n){function r(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}t.exports=r},{}],292:[function(e,t,n){function r(e,t,n,r){var i=-1,o=e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}t.exports=r},{}],293:[function(e,t,n){function r(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}t.exports=r},{}],294:[function(e,t,n){function r(e,t,n){for(var r=-1,o=i(t),a=o.length;++r<a;){var s=o[r],c=e[s],u=n(c,t[s],s,e,t);(u===u?u===c:c!==c)&&(void 0!==c||s in e)||(e[s]=u)}return e}var i=e(399);t.exports=r},{399:399}],295:[function(e,t,n){function r(e,t){return null==t?e:i(t,o(t),e)}var i=e(299),o=e(399);t.exports=r},{299:299,399:399}],296:[function(e,t,n){function r(e,t,n){var r=typeof e;return"function"==r?void 0===t?e:a(e,t,n):null==e?s:"object"==r?i(e):void 0===t?c(e):o(e,t)}var i=e(319),o=e(320),a=e(333),s=e(407),c=e(409);t.exports=r},{319:319,320:320,333:333,407:407,409:409}],297:[function(e,t,n){function r(e,t,n,h,m,g,v){var x;if(n&&(x=m?n(e,h,m):n(e)),void 0!==x)return x;if(!d(e))return e;var _=p(e);if(_){if(x=c(e),!t)return i(e,x)}else{var w=L.call(e),E=w==y;if(w!=b&&w!=f&&(!E||m))return B[w]?u(e,w,t):m?e:{};if(x=l(E?{}:e),!t)return a(x,e)}g||(g=[]),v||(v=[]);for(var C=g.length;C--;)if(g[C]==e)return v[C];return g.push(e),v.push(x),(_?o:s)(e,function(i,o){x[o]=r(i,t,n,o,e,g,v)}),x}var i=e(286),o=e(287),a=e(295),s=e(311),c=e(363),u=e(364),l=e(365),p=e(389),d=e(393),f="[object Arguments]",h="[object Array]",m="[object Boolean]",g="[object Date]",v="[object Error]",y="[object Function]",x="[object Map]",_="[object Number]",b="[object Object]",w="[object RegExp]",E="[object Set]",C="[object String]",S="[object WeakMap]",T="[object ArrayBuffer]",M="[object Float32Array]",P="[object Float64Array]",A="[object Int8Array]",R="[object Int16Array]",k="[object Int32Array]",N="[object Uint8Array]",I="[object Uint8ClampedArray]",D="[object Uint16Array]",O="[object Uint32Array]",B={};B[f]=B[h]=B[T]=B[m]=B[g]=B[M]=B[P]=B[A]=B[R]=B[k]=B[_]=B[b]=B[w]=B[C]=B[N]=B[I]=B[D]=B[O]=!0,B[v]=B[y]=B[x]=B[E]=B[S]=!1;var j=Object.prototype,L=j.toString;t.exports=r},{286:286,287:287,295:295,311:311,363:363,364:364,365:365,389:389,393:393}],298:[function(e,t,n){function r(e,t){if(e!==t){var n=null===e,r=void 0===e,i=e===e,o=null===t,a=void 0===t,s=t===t;if(e>t&&!o||!i||n&&!a&&s||r&&s)return 1;if(e<t&&!n||!s||o&&!r&&i||a&&i)return-1}return 0}t.exports=r},{}],299:[function(e,t,n){function r(e,t,n){n||(n={});for(var r=-1,i=t.length;++r<i;){var o=t[r];n[o]=e[o]}return n}t.exports=r},{}],300:[function(e,t,n){var r=e(393),i=function(){function e(){}return function(t){if(r(t)){e.prototype=t;var n=new e;e.prototype=void 0}return n||{}}}();t.exports=i},{393:393}],301:[function(e,t,n){function r(e,t,n){if("function"!=typeof e)throw new TypeError(i);return setTimeout(function(){e.apply(void 0,n)},t)}var i="Expected a function";t.exports=r},{}],302:[function(e,t,n){function r(e,t){var n=e?e.length:0,r=[];if(!n)return r;var c=-1,u=i,l=!0,p=l&&t.length>=s?a(t):null,d=t.length;p&&(u=o,l=!1,t=p);e:for(;++c<n;){var f=e[c];if(l&&f===f){for(var h=d;h--;)if(t[h]===f)continue e;r.push(f)}else u(t,f,0)<0&&r.push(f)}return r}var i=e(313),o=e(335),a=e(345),s=200;t.exports=r},{313:313,335:335,345:345}],303:[function(e,t,n){var r=e(311),i=e(342),o=i(r);t.exports=o},{311:311,342:342}],304:[function(e,t,n){function r(e,t){var n=!0;return i(e,function(e,r,i){return n=!!t(e,r,i)}),n}var i=e(303);t.exports=r},{303:303}],305:[function(e,t,n){function r(e,t){var n=[];return i(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}var i=e(303);t.exports=r},{303:303}],306:[function(e,t,n){function r(e,t,n,r){var i;return n(e,function(e,n,o){if(t(e,n,o))return i=r?n:e,!1}),i}t.exports=r},{}],307:[function(e,t,n){function r(e,t,n){for(var r=e.length,i=n?r:-1;n?i--:++i<r;)if(t(e[i],i,e))return i;return-1}t.exports=r},{}],308:[function(e,t,n){function r(e,t,n,u){u||(u=[]);for(var l=-1,p=e.length;++l<p;){var d=e[l];c(d)&&s(d)&&(n||a(d)||o(d))?t?r(d,t,n,u):i(u,d):n||(u[u.length]=d)}return u}var i=e(291),o=e(388),a=e(389),s=e(366),c=e(372);t.exports=r},{291:291,366:366,372:372,388:388,389:389}],309:[function(e,t,n){var r=e(343),i=r();t.exports=i},{343:343}],310:[function(e,t,n){function r(e,t){return i(e,t,o)}var i=e(309),o=e(400);t.exports=r},{309:309,400:400}],311:[function(e,t,n){function r(e,t){return i(e,t,o)}var i=e(309),o=e(399);t.exports=r},{309:309,399:399}],312:[function(e,t,n){function r(e,t,n){if(null!=e){void 0!==n&&n in i(e)&&(t=[n]);for(var r=0,o=t.length;null!=e&&r<o;)e=e[t[r++]];return r&&r==o?e:void 0}}var i=e(384);t.exports=r},{384:384}],313:[function(e,t,n){function r(e,t,n){if(t!==t)return i(e,n);for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}var i=e(362);t.exports=r},{362:362}],314:[function(e,t,n){function r(e,t,n,s,c,u){return e===t||(null==e||null==t||!o(e)&&!a(t)?e!==e&&t!==t:i(e,t,r,n,s,c,u))}var i=e(315),o=e(393),a=e(372);t.exports=r},{315:315,372:372,393:393}],315:[function(e,t,n){function r(e,t,n,r,d,m,g){var v=s(e),y=s(t),x=l,_=l;v||(x=h.call(e),x==u?x=p:x!=p&&(v=c(e))),y||(_=h.call(t),_==u?_=p:_!=p&&(y=c(t)));var b=x==p,w=_==p,E=x==_;if(E&&!v&&!b)return o(e,t,x);if(!d){var C=b&&f.call(e,"__wrapped__"),S=w&&f.call(t,"__wrapped__");if(C||S)return n(C?e.value():e,S?t.value():t,r,d,m,g)}if(!E)return!1;m||(m=[]),g||(g=[]);for(var T=m.length;T--;)if(m[T]==e)return g[T]==t;m.push(e),g.push(t);var M=(v?i:a)(e,t,n,r,d,m,g);return m.pop(),g.pop(),M}var i=e(354),o=e(355),a=e(356),s=e(389),c=e(396),u="[object Arguments]",l="[object Array]",p="[object Object]",d=Object.prototype,f=d.hasOwnProperty,h=d.toString;t.exports=r},{354:354,355:355,356:356,389:389,396:396}],316:[function(e,t,n){function r(e,t,n){var r=t.length,a=r,s=!n;if(null==e)return!a;for(e=o(e);r--;){var c=t[r];if(s&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++r<a;){c=t[r];var u=c[0],l=e[u],p=c[1];if(s&&c[2]){if(void 0===l&&!(u in e))return!1}else{var d=n?n(l,p,u):void 0;if(!(void 0===d?i(p,l,n,!0):d))return!1}}return!0}var i=e(314),o=e(384);t.exports=r},{314:314,384:384}],317:[function(e,t,n){function r(){}t.exports=r},{}],318:[function(e,t,n){function r(e,t){var n=-1,r=o(e)?Array(e.length):[];return i(e,function(e,i,o){r[++n]=t(e,i,o)}),r}var i=e(303),o=e(366);t.exports=r},{303:303,366:366}],319:[function(e,t,n){function r(e){var t=o(e);if(1==t.length&&t[0][2]){var n=t[0][0],r=t[0][1];return function(e){return null!=e&&(e[n]===r&&(void 0!==r||n in a(e)))}}return function(e){return i(e,t)}}var i=e(316),o=e(360),a=e(384);t.exports=r},{316:316,360:360,384:384}],320:[function(e,t,n){function r(e,t){var n=s(e),r=c(e)&&u(t),f=e+"";return e=d(e),function(s){if(null==s)return!1;var c=f;if(s=p(s),(n||!r)&&!(c in s)){if(s=1==e.length?s:i(s,a(e,0,-1)),null==s)return!1;c=l(e),s=p(s)}return s[c]===t?void 0!==t||c in s:o(t,s[c],void 0,!0)}}var i=e(312),o=e(314),a=e(327),s=e(389),c=e(369),u=e(373),l=e(261),p=e(384),d=e(385);t.exports=r},{261:261,312:312,314:314,327:327,369:369,373:373,384:384,385:385,389:389}],321:[function(e,t,n){function r(e,t,n,d,f){if(!c(e))return e;var h=s(t)&&(a(t)||l(t)),m=h?void 0:p(t);return i(m||t,function(i,a){if(m&&(a=i,i=t[a]),u(i))d||(d=[]),f||(f=[]),o(e,t,a,r,n,d,f);else{var s=e[a],c=n?n(s,i,a,e,t):void 0,l=void 0===c;l&&(c=i),void 0===c&&(!h||a in e)||!l&&(c===c?c===s:s!==s)||(e[a]=c)}}),e}var i=e(287),o=e(322),a=e(389),s=e(366),c=e(393),u=e(372),l=e(396),p=e(399);t.exports=r},{287:287,322:322,366:366,372:372,389:389,393:393,396:396,399:399}],322:[function(e,t,n){function r(e,t,n,r,p,d,f){for(var h=d.length,m=t[n];h--;)if(d[h]==m)return void(e[n]=f[h]);var g=e[n],v=p?p(g,m,n,e,t):void 0,y=void 0===v;y&&(v=m,s(m)&&(a(m)||u(m))?v=a(g)?g:s(g)?i(g):[]:c(m)||o(m)?v=o(g)?l(g):c(g)?g:{}:y=!1),d.push(m),f.push(v),y?e[n]=r(v,m,p,d,f):(v===v?v!==g:g===g)&&(e[n]=v)}var i=e(286),o=e(388),a=e(389),s=e(366),c=e(394),u=e(396),l=e(397);t.exports=r},{286:286,366:366,388:388,389:389,394:394,396:396,397:397}],323:[function(e,t,n){function r(e){return function(t){return null==t?void 0:t[e]}}t.exports=r},{}],324:[function(e,t,n){function r(e){var t=e+"";return e=o(e),function(n){return i(n,e,t)}}var i=e(312),o=e(385);t.exports=r},{312:312,385:385}],325:[function(e,t,n){function r(e,t,n,r,i){return i(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}t.exports=r},{}],326:[function(e,t,n){var r=e(407),i=e(375),o=i?function(e,t){return i.set(e,t),e}:r;t.exports=o},{375:375,407:407}],327:[function(e,t,n){function r(e,t,n){var r=-1,i=e.length;t=null==t?0:+t||0,t<0&&(t=-t>i?0:i+t),n=void 0===n||n>i?i:+n||0,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}t.exports=r},{}],328:[function(e,t,n){function r(e,t){var n;return i(e,function(e,r,i){return n=t(e,r,i),!n}),!!n}var i=e(303);t.exports=r},{303:303}],329:[function(e,t,n){function r(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}t.exports=r},{}],330:[function(e,t,n){function r(e){return null==e?"":e+""}t.exports=r},{}],331:[function(e,t,n){function r(e,t){var n=-1,r=i,c=e.length,u=!0,l=u&&c>=s,p=l?a():null,d=[];p?(r=o,u=!1):(l=!1,p=t?[]:d);e:for(;++n<c;){var f=e[n],h=t?t(f,n,e):f;
if(u&&f===f){for(var m=p.length;m--;)if(p[m]===h)continue e;t&&p.push(h),d.push(f)}else r(p,h,0)<0&&((t||l)&&p.push(h),d.push(f))}return d}var i=e(313),o=e(335),a=e(345),s=200;t.exports=r},{313:313,335:335,345:345}],332:[function(e,t,n){function r(e,t){for(var n=-1,r=t.length,i=Array(r);++n<r;)i[n]=e[t[n]];return i}t.exports=r},{}],333:[function(e,t,n){function r(e,t,n){if("function"!=typeof e)return i;if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)};case 5:return function(n,r,i,o,a){return e.call(t,n,r,i,o,a)}}return function(){return e.apply(t,arguments)}}var i=e(407);t.exports=r},{407:407}],334:[function(e,t,n){(function(e){function n(e){var t=new r(e.byteLength),n=new i(t);return n.set(new i(e)),t}var r=e.ArrayBuffer,i=e.Uint8Array;t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],335:[function(e,t,n){function r(e,t){var n=e.data,r="string"==typeof t||i(t)?n.set.has(t):n.hash[t];return r?0:-1}var i=e(393);t.exports=r},{393:393}],336:[function(e,t,n){function r(e){var t=this.data;"string"==typeof e||i(e)?t.set.add(e):t.hash[e]=!0}var i=e(393);t.exports=r},{393:393}],337:[function(e,t,n){function r(e,t){return i(e.criteria,t.criteria)||e.index-t.index}var i=e(298);t.exports=r},{298:298}],338:[function(e,t,n){function r(e,t,n){for(var r=n.length,o=-1,a=i(e.length-r,0),s=-1,c=t.length,u=Array(c+a);++s<c;)u[s]=t[s];for(;++o<r;)u[n[o]]=e[o];for(;a--;)u[s++]=e[o++];return u}var i=Math.max;t.exports=r},{}],339:[function(e,t,n){function r(e,t,n){for(var r=-1,o=n.length,a=-1,s=i(e.length-o,0),c=-1,u=t.length,l=Array(s+u);++a<s;)l[a]=e[a];for(var p=a;++c<u;)l[p+c]=t[c];for(;++r<o;)l[p+n[r]]=e[a++];return l}var i=Math.max;t.exports=r},{}],340:[function(e,t,n){function r(e,t){return function(n,r,s){var c=t?t():{};if(r=i(r,s,3),a(n))for(var u=-1,l=n.length;++u<l;){var p=n[u];e(c,p,r(p,u,n),n)}else o(n,function(t,n,i){e(c,t,r(t,n,i),i)});return c}}var i=e(296),o=e(303),a=e(389);t.exports=r},{296:296,303:303,389:389}],341:[function(e,t,n){function r(e){return a(function(t,n){var r=-1,a=null==t?0:n.length,s=a>2?n[a-2]:void 0,c=a>2?n[2]:void 0,u=a>1?n[a-1]:void 0;for("function"==typeof s?(s=i(s,u,5),a-=2):(s="function"==typeof u?u:void 0,a-=s?1:0),c&&o(n[0],n[1],c)&&(s=a<3?void 0:s,a=1);++r<a;){var l=n[r];l&&e(t,l,s)}return t})}var i=e(333),o=e(368),a=e(282);t.exports=r},{282:282,333:333,368:368}],342:[function(e,t,n){function r(e,t){return function(n,r){var s=n?i(n):0;if(!o(s))return e(n,r);for(var c=t?s:-1,u=a(n);(t?c--:++c<s)&&r(u[c],c,u)!==!1;);return n}}var i=e(359),o=e(371),a=e(384);t.exports=r},{359:359,371:371,384:384}],343:[function(e,t,n){function r(e){return function(t,n,r){for(var o=i(t),a=r(t),s=a.length,c=e?s:-1;e?c--:++c<s;){var u=a[c];if(n(o[u],u,o)===!1)break}return t}}var i=e(384);t.exports=r},{384:384}],344:[function(e,t,n){(function(n){function r(e,t){function r(){var i=this&&this!==n&&this instanceof r?o:e;return i.apply(t,arguments)}var o=i(e);return r}var i=e(346);t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{346:346}],345:[function(e,t,n){(function(n){function r(e){return s&&a?new i(e):null}var i=e(285),o=e(361),a=o(n,"Set"),s=o(Object,"create");t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{285:285,361:361}],346:[function(e,t,n){function r(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=i(e.prototype),r=e.apply(n,t);return o(r)?r:n}}var i=e(300),o=e(393);t.exports=r},{300:300,393:393}],347:[function(e,t,n){function r(e,t){return function(n,r,c){if(r=i(r,c,3),s(n)){var u=a(n,r,t);return u>-1?n[u]:void 0}return o(n,r,e)}}var i=e(296),o=e(306),a=e(307),s=e(389);t.exports=r},{296:296,306:306,307:307,389:389}],348:[function(e,t,n){function r(e){return function(t,n,r){return t&&t.length?(n=i(n,r,3),o(t,n,e)):-1}}var i=e(296),o=e(307);t.exports=r},{296:296,307:307}],349:[function(e,t,n){function r(e,t){return function(n,r,a){return"function"==typeof r&&void 0===a&&o(n)?e(n,r):t(n,i(r,a,3))}}var i=e(333),o=e(389);t.exports=r},{333:333,389:389}],350:[function(e,t,n){(function(n){function r(e,t,b,w,E,C,S,T,M,P){function A(){for(var h=arguments.length,m=h,g=Array(h);m--;)g[m]=arguments[m];if(w&&(g=o(g,w,E)),C&&(g=a(g,C,S)),I||O){var x=A.placeholder,j=l(g,x);if(h-=j.length,h<P){var L=T?i(T):void 0,F=_(P-h,0),z=I?j:void 0,U=I?void 0:j,$=I?g:void 0,V=I?void 0:g;t|=I?v:y,t&=~(I?y:v),D||(t&=~(d|f));var G=[e,t,b,$,z,V,U,L,M,F],H=r.apply(void 0,G);return c(e)&&p(H,G),H.placeholder=x,H}}var W=k?b:this,q=N?W[e]:e;return T&&(g=u(g,T)),R&&M<g.length&&(g.length=M),this&&this!==n&&this instanceof A&&(q=B||s(e)),q.apply(W,g)}var R=t&x,k=t&d,N=t&f,I=t&m,D=t&h,O=t&g,B=N?void 0:s(e);return A}var i=e(286),o=e(338),a=e(339),s=e(346),c=e(370),u=e(379),l=e(380),p=e(381),d=1,f=2,h=4,m=8,g=16,v=32,y=64,x=128,_=Math.max;t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{286:286,338:338,339:339,346:346,370:370,379:379,380:380,381:381}],351:[function(e,t,n){(function(n){function r(e,t,r,a){function s(){for(var t=-1,i=arguments.length,o=-1,l=a.length,p=Array(l+i);++o<l;)p[o]=a[o];for(;i--;)p[o++]=arguments[++t];var d=this&&this!==n&&this instanceof s?u:e;return d.apply(c?r:this,p)}var c=t&o,u=i(e);return s}var i=e(346),o=1;t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{346:346}],352:[function(e,t,n){function r(e,t){return function(n,r,s,c){var u=arguments.length<3;return"function"==typeof r&&void 0===c&&a(n)?e(n,r,s,u):o(n,i(r,c,4),s,u,t)}}var i=e(296),o=e(325),a=e(389);t.exports=r},{296:296,325:325,389:389}],353:[function(e,t,n){function r(e,t,n,r,v,y,x,_){var b=t&d;if(!b&&"function"!=typeof e)throw new TypeError(m);var w=r?r.length:0;if(w||(t&=~(f|h),r=v=void 0),w-=v?v.length:0,t&h){var E=r,C=v;r=v=void 0}var S=b?void 0:c(e),T=[e,t,n,r,v,E,C,y,x,_];if(S&&(u(T,S),t=T[1],_=T[9]),T[9]=null==_?b?0:e.length:g(_-w,0)||0,t==p)var M=o(T[0],T[2]);else M=t!=f&&t!=(p|f)||T[4].length?a.apply(void 0,T):s.apply(void 0,T);var P=S?i:l;return P(M,T)}var i=e(326),o=e(344),a=e(350),s=e(351),c=e(357),u=e(374),l=e(381),p=1,d=2,f=32,h=64,m="Expected a function",g=Math.max;t.exports=r},{326:326,344:344,350:350,351:351,357:357,374:374,381:381}],354:[function(e,t,n){function r(e,t,n,r,o,a,s){var c=-1,u=e.length,l=t.length;if(u!=l&&!(o&&l>u))return!1;for(;++c<u;){var p=e[c],d=t[c],f=r?r(o?d:p,o?p:d,c):void 0;if(void 0!==f){if(f)continue;return!1}if(o){if(!i(t,function(e){return p===e||n(p,e,r,o,a,s)}))return!1}else if(p!==d&&!n(p,d,r,o,a,s))return!1}return!0}var i=e(293);t.exports=r},{293:293}],355:[function(e,t,n){function r(e,t,n){switch(n){case i:case o:return+e==+t;case a:return e.name==t.name&&e.message==t.message;case s:return e!=+e?t!=+t:e==+t;case c:case u:return e==t+""}return!1}var i="[object Boolean]",o="[object Date]",a="[object Error]",s="[object Number]",c="[object RegExp]",u="[object String]";t.exports=r},{}],356:[function(e,t,n){function r(e,t,n,r,o,s,c){var u=i(e),l=u.length,p=i(t),d=p.length;if(l!=d&&!o)return!1;for(var f=l;f--;){var h=u[f];if(!(o?h in t:a.call(t,h)))return!1}for(var m=o;++f<l;){h=u[f];var g=e[h],v=t[h],y=r?r(o?v:g,o?g:v,h):void 0;if(!(void 0===y?n(g,v,r,o,s,c):y))return!1;m||(m="constructor"==h)}if(!m){var x=e.constructor,_=t.constructor;if(x!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof x&&x instanceof x&&"function"==typeof _&&_ instanceof _))return!1}return!0}var i=e(399),o=Object.prototype,a=o.hasOwnProperty;t.exports=r},{399:399}],357:[function(e,t,n){var r=e(375),i=e(408),o=r?function(e){return r.get(e)}:i;t.exports=o},{375:375,408:408}],358:[function(e,t,n){function r(e){for(var t=e.name+"",n=i[t],r=n?n.length:0;r--;){var o=n[r],a=o.func;if(null==a||a==e)return o.name}return t}var i=e(378);t.exports=r},{378:378}],359:[function(e,t,n){var r=e(323),i=r("length");t.exports=i},{323:323}],360:[function(e,t,n){function r(e){for(var t=o(e),n=t.length;n--;)t[n][2]=i(t[n][1]);return t}var i=e(373),o=e(403);t.exports=r},{373:373,403:403}],361:[function(e,t,n){function r(e,t){var n=null==e?void 0:e[t];return i(n)?n:void 0}var i=e(391);t.exports=r},{391:391}],362:[function(e,t,n){function r(e,t,n){for(var r=e.length,i=t+(n?0:-1);n?i--:++i<r;){var o=e[i];if(o!==o)return i}return-1}t.exports=r},{}],363:[function(e,t,n){function r(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&o.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var i=Object.prototype,o=i.hasOwnProperty;t.exports=r},{}],364:[function(e,t,n){function r(e,t,n){var r=e.constructor;switch(t){case l:return i(e);case o:case a:return new r((+e));case p:case d:case f:case h:case m:case g:case v:case y:case x:var b=e.buffer;return new r(n?i(b):b,e.byteOffset,e.length);case s:case u:return new r(e);case c:var w=new r(e.source,_.exec(e));w.lastIndex=e.lastIndex}return w}var i=e(334),o="[object Boolean]",a="[object Date]",s="[object Number]",c="[object RegExp]",u="[object String]",l="[object ArrayBuffer]",p="[object Float32Array]",d="[object Float64Array]",f="[object Int8Array]",h="[object Int16Array]",m="[object Int32Array]",g="[object Uint8Array]",v="[object Uint8ClampedArray]",y="[object Uint16Array]",x="[object Uint32Array]",_=/\w*$/;t.exports=r},{334:334}],365:[function(e,t,n){function r(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Object),new t}t.exports=r},{}],366:[function(e,t,n){function r(e){return null!=e&&o(i(e))}var i=e(359),o=e(371);t.exports=r},{359:359,371:371}],367:[function(e,t,n){function r(e,t){return e="number"==typeof e||i.test(e)?+e:-1,t=null==t?o:t,e>-1&&e%1==0&&e<t}var i=/^\d+$/,o=9007199254740991;t.exports=r},{}],368:[function(e,t,n){function r(e,t,n){if(!a(n))return!1;var r=typeof t;if("number"==r?i(n)&&o(t,n.length):"string"==r&&t in n){var s=n[t];return e===e?e===s:s!==s}return!1}var i=e(366),o=e(367),a=e(393);t.exports=r},{366:366,367:367,393:393}],369:[function(e,t,n){function r(e,t){var n=typeof e;if("string"==n&&s.test(e)||"number"==n)return!0;if(i(e))return!1;var r=!a.test(e);return r||null!=t&&e in o(t)}var i=e(389),o=e(384),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=r},{384:384,389:389}],370:[function(e,t,n){function r(e){var t=a(e),n=s[t];if("function"!=typeof n||!(t in i.prototype))return!1;if(e===n)return!0;var r=o(n);return!!r&&e===r[0]}var i=e(283),o=e(357),a=e(358),s=e(266);t.exports=r},{266:266,283:283,357:357,358:358}],371:[function(e,t,n){function r(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}var i=9007199254740991;t.exports=r},{}],372:[function(e,t,n){function r(e){return!!e&&"object"==typeof e}t.exports=r},{}],373:[function(e,t,n){function r(e){return e===e&&!i(e)}var i=e(393);t.exports=r},{393:393}],374:[function(e,t,n){function r(e,t){var n=e[1],r=t[1],m=n|r,g=m<p,v=r==p&&n==l||r==p&&n==d&&e[7].length<=t[8]||r==(p|d)&&n==l;if(!g&&!v)return e;r&c&&(e[2]=t[2],m|=n&c?0:u);var y=t[3];if(y){var x=e[3];e[3]=x?o(x,y,t[4]):i(y),e[4]=x?s(e[3],f):i(t[4])}return y=t[5],y&&(x=e[5],e[5]=x?a(x,y,t[6]):i(y),e[6]=x?s(e[5],f):i(t[6])),y=t[7],y&&(e[7]=i(y)),r&p&&(e[8]=null==e[8]?t[8]:h(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=m,e}var i=e(286),o=e(338),a=e(339),s=e(380),c=1,u=4,l=8,p=128,d=256,f="__lodash_placeholder__",h=Math.min;t.exports=r},{286:286,338:338,339:339,380:380}],375:[function(e,t,n){(function(n){var r=e(361),i=r(n,"WeakMap"),o=i&&new i;t.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{361:361}],376:[function(e,t,n){function r(e,t){e=i(e);for(var n=-1,r=t.length,o={};++n<r;){var a=t[n];a in e&&(o[a]=e[a])}return o}var i=e(384);t.exports=r},{384:384}],377:[function(e,t,n){function r(e,t){var n={};return i(e,function(e,r,i){t(e,r,i)&&(n[r]=e)}),n}var i=e(310);t.exports=r},{310:310}],378:[function(e,t,n){var r={};t.exports=r},{}],379:[function(e,t,n){function r(e,t){for(var n=e.length,r=a(t.length,n),s=i(e);r--;){var c=t[r];e[r]=o(c,n)?s[c]:void 0}return e}var i=e(286),o=e(367),a=Math.min;t.exports=r},{286:286,367:367}],380:[function(e,t,n){function r(e,t){for(var n=-1,r=e.length,o=-1,a=[];++n<r;)e[n]===t&&(e[n]=i,a[++o]=n);return a}var i="__lodash_placeholder__";t.exports=r},{}],381:[function(e,t,n){var r=e(326),i=e(278),o=150,a=16,s=function(){var e=0,t=0;return function(n,s){var c=i(),u=a-(c-t);if(t=c,u>0){if(++e>=o)return n}else e=0;return r(n,s)}}();t.exports=s},{278:278,326:326}],382:[function(e,t,n){function r(e){for(var t=c(e),n=t.length,r=n&&e.length,u=!!r&&s(r)&&(o(e)||i(e)),p=-1,d=[];++p<n;){var f=t[p];(u&&a(f,r)||l.call(e,f))&&d.push(f)}return d}var i=e(388),o=e(389),a=e(367),s=e(371),c=e(400),u=Object.prototype,l=u.hasOwnProperty;t.exports=r},{367:367,371:371,388:388,389:389,400:400}],383:[function(e,t,n){function r(e,t){for(var n,r=-1,i=e.length,o=-1,a=[];++r<i;){var s=e[r],c=t?t(s,r,e):s;r&&n===c||(n=c,a[++o]=s)}return a}t.exports=r},{}],384:[function(e,t,n){function r(e){return i(e)?e:Object(e)}var i=e(393);t.exports=r},{393:393}],385:[function(e,t,n){function r(e){if(o(e))return e;var t=[];return i(e).replace(a,function(e,n,r,i){t.push(r?i.replace(s,"$1"):n||e)}),t}var i=e(330),o=e(389),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,s=/\\(\\)?/g;t.exports=r},{330:330,389:389}],386:[function(e,t,n){function r(e){return e instanceof i?e.clone():new o(e.__wrapped__,e.__chain__,a(e.__actions__))}var i=e(283),o=e(284),a=e(286);t.exports=r},{283:283,284:284,286:286}],387:[function(e,t,n){function r(e,t,n,r){return t&&"boolean"!=typeof t&&a(e,t,n)?t=!1:"function"==typeof t&&(r=n,n=t,t=!1),"function"==typeof n?i(e,t,o(n,r,3)):i(e,t)}var i=e(297),o=e(333),a=e(368);t.exports=r},{297:297,333:333,368:368}],388:[function(e,t,n){function r(e){return o(e)&&i(e)&&s.call(e,"callee")&&!c.call(e,"callee")}var i=e(366),o=e(372),a=Object.prototype,s=a.hasOwnProperty,c=a.propertyIsEnumerable;t.exports=r},{366:366,372:372}],389:[function(e,t,n){var r=e(361),i=e(371),o=e(372),a="[object Array]",s=Object.prototype,c=s.toString,u=r(Array,"isArray"),l=u||function(e){return o(e)&&i(e.length)&&c.call(e)==a};t.exports=l},{361:361,371:371,372:372}],390:[function(e,t,n){function r(e){return i(e)&&s.call(e)==o}var i=e(393),o="[object Function]",a=Object.prototype,s=a.toString;t.exports=r},{393:393}],391:[function(e,t,n){function r(e){return null!=e&&(i(e)?l.test(c.call(e)):o(e)&&a.test(e))}var i=e(390),o=e(372),a=/^\[object .+?Constructor\]$/,s=Object.prototype,c=Function.prototype.toString,u=s.hasOwnProperty,l=RegExp("^"+c.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},{372:372,390:390}],392:[function(e,t,n){function r(e){return"number"==typeof e||i(e)&&s.call(e)==o}var i=e(372),o="[object Number]",a=Object.prototype,s=a.toString;t.exports=r},{372:372}],393:[function(e,t,n){function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}t.exports=r},{}],394:[function(e,t,n){function r(e){var t;if(!a(e)||l.call(e)!=s||o(e)||!u.call(e,"constructor")&&(t=e.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var n;return i(e,function(e,t){n=t}),void 0===n||u.call(e,n)}var i=e(310),o=e(388),a=e(372),s="[object Object]",c=Object.prototype,u=c.hasOwnProperty,l=c.toString;t.exports=r},{310:310,372:372,388:388}],395:[function(e,t,n){function r(e){return"string"==typeof e||i(e)&&s.call(e)==o}var i=e(372),o="[object String]",a=Object.prototype,s=a.toString;t.exports=r},{372:372}],396:[function(e,t,n){function r(e){return o(e)&&i(e.length)&&!!A[k.call(e)]}var i=e(371),o=e(372),a="[object Arguments]",s="[object Array]",c="[object Boolean]",u="[object Date]",l="[object Error]",p="[object Function]",d="[object Map]",f="[object Number]",h="[object Object]",m="[object RegExp]",g="[object Set]",v="[object String]",y="[object WeakMap]",x="[object ArrayBuffer]",_="[object Float32Array]",b="[object Float64Array]",w="[object Int8Array]",E="[object Int16Array]",C="[object Int32Array]",S="[object Uint8Array]",T="[object Uint8ClampedArray]",M="[object Uint16Array]",P="[object Uint32Array]",A={};A[_]=A[b]=A[w]=A[E]=A[C]=A[S]=A[T]=A[M]=A[P]=!0,A[a]=A[s]=A[x]=A[c]=A[u]=A[l]=A[p]=A[d]=A[f]=A[h]=A[m]=A[g]=A[v]=A[y]=!1;var R=Object.prototype,k=R.toString;t.exports=r},{371:371,372:372}],397:[function(e,t,n){function r(e){return i(e,o(e))}var i=e(299),o=e(400);t.exports=r},{299:299,400:400}],398:[function(e,t,n){var r=e(294),i=e(295),o=e(341),a=o(function(e,t,n){return n?r(e,t,n):i(e,t)});t.exports=a},{294:294,295:295,341:341}],399:[function(e,t,n){var r=e(361),i=e(366),o=e(393),a=e(382),s=r(Object,"keys"),c=s?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&i(e)?a(e):o(e)?s(e):[]}:a;t.exports=c},{361:361,366:366,382:382,393:393}],400:[function(e,t,n){function r(e){if(null==e)return[];c(e)||(e=Object(e));var t=e.length;t=t&&s(t)&&(o(e)||i(e))&&t||0;for(var n=e.constructor,r=-1,u="function"==typeof n&&n.prototype===e,p=Array(t),d=t>0;++r<t;)p[r]=r+"";for(var f in e)d&&a(f,t)||"constructor"==f&&(u||!l.call(e,f))||p.push(f);return p}var i=e(388),o=e(389),a=e(367),s=e(371),c=e(393),u=Object.prototype,l=u.hasOwnProperty;t.exports=r},{367:367,371:371,388:388,389:389,393:393}],401:[function(e,t,n){var r=e(321),i=e(341),o=i(r);t.exports=o},{321:321,341:341}],402:[function(e,t,n){var r=e(290),i=e(302),o=e(308),a=e(333),s=e(400),c=e(376),u=e(377),l=e(282),p=l(function(e,t){if(null==e)return{};if("function"!=typeof t[0]){var t=r(o(t),String);return c(e,i(s(e),t))}var n=a(t[0],t[1],3);return u(e,function(e,t,r){return!n(e,t,r)})});t.exports=p},{282:282,290:290,302:302,308:308,333:333,376:376,377:377,400:400}],403:[function(e,t,n){function r(e){e=o(e);for(var t=-1,n=i(e),r=n.length,a=Array(r);++t<r;){var s=n[t];a[t]=[s,e[s]]}return a}var i=e(399),o=e(384);t.exports=r},{384:384,399:399}],404:[function(e,t,n){var r=e(308),i=e(333),o=e(376),a=e(377),s=e(282),c=s(function(e,t){return null==e?{}:"function"==typeof t[0]?a(e,i(t[0],t[1],3)):o(e,r(t))});t.exports=c},{282:282,308:308,333:333,376:376,377:377}],405:[function(e,t,n){function r(e,t,n,r){var d=c(e)||p(e);if(t=o(t,r,4),null==n)if(d||l(e)){var f=e.constructor;n=d?c(e)?new f:[]:a(u(f)?f.prototype:void 0)}else n={};return(d?i:s)(e,function(e,r,i){return t(n,e,r,i)}),n}var i=e(287),o=e(296),a=e(300),s=e(311),c=e(389),u=e(390),l=e(393),p=e(396);t.exports=r},{287:287,296:296,300:300,311:311,389:389,390:390,393:393,396:396}],406:[function(e,t,n){function r(e){return i(e,o(e))}var i=e(332),o=e(399);t.exports=r},{332:332,399:399}],407:[function(e,t,n){function r(e){return e}t.exports=r},{}],408:[function(e,t,n){function r(){}t.exports=r},{}],409:[function(e,t,n){function r(e){return a(e)?i(e):o(e)}var i=e(323),o=e(324),a=e(369);t.exports=r},{323:323,324:324,369:369}],410:[function(e,t,n){t.exports=function(e,t,n){return 2==arguments.length?e.getAttribute(t):null===n?e.removeAttribute(t):(e.setAttribute(t,n),e)}},{}],411:[function(e,t,n){t.exports=e(83)},{83:83}],412:[function(e,t,n){t.exports=function(e){for(var t;e.childNodes.length;)t=e.childNodes[0],e.removeChild(t);return e}},{}],413:[function(e,t,n){t.exports=e(84)},{84:84}],414:[function(e,t,n){t.exports=e(85)},{85:85}],415:[function(e,t,n){t.exports=e(253)},{253:253}],416:[function(e,t,n){t.exports=e(86)},{86:86}],417:[function(e,t,n){t.exports=e(88)},{88:88}],418:[function(e,t,n){t.exports=e(89)},{89:89}],419:[function(e,t,n){t.exports=function(e){e.parentNode&&e.parentNode.removeChild(e)}},{}],420:[function(e,t,n){"use strict";function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}function i(e){return e.charAt(0).toLowerCase()+e.slice(1)}function o(e){return e.xml&&"lowerCase"===e.xml.tagAlias}function a(e){return e.xml&&e.xml.serialize}t.exports.aliasToName=function(e,t){return o(t)?r(e):e},t.exports.nameToAlias=function(e,t){return o(t)?i(e):e},t.exports.DEFAULT_NS_MAP={xsi:"http://www.w3.org/2001/XMLSchema-instance"};var s=t.exports.XSI_TYPE="xsi:type";t.exports.serializeAsType=function(e){return a(e)===s},t.exports.serializeAsProperty=function(e){return"property"===a(e)}},{}],421:[function(e,t,n){"use strict";function r(e){var t=e.attributes;return y(t,function(e,t,n){var r,i;return t.local?(i=T(t.name,t.prefix),r=i.name):r=t.prefix,e[r]=t.value,e},{})}function i(e,t,n){var r,i=T(t.value),o=e.ns[i.prefix||""],a=i.localName,s=o&&n.getPackage(o);s&&(r=s.xml&&s.xml.typePrefix,r&&0===a.indexOf(r)&&(a=a.slice(r.length)),t.value=s.prefix+":"+a)}function o(e,t,n){var r,a;if(r=e.uri||n){var s=t.getPackage(r);a=s?s.prefix:e.prefix,e.prefix=a,e.uri=r}x(e.attributes,function(n){n.uri===N&&"type"===n.local&&i(e,n,t),o(n,t,null)})}function a(e){return new Error(e)}function s(e){return e.$descriptor}function c(e){b(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(e){this.references.push(e)},this.addElement=function(e){if(!e)throw a("expected element");var t,n=this.elementsById,r=s(e),i=r.idProperty;if(i&&(t=e.get(i.name))){if(n[t])throw a("duplicate ID <"+t+">");n[t]=e}},this.addWarning=function(e){this.warnings.push(e)}}function u(){}function l(){}function p(){}function d(e,t){this.property=e,this.context=t}function f(e,t){this.element=t,this.propertyDesc=e}function h(){}function m(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}function g(e,t,n){this.model=e,this.context=n}function v(e){e instanceof S&&(e={model:e}),b(this,{lax:!1},e)}var y=e(274),x=e(271),_=e(270),b=e(398),w=e(281),E=e(437),C=e(435).parser,S=e(423),T=e(428).parseName,M=e(431),P=M.coerceType,A=M.isSimple,R=e(420),k=R.XSI_TYPE,N=R.DEFAULT_NS_MAP.xsi,I=R.serializeAsType,D=R.aliasToName;u.prototype.handleEnd=function(){},u.prototype.handleText=function(){},u.prototype.handleNode=function(){},l.prototype=new u,l.prototype.handleNode=function(){return this},p.prototype=new u,p.prototype.handleText=function(e){this.body=(this.body||"")+e},d.prototype=new p,d.prototype.handleNode=function(e){if(this.element)throw a("expected no sub nodes");return this.element=this.createReference(e),this},d.prototype.handleEnd=function(){this.element.id=this.body},d.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}},f.prototype=new p,f.prototype.handleEnd=function(){var e=this.body,t=this.element,n=this.propertyDesc;e=P(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)},h.prototype=Object.create(p.prototype),h.prototype.handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t},m.prototype=new h,m.prototype.addReference=function(e){this.context.addReference(e)},m.prototype.handleEnd=function(){var e=this.body,t=this.element,n=s(t),r=n.bodyProperty;r&&void 0!==e&&(e=P(r.type,e),t.set(r.name,e))},m.prototype.createElement=function(e){var t=r(e),n=this.type,i=s(n),o=this.context,a=new n({});return x(t,function(e,t){var n,r=i.propertiesByName[t];r&&r.isReference?r.isMany?(n=e.split(" "),x(n,function(e){o.addReference({element:a,property:r.ns.name,id:e})})):o.addReference({element:a,property:r.ns.name,id:e}):(r&&(e=P(r.type,e)),a.set(t,e))}),a},m.prototype.getPropertyForNode=function(e){var t,n,r,i=T(e.local,e.prefix),o=this.type,c=this.model,u=s(o),l=i.name,p=u.propertiesByName[l];if(p)return I(p)&&(r=e.attributes[k])?(t=r.value,n=c.getType(t),b({},p,{effectiveType:s(n).name})):p;var d=c.getPackage(i.prefix);if(d){if(t=i.prefix+":"+D(i.localName,u.$pkg),n=c.getType(t),p=_(u.properties,function(e){return!e.isVirtual&&!e.isReference&&!e.isAttribute&&n.hasType(e.type)}))return b({},p,{effectiveType:s(n).name})}else if(p=_(u.properties,function(e){return!e.isReference&&!e.isAttribute&&"Element"===e.type}))return p;throw a("unrecognized element <"+i.name+">")},m.prototype.toString=function(){return"ElementDescriptor["+s(this.type).name+"]"},m.prototype.valueHandler=function(e,t){return new f(e,t)},m.prototype.referenceHandler=function(e){return new d(e,this.context)},m.prototype.handler=function(e){return"Element"===e?new g(this.model,e,this.context):new m(this.model,e,this.context)},m.prototype.handleChild=function(e){var t,n,r,i;if(t=this.getPropertyForNode(e),r=this.element,n=t.effectiveType||t.type,A(n))return this.valueHandler(t,r);i=t.isReference?this.referenceHandler(t).handleNode(e):this.handler(n).handleNode(e);var o=i.element;return void 0!==o&&(t.isMany?r.get(t.name).push(o):r.set(t.name,o),t.isReference?(b(o,{element:r}),this.context.addReference(o)):o.$parent=r),i},g.prototype=Object.create(h.prototype),g.prototype.createElement=function(e){var t=e.name,n=e.prefix,r=e.ns[n],i=e.attributes;return this.model.createAny(t,r,i)},g.prototype.handleChild=function(e){var t,n=new g(this.model,"Element",this.context).handleNode(e),r=this.element,i=n.element;return void 0!==i&&(t=r.$children=r.$children||[],t.push(i),i.$parent=r),n},g.prototype.handleText=function(e){this.body=this.body||""+e},g.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)},v.prototype.fromXML=function(e,t,n){function r(){var e,t,n=g.elementsById,r=g.references;for(e=0;t=r[e];e++){var i=t.element,o=n[t.id],a=s(i).propertiesByName[t.property];if(o||g.addWarning({message:"unresolved reference <"+t.id+">",element:t.element,property:t.property,value:t.id}),a.isMany){var c=i.get(a.name),u=c.indexOf(t);u===-1&&(u=c.length),o?c[u]=o:c.splice(u,1)}else i.set(a.name,o)}}function i(e){y.pop().handleEnd()}function u(e){var t=y.peek();o(e,f);try{y.push(t.handleNode(e))}catch(t){var n=this.line,r=this.column,i="unparsable content <"+e.name+"> detected\n\tline: "+n+"\n\tcolumn: "+r+"\n\tnested error: "+t.message;if(!h)throw console.error("could not parse document"),console.error(t),a(i);g.addWarning({message:i,error:t}),console.warn("could not parse node"),console.warn(t),y.push(new l)}}function p(e){y.peek().handleText(e)}var d=t.rootHandler;t instanceof m?(d=t,t={}):"string"==typeof t?(d=this.handler(t),t={}):"string"==typeof d&&(d=this.handler(d));var f=this.model,h=this.lax,g=new c(b({},t,{rootHandler:d})),v=new C((!0),{xmlns:!0,trim:!0}),y=new E;d.context=g,y.push(d),v.onopentag=u,v.oncdata=v.ontext=p,v.onclosetag=i,v.onend=r,w(function(){var t;try{v.write(e).close()}catch(e){t=e}n(t,t?void 0:d.element,g)})},v.prototype.handler=function(e){return new m(this.model,e)},t.exports=v,t.exports.ElementHandler=m},{270:270,271:271,274:274,281:281,398:398,420:420,423:423,428:428,431:431,435:435,437:437}],422:[function(e,t,n){"use strict";function r(e){return b(e)?e:(e.prefix?e.prefix+":":"")+e.localName}function i(e){function t(t){return e.used[t.uri]}function n(e){var t="xmlns"+(e.prefix?":"+e.prefix:"");return{name:t,value:e.uri}}var r=[].concat(e.wellknown,e.custom);return x(w(r,t),n)}function o(e,t){return t.isGeneric?t.name:E({localName:M(t.ns.localName,t.$pkg)},e)}function a(e,t){return E({localName:t.ns.localName},e)}function s(e){var t=e.$descriptor;return w(t.properties,function(t){var n=t.name;if(t.isVirtual)return!1;if(!e.hasOwnProperty(n))return!1;var r=e[n];return r!==t.default&&(null!==r&&(!t.isMany||r.length))})}function c(e){return e=b(e)?e:""+e,e.replace(k,function(e){return"&#"+D[e]+";"})}function u(e){return w(e,function(e){return e.isAttr})}function l(e){return w(e,function(e){return!e.isAttr})}function p(e,t){this.ns=t}function d(){}function f(e){this.ns=e}function h(e,t){this.body=[],this.attrs=[],this.parent=e,this.ns=t}function m(e,t){h.call(this,e,t)}function g(){this.value="",this.write=function(e){this.value+=e}}function v(e,t){var n=[""];this.append=function(t){return e.write(t),this},this.appendNewLine=function(){return t&&e.write("\n"),this},this.appendIndent=function(){return t&&e.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function y(e){function t(t,n){var r=n||new g,i=new v(r,e.format);if(e.preamble&&i.append(R),(new h).build(t).serializeTo(i),!n)return r.value}return e=E({format:!1,preamble:!0},e||{}),{toXML:t}}var x=e(273),_=e(271),b=e(395),w=e(269),E=e(398),C=e(431),S=e(428).parseName,T=e(420),M=T.nameToAlias,P=T.serializeAsType,A=T.serializeAsProperty,R='<?xml version="1.0" encoding="UTF-8"?>\n',k=/(<|>|'|"|&|\n\r|\n)/g,N=T.DEFAULT_NS_MAP,I=T.XSI_TYPE,D={"\n":"10","\n\r":"10",'"':"34","'":"39","<":"60",">":"62","&":"38"};p.prototype.build=function(e){return this.element=e,this},p.prototype.serializeTo=function(e){e.appendIndent().append("<"+r(this.ns)+">"+this.element.id+"</"+r(this.ns)+">").appendNewLine()},d.prototype.serializeValue=d.prototype.serializeTo=function(e){var t=this.escape;t&&e.append("<![CDATA["),e.append(this.value),t&&e.append("]]>")},d.prototype.build=function(e,t){return this.value=t,"String"===e.type&&t.search(k)!==-1&&(this.escape=!0),this},f.prototype=new d,f.prototype.serializeTo=function(e){e.appendIndent().append("<"+r(this.ns)+">"),this.serializeValue(e),e.append("</"+r(this.ns)+">").appendNewLine()},h.prototype.build=function(e){this.element=e;var t=this.parseNsAttributes(e);if(this.ns||(this.ns=this.nsTagName(e.$descriptor)),e.$descriptor.isGeneric)this.parseGeneric(e);else{var n=s(e);this.parseAttributes(u(n)),this.parseContainments(l(n)),this.parseGenericAttributes(e,t)}return this},h.prototype.nsTagName=function(e){var t=this.logNamespaceUsed(e.ns);return o(t,e)},h.prototype.nsPropertyTagName=function(e){var t=this.logNamespaceUsed(e.ns);return a(t,e)},h.prototype.isLocalNs=function(e){return e.uri===this.ns.uri},h.prototype.nsAttributeName=function(e){var t;if(t=b(e)?S(e):e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.isLocalNs(n)?{localName:t.localName}:E({localName:t.localName},n)},h.prototype.parseGeneric=function(e){var t=this,n=this.body,r=this.attrs;_(e,function(e,i){"$body"===i?n.push((new d).build({type:"String"},e)):"$children"===i?_(e,function(e){n.push(new h(t).build(e))}):0!==i.indexOf("$")&&r.push({name:i,value:c(e)})})},h.prototype.parseNsAttributes=function(e){var t=this,n=e.$attrs,r=e.$model,i=[];return _(n,function(e,n){var o,a=S(n);"xmlns"===a.prefix&&(o={prefix:a.localName,uri:e}),a.prefix||"xmlns"!==a.localName||(o={uri:e}),o?r.getPackage(e)?t.logNamespace(o,!0):t.logNamespaceUsed(o):i.push({name:n,value:e})}),i},h.prototype.parseGenericAttributes=function(e,t){var n=this;_(t,function(t){if(t.name!==I)try{n.addAttribute(n.nsAttributeName(t.name),t.value)}catch(n){console.warn("missing namespace information for ",t.name,"=",t.value,"on",e,n)}})},h.prototype.parseContainments=function(e){var t=this,n=this.body,r=this.element;_(e,function(e){var i=r.get(e.name),o=e.isReference,a=e.isMany,s=t.nsPropertyTagName(e);if(a||(i=[i]),e.isBody)n.push((new d).build(e,i[0]));else if(C.isSimple(e.type))_(i,function(t){n.push(new f(s).build(e,t))});else if(o)_(i,function(e){n.push(new p(t,s).build(e))});else{var c=P(e),u=A(e);_(i,function(e){var r;r=c?new m(t,s):u?new h(t,s):new h(t),n.push(r.build(e))})}})},h.prototype.getNamespaces=function(){var e=this.namespaces,t=this.parent;return e||(e=this.namespaces=t?t.getNamespaces():{prefixMap:{},uriMap:{},used:{},wellknown:[],custom:[]}),e},h.prototype.logNamespace=function(e,t){var n=this.getNamespaces(),r=e.uri,i=n.uriMap[r];return i||(n.uriMap[r]=e,t?n.wellknown.push(e):n.custom.push(e)),n.prefixMap[e.prefix]=r,e},h.prototype.logNamespaceUsed=function(e){var t=this.element,n=t.$model,r=this.getNamespaces(),i=e.prefix,o=N[i]||n&&(n.getPackage(i)||{}).uri,a=e.uri||r.prefixMap[i]||o;
if(!a)throw new Error("no namespace uri given for prefix <"+e.prefix+">");return e=r.uriMap[a],e||(e=this.logNamespace({prefix:i,uri:a},o)),r.used[e.uri]||(r.used[e.uri]=e),e},h.prototype.parseAttributes=function(e){var t=this,n=this.element;_(e,function(e){var r=n.get(e.name);if(e.isReference)if(e.isMany){var i=[];_(r,function(e){i.push(e.id)}),r=i.join(" ")}else r=r.id;t.addAttribute(t.nsAttributeName(e),r)})},h.prototype.addAttribute=function(e,t){var n=this.attrs;b(t)&&(t=c(t)),n.push({name:e,value:t})},h.prototype.serializeAttributes=function(e){var t=this.attrs,n=!this.parent;n&&(t=i(this.namespaces).concat(t)),_(t,function(t){e.append(" ").append(r(t.name)).append('="').append(t.value).append('"')})},h.prototype.serializeTo=function(e){var t=this.body.length,n=!(1===this.body.length&&this.body[0]instanceof d);e.appendIndent().append("<"+r(this.ns)),this.serializeAttributes(e),e.append(t?">":" />"),t&&(n&&e.appendNewLine().indent(),_(this.body,function(t){t.serializeTo(e)}),n&&e.unindent().appendIndent(),e.append("</"+r(this.ns)+">")),e.appendNewLine()},m.prototype=new h,m.prototype.build=function(e){var t=e.$descriptor;this.element=e,this.typeNs=this.nsTagName(t);var n=this.typeNs,r=e.$model.getPackage(n.uri),i=r.xml&&r.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(I),(n.prefix?n.prefix+":":"")+i+t.ns.localName),h.prototype.build.call(this,e)},m.prototype.isLocalNs=function(e){return e.uri===this.typeNs.uri},t.exports=y},{269:269,271:271,273:273,395:395,398:398,420:420,428:428,431:431}],423:[function(e,t,n){t.exports=e(427)},{427:427}],424:[function(e,t,n){"use strict";function r(){}r.prototype.get=function(e){return this.$model.properties.get(this,e)},r.prototype.set=function(e,t){this.$model.properties.set(this,e,t)},t.exports=r},{}],425:[function(e,t,n){"use strict";function r(e){this.ns=e,this.name=e.name,this.allTypes=[],this.properties=[],this.propertiesByName={}}var i=e(404),o=e(398),a=e(271),s=e(428).parseName;t.exports=r,r.prototype.build=function(){return i(this,["ns","name","allTypes","properties","propertiesByName","bodyProperty","idProperty"])},r.prototype.addProperty=function(e,t,n){"boolean"==typeof t&&(n=t,t=void 0),this.addNamedProperty(e,n!==!1);var r=this.properties;void 0!==t?r.splice(t,0,e):r.push(e)},r.prototype.replaceProperty=function(e,t,n){var r=e.ns,i=this.properties,o=this.propertiesByName,a=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var s=i.indexOf(e);if(s===-1)throw new Error("property <"+r.name+"> not found in property list");i.splice(s,1),this.addProperty(t,n?void 0:s,a),o[r.name]=o[r.localName]=t},r.prototype.redefineProperty=function(e,t,n){var r=e.ns.prefix,i=t.split("#"),o=s(i[0],r),a=s(i[1],o.prefix).name,c=this.propertiesByName[a];if(!c)throw new Error("refined property <"+a+"> not found");this.replaceProperty(c,e,n),delete e.redefines},r.prototype.addNamedProperty=function(e,t){var n=e.ns,r=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),r[n.name]=r[n.localName]=e},r.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]},r.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e},r.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e},r.prototype.assertNotDefined=function(e,t){var n=e.name,r=this.propertiesByName[n];if(r)throw new Error("property <"+n+"> already defined; override of <"+r.definedBy.ns.name+"#"+r.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")},r.prototype.hasProperty=function(e){return this.propertiesByName[e]},r.prototype.addTrait=function(e,t){var n=this.allTypes;n.indexOf(e)===-1&&(a(e.properties,function(n){n=o({},n,{name:n.ns.localName,inherited:t}),Object.defineProperty(n,"definedBy",{value:e});var r=n.replaces,i=n.redefines;r||i?this.redefineProperty(n,r||i,r):(n.isBody&&this.setBodyProperty(n),n.isId&&this.setIdProperty(n),this.addProperty(n))},this),n.push(e))}},{271:271,398:398,404:404,428:428}],426:[function(e,t,n){"use strict";function r(e,t){this.model=e,this.properties=t}var i=e(271),o=e(424);t.exports=r,r.prototype.createType=function(e){function t(e){r.define(this,"$type",{value:s,enumerable:!0}),r.define(this,"$attrs",{value:{}}),r.define(this,"$parent",{writable:!0}),i(e,function(e,t){this.set(t,e)},this)}var n=this.model,r=this.properties,a=Object.create(o.prototype);i(e.properties,function(e){e.isMany||void 0===e.default||(a[e.name]=e.default)}),r.defineModel(a,n),r.defineDescriptor(a,e);var s=e.ns.name;return t.prototype=a,t.hasType=a.$instanceOf=this.model.hasType,r.defineModel(t,n),r.defineDescriptor(t,e),t}},{271:271,424:424}],427:[function(e,t,n){"use strict";function r(e){this.properties=new l(this),this.factory=new c(this,this.properties),this.registry=new u(e,this.properties),this.typeCache={}}var i=e(395),o=e(393),a=e(271),s=e(270),c=e(426),u=e(430),l=e(429),p=e(428).parseName;t.exports=r,r.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error("unknown type <"+e+">");return new n(t)},r.prototype.getType=function(e){var t=this.typeCache,n=i(e)?e:e.ns.name,r=t[n];return r||(e=this.registry.getEffectiveDescriptor(n),r=t[n]=this.factory.createType(e)),r},r.prototype.createAny=function(e,t,n){var r=p(e),i={$type:e},s={name:e,isGeneric:!0,ns:{prefix:r.prefix,localName:r.localName,uri:t}};return this.properties.defineDescriptor(i,s),this.properties.defineModel(i,this),this.properties.define(i,"$parent",{enumerable:!1,writable:!0}),a(n,function(e,t){o(e)&&void 0!==e.value?i[e.name]=e.value:i[t]=e}),i},r.prototype.getPackage=function(e){return this.registry.getPackage(e)},r.prototype.getPackages=function(){return this.registry.getPackages()},r.prototype.getElementDescriptor=function(e){return e.$descriptor},r.prototype.hasType=function(e,t){void 0===t&&(t=e,e=this);var n=e.$model.getElementDescriptor(e);return!!s(n.allTypes,function(e){return e.name===t})},r.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]}},{270:270,271:271,393:393,395:395,426:426,428:428,429:429,430:430}],428:[function(e,t,n){"use strict";t.exports.parseName=function(e,t){var n,r,i=e.split(/:/);if(1===i.length)n=e,r=t;else{if(2!==i.length)throw new Error("expected <prefix:localName> or <localName>, got "+e);n=i[1],r=i[0]}return e=(r?r+":":"")+n,{name:e,prefix:r,localName:n}}},{}],429:[function(e,t,n){"use strict";function r(e){this.model=e}function i(e){return"undefined"==typeof e}function o(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}t.exports=r,r.prototype.set=function(e,t,n){var r=this.model.getPropertyDescriptor(e,t),a=r&&r.name;i(n)?r?delete e[a]:delete e.$attrs[t]:r?a in e?e[a]=n:o(e,r,n):e.$attrs[t]=n},r.prototype.get=function(e,t){var n=this.model.getPropertyDescriptor(e,t);if(!n)return e.$attrs[t];var r=n.name;return!e[r]&&n.isMany&&o(e,n,[]),e[r]},r.prototype.define=function(e,t,n){Object.defineProperty(e,t,n)},r.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})},r.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})}},{}],430:[function(e,t,n){"use strict";function r(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,o(e,this.registerPackage,this)}var i=e(398),o=e(271),a=e(431),s=e(425),c=e(428).parseName,u=a.isBuiltIn;t.exports=r,r.prototype.getPackage=function(e){return this.packageMap[e]},r.prototype.getPackages=function(){return this.packages},r.prototype.registerPackage=function(e){e=i({},e),o(e.types,function(t){this.registerType(t,e)},this),this.packageMap[e.uri]=this.packageMap[e.prefix]=e,this.packages.push(e)},r.prototype.registerType=function(e,t){e=i({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice()});var n=c(e.name,t.prefix),r=n.name,a={};o(e.properties,function(e){var t=c(e.name,n.prefix),r=t.name;u(e.type)||(e.type=c(e.type,t.prefix).name),i(e,{ns:t,name:r}),a[r]=e}),i(e,{ns:n,name:r,propertiesByName:a}),o(e.extends,function(e){var t=this.typeMap[e];t.traits=t.traits||[],t.traits.push(r)},this),this.definePackage(e,t),this.typeMap[r]=e},r.prototype.mapTypes=function(e,t,n){function r(e){return i(e,!0)}function i(n,r){var i=c(n,u(n)?"":e.prefix);s.mapTypes(i,t,r)}var a=u(e.name)?{name:e.name}:this.typeMap[e.name],s=this;if(!a)throw new Error("unknown type <"+e.name+">");o(a.superClass,n?r:i),t(a,!n),o(a.traits,r)},r.prototype.getEffectiveDescriptor=function(e){var t=c(e),n=new s(t);this.mapTypes(t,function(e,t){n.addTrait(e,t)});var r=n.build();return this.definePackage(r,r.allTypes[r.allTypes.length-1].$pkg),r},r.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})}},{271:271,398:398,425:425,428:428,431:431}],431:[function(e,t,n){"use strict";var r={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},i={String:function(e){return e},Boolean:function(e){return"true"===e},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e,10)}};t.exports.coerceType=function(e,t){var n=i[e];return n?n(t):t},t.exports.isBuiltIn=function(e){return!!r[e]},t.exports.isSimple=function(e){return!!i[e]}},{}],432:[function(e,t,n){t.exports=e(434),t.exports.Collection=e(433)},{433:433,434:434}],433:[function(e,t,n){"use strict";function r(e,t,n,r){var i=n.inverse;return Object.defineProperty(e,"remove",{value:function(e){var n=this.indexOf(e);return n!==-1&&(this.splice(n,1),t.unset(e,i,r)),e}}),Object.defineProperty(e,"contains",{value:function(e){return this.indexOf(e)!==-1}}),Object.defineProperty(e,"add",{value:function(e){this.contains(e)||(this.push(e),t.set(e,i,r))}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e}function i(e){return e.__refs_collection===!0}t.exports.extend=r,t.exports.isExtended=i},{}],434:[function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t.name||t)}function i(e,t,n){Object.defineProperty(n,t.name,{enumerable:t.enumerable,value:s.extend(n[t.name]||[],e,t,n)})}function o(e,t,n){var r=t.inverse,i=n[t.name];Object.defineProperty(n,t.name,{enumerable:t.enumerable,get:function(){return i},set:function(t){if(t!==i){var o=i;i=null,o&&e.unset(o,r,n),i=t,e.set(i,r,n)}}})}function a(e,t){return this instanceof a?(e.inverse=t,t.inverse=e,this.props={},this.props[e.name]=e,void(this.props[t.name]=t)):new a(e,t)}var s=e(433);a.prototype.bind=function(e,t){if("string"==typeof t){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}t.collection?i(this,t,e):o(this,t,e)},a.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return s.isExtended(n)||i(this,t,e),n},a.prototype.ensureBound=function(e,t){r(e,t)||this.bind(e,t)},a.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)},a.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)},t.exports=a},{433:433}],435:[function(e,t,n){(function(t){!function(n){function r(e,t){if(!(this instanceof r))return new r(e,t);var i=this;o(i),i.q=i.c="",i.bufferCheckPosition=n.MAX_BUFFER_LENGTH,i.opt=t||{},i.opt.lowercase=i.opt.lowercase||i.opt.lowercasetags,i.looseCase=i.opt.lowercase?"toLowerCase":"toUpperCase",i.tags=[],i.closed=i.closedRoot=i.sawRoot=!1,i.tag=i.error=null,i.strict=!!e,i.noscript=!(!e&&!i.opt.noscript),i.state=V.BEGIN,i.ENTITIES=Object.create(n.ENTITIES),i.attribList=[],i.opt.xmlns&&(i.ns=Object.create(z)),i.trackPosition=i.opt.position!==!1,i.trackPosition&&(i.position=i.line=i.column=0),f(i,"onready")}function i(e){for(var t=Math.max(n.MAX_BUFFER_LENGTH,10),r=0,i=0,o=M.length;i<o;i++){var a=e[M[i]].length;if(a>t)switch(M[i]){case"textNode":m(e);break;case"cdata":h(e,"oncdata",e.cdata),e.cdata="";break;case"script":h(e,"onscript",e.script),e.script="";break;default:v(e,"Max buffer length exceeded: "+M[i])}r=Math.max(r,a)}e.bufferCheckPosition=n.MAX_BUFFER_LENGTH-r+e.position}function o(e){for(var t=0,n=M.length;t<n;t++)e[M[t]]=""}function a(e){m(e),""!==e.cdata&&(h(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(h(e,"onscript",e.script),e.script="")}function s(e,t){return new c(e,t)}function c(e,t){if(!(this instanceof c))return new c(e,t);P.apply(this),this._parser=new r(e,t),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null},this._decoder=null,A.forEach(function(e){Object.defineProperty(n,"on"+e,{get:function(){return n._parser["on"+e]},set:function(t){return t?void n.on(e,t):(n.removeAllListeners(e),n._parser["on"+e]=t)},enumerable:!0,configurable:!1})})}function u(e){return e.split("").reduce(function(e,t){return e[t]=!0,e},{})}function l(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function p(e,t){return l(e)?!!t.match(e):e[t]}function d(e,t){return!p(e,t)}function f(e,t,n){e[t]&&e[t](n)}function h(e,t,n){e.textNode&&m(e),f(e,t,n)}function m(e){e.textNode=g(e.opt,e.textNode),e.textNode&&f(e,"ontext",e.textNode),e.textNode=""}function g(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function v(e,t){return m(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,f(e,"onerror",t),e}function y(e){return e.closedRoot||x(e,"Unclosed root tag"),e.state!==V.BEGIN&&e.state!==V.TEXT&&v(e,"Unexpected end"),m(e),e.c="",e.closed=!0,f(e,"onend"),r.call(e,e.strict,e.opt),e}function x(e,t){if("object"!=typeof e||!(e instanceof r))throw new Error("bad call to strictFail");e.strict&&v(e,t)}function _(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0}function b(e,t){var n=e.indexOf(":"),r=n<0?["",e]:e.split(":"),i=r[0],o=r[1];return t&&"xmlns"===e&&(i="xmlns",o=""),{prefix:i,local:o}}function w(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),e.attribList.indexOf(e.attribName)!==-1||e.tag.attributes.hasOwnProperty(e.attribName))return e.attribName=e.attribValue="";if(e.opt.xmlns){var t=b(e.attribName,!0),n=t.prefix,r=t.local;if("xmlns"===n)if("xml"===r&&e.attribValue!==L)x(e,"xml: prefix must be bound to "+L+"\nActual: "+e.attribValue);else if("xmlns"===r&&e.attribValue!==F)x(e,"xmlns: prefix must be bound to "+F+"\nActual: "+e.attribValue);else{var i=e.tag,o=e.tags[e.tags.length-1]||e;i.ns===o.ns&&(i.ns=Object.create(o.ns)),i.ns[r]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,h(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}function E(e,t){if(e.opt.xmlns){var n=e.tag,r=b(e.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(x(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=r.prefix);var i=e.tags[e.tags.length-1]||e;n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach(function(t){h(e,"onopennamespace",{prefix:t,uri:n.ns[t]})});for(var o=0,a=e.attribList.length;o<a;o++){var s=e.attribList[o],c=s[0],u=s[1],l=b(c,!0),p=l.prefix,d=l.local,f=""==p?"":n.ns[p]||"",m={name:c,value:u,prefix:p,local:d,uri:f};p&&"xmlns"!=p&&!f&&(x(e,"Unbound namespace prefix: "+JSON.stringify(p)),m.uri=p),e.tag.attributes[c]=m,h(e,"onattribute",m)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),h(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=V.TEXT:e.state=V.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function C(e){if(!e.tagName)return x(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=V.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=V.SCRIPT);h(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());for(var r=n;t--;){var i=e.tags[t];if(i.name===r)break;x(e,"Unexpected close tag")}if(t<0)return x(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=V.TEXT);e.tagName=n;for(var o=e.tags.length;o-- >t;){var a=e.tag=e.tags.pop();e.tagName=e.tag.name,h(e,"onclosetag",e.tagName);var s={};for(var c in a.ns)s[c]=a.ns[c];var u=e.tags[e.tags.length-1]||e;e.opt.xmlns&&a.ns!==u.ns&&Object.keys(a.ns).forEach(function(t){var n=a.ns[t];h(e,"onclosenamespace",{prefix:t,uri:n})})}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=V.TEXT}function S(e){var t,n=e.entity,r=n.toLowerCase(),i="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[r]?e.ENTITIES[r]:(n=r,"#"===n.charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),t=parseInt(n,16),i=t.toString(16)):(n=n.slice(1),t=parseInt(n,10),i=t.toString(10))),n=n.replace(/^0+/,""),i.toLowerCase()!==n?(x(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function T(e){var t=this;if(this.error)throw this.error;if(t.closed)return v(t,"Cannot write after close. Assign an onready handler.");if(null===e)return y(t);for(var n=0,r="";t.c=r=e.charAt(n++);)switch(t.trackPosition&&(t.position++,"\n"===r?(t.line++,t.column=0):t.column++),t.state){case V.BEGIN:"<"===r?(t.state=V.OPEN_WAKA,t.startTagPosition=t.position):d(R,r)&&(x(t,"Non-whitespace before first tag."),t.textNode=r,t.state=V.TEXT);continue;case V.TEXT:if(t.sawRoot&&!t.closedRoot){for(var o=n-1;r&&"<"!==r&&"&"!==r;)r=e.charAt(n++),r&&t.trackPosition&&(t.position++,"\n"===r?(t.line++,t.column=0):t.column++);t.textNode+=e.substring(o,n-1)}"<"===r?(t.state=V.OPEN_WAKA,t.startTagPosition=t.position):(!d(R,r)||t.sawRoot&&!t.closedRoot||x(t,"Text data outside of root node."),"&"===r?t.state=V.TEXT_ENTITY:t.textNode+=r);continue;case V.SCRIPT:"<"===r?t.state=V.SCRIPT_ENDING:t.script+=r;continue;case V.SCRIPT_ENDING:"/"===r?t.state=V.CLOSE_TAG:(t.script+="<"+r,t.state=V.SCRIPT);continue;case V.OPEN_WAKA:if("!"===r)t.state=V.SGML_DECL,t.sgmlDecl="";else if(p(R,r));else if(p(U,r))t.state=V.OPEN_TAG,t.tagName=r;else if("/"===r)t.state=V.CLOSE_TAG,t.tagName="";else if("?"===r)t.state=V.PROC_INST,t.procInstName=t.procInstBody="";else{if(x(t,"Unencoded <"),t.startTagPosition+1<t.position){var a=t.position-t.startTagPosition;r=new Array(a).join(" ")+r}t.textNode+="<"+r,t.state=V.TEXT}continue;case V.SGML_DECL:(t.sgmlDecl+r).toUpperCase()===B?(h(t,"onopencdata"),t.state=V.CDATA,t.sgmlDecl="",t.cdata=""):t.sgmlDecl+r==="--"?(t.state=V.COMMENT,t.comment="",t.sgmlDecl=""):(t.sgmlDecl+r).toUpperCase()===j?(t.state=V.DOCTYPE,(t.doctype||t.sawRoot)&&x(t,"Inappropriately located doctype declaration"),t.doctype="",t.sgmlDecl=""):">"===r?(h(t,"onsgmldeclaration",t.sgmlDecl),t.sgmlDecl="",t.state=V.TEXT):p(I,r)?(t.state=V.SGML_DECL_QUOTED,t.sgmlDecl+=r):t.sgmlDecl+=r;continue;case V.SGML_DECL_QUOTED:r===t.q&&(t.state=V.SGML_DECL,t.q=""),t.sgmlDecl+=r;continue;case V.DOCTYPE:">"===r?(t.state=V.TEXT,h(t,"ondoctype",t.doctype),t.doctype=!0):(t.doctype+=r,"["===r?t.state=V.DOCTYPE_DTD:p(I,r)&&(t.state=V.DOCTYPE_QUOTED,t.q=r));continue;case V.DOCTYPE_QUOTED:t.doctype+=r,r===t.q&&(t.q="",t.state=V.DOCTYPE);continue;case V.DOCTYPE_DTD:t.doctype+=r,"]"===r?t.state=V.DOCTYPE:p(I,r)&&(t.state=V.DOCTYPE_DTD_QUOTED,t.q=r);continue;case V.DOCTYPE_DTD_QUOTED:t.doctype+=r,r===t.q&&(t.state=V.DOCTYPE_DTD,t.q="");continue;case V.COMMENT:"-"===r?t.state=V.COMMENT_ENDING:t.comment+=r;continue;case V.COMMENT_ENDING:"-"===r?(t.state=V.COMMENT_ENDED,t.comment=g(t.opt,t.comment),t.comment&&h(t,"oncomment",t.comment),t.comment=""):(t.comment+="-"+r,t.state=V.COMMENT);continue;case V.COMMENT_ENDED:">"!==r?(x(t,"Malformed comment"),t.comment+="--"+r,t.state=V.COMMENT):t.state=V.TEXT;continue;case V.CDATA:"]"===r?t.state=V.CDATA_ENDING:t.cdata+=r;continue;case V.CDATA_ENDING:"]"===r?t.state=V.CDATA_ENDING_2:(t.cdata+="]"+r,t.state=V.CDATA);continue;case V.CDATA_ENDING_2:">"===r?(t.cdata&&h(t,"oncdata",t.cdata),h(t,"onclosecdata"),t.cdata="",t.state=V.TEXT):"]"===r?t.cdata+="]":(t.cdata+="]]"+r,t.state=V.CDATA);continue;case V.PROC_INST:"?"===r?t.state=V.PROC_INST_ENDING:p(R,r)?t.state=V.PROC_INST_BODY:t.procInstName+=r;continue;case V.PROC_INST_BODY:if(!t.procInstBody&&p(R,r))continue;"?"===r?t.state=V.PROC_INST_ENDING:t.procInstBody+=r;continue;case V.PROC_INST_ENDING:">"===r?(h(t,"onprocessinginstruction",{name:t.procInstName,body:t.procInstBody}),t.procInstName=t.procInstBody="",t.state=V.TEXT):(t.procInstBody+="?"+r,t.state=V.PROC_INST_BODY);continue;case V.OPEN_TAG:p($,r)?t.tagName+=r:(_(t),">"===r?E(t):"/"===r?t.state=V.OPEN_TAG_SLASH:(d(R,r)&&x(t,"Invalid character in tag name"),t.state=V.ATTRIB));continue;case V.OPEN_TAG_SLASH:">"===r?(E(t,!0),C(t)):(x(t,"Forward-slash in opening tag not followed by >"),t.state=V.ATTRIB);continue;case V.ATTRIB:if(p(R,r))continue;">"===r?E(t):"/"===r?t.state=V.OPEN_TAG_SLASH:p(U,r)?(t.attribName=r,t.attribValue="",t.state=V.ATTRIB_NAME):x(t,"Invalid attribute name");continue;case V.ATTRIB_NAME:"="===r?t.state=V.ATTRIB_VALUE:">"===r?(x(t,"Attribute without value"),t.attribValue=t.attribName,w(t),E(t)):p(R,r)?t.state=V.ATTRIB_NAME_SAW_WHITE:p($,r)?t.attribName+=r:x(t,"Invalid attribute name");continue;case V.ATTRIB_NAME_SAW_WHITE:if("="===r)t.state=V.ATTRIB_VALUE;else{if(p(R,r))continue;x(t,"Attribute without value"),t.tag.attributes[t.attribName]="",t.attribValue="",h(t,"onattribute",{name:t.attribName,value:""}),t.attribName="",">"===r?E(t):p(U,r)?(t.attribName=r,t.state=V.ATTRIB_NAME):(x(t,"Invalid attribute name"),t.state=V.ATTRIB)}continue;case V.ATTRIB_VALUE:if(p(R,r))continue;p(I,r)?(t.q=r,t.state=V.ATTRIB_VALUE_QUOTED):(x(t,"Unquoted attribute value"),t.state=V.ATTRIB_VALUE_UNQUOTED,t.attribValue=r);continue;case V.ATTRIB_VALUE_QUOTED:if(r!==t.q){"&"===r?t.state=V.ATTRIB_VALUE_ENTITY_Q:t.attribValue+=r;continue}w(t),t.q="",t.state=V.ATTRIB_VALUE_CLOSED;continue;case V.ATTRIB_VALUE_CLOSED:p(R,r)?t.state=V.ATTRIB:">"===r?E(t):"/"===r?t.state=V.OPEN_TAG_SLASH:p(U,r)?(x(t,"No whitespace between attributes"),t.attribName=r,t.attribValue="",t.state=V.ATTRIB_NAME):x(t,"Invalid attribute name");continue;case V.ATTRIB_VALUE_UNQUOTED:if(d(O,r)){"&"===r?t.state=V.ATTRIB_VALUE_ENTITY_U:t.attribValue+=r;continue}w(t),">"===r?E(t):t.state=V.ATTRIB;continue;case V.CLOSE_TAG:if(t.tagName)">"===r?C(t):p($,r)?t.tagName+=r:t.script?(t.script+="</"+t.tagName,t.tagName="",t.state=V.SCRIPT):(d(R,r)&&x(t,"Invalid tagname in closing tag"),t.state=V.CLOSE_TAG_SAW_WHITE);else{if(p(R,r))continue;d(U,r)?t.script?(t.script+="</"+r,t.state=V.SCRIPT):x(t,"Invalid tagname in closing tag."):t.tagName=r}continue;case V.CLOSE_TAG_SAW_WHITE:if(p(R,r))continue;">"===r?C(t):x(t,"Invalid characters in closing tag");continue;case V.TEXT_ENTITY:case V.ATTRIB_VALUE_ENTITY_Q:case V.ATTRIB_VALUE_ENTITY_U:switch(t.state){case V.TEXT_ENTITY:var s=V.TEXT,c="textNode";break;case V.ATTRIB_VALUE_ENTITY_Q:var s=V.ATTRIB_VALUE_QUOTED,c="attribValue";break;case V.ATTRIB_VALUE_ENTITY_U:var s=V.ATTRIB_VALUE_UNQUOTED,c="attribValue"}";"===r?(t[c]+=S(t),t.entity="",t.state=s):p(D,r)?t.entity+=r:(x(t,"Invalid character entity"),t[c]+="&"+t.entity+r,t.entity="",t.state=s);continue;default:throw new Error(t,"Unknown state: "+t.state)}return t.position>=t.bufferCheckPosition&&i(t),t}n.parser=function(e,t){return new r(e,t)},n.SAXParser=r,n.SAXStream=c,n.createStream=s,n.MAX_BUFFER_LENGTH=65536;var M=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];n.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){this.__proto__=e}return t.prototype=e,new t}),Object.getPrototypeOf||(Object.getPrototypeOf=function(e){return e.__proto__}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),r.prototype={end:function(){y(this)},write:T,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){a(this)}};try{var P=e("stream").Stream}catch(e){var P=function(){}}var A=n.EVENTS.filter(function(e){return"error"!==e&&"end"!==e});c.prototype=Object.create(P.prototype,{constructor:{value:c}}),c.prototype.write=function(n){if("function"==typeof t&&"function"==typeof t.isBuffer&&t.isBuffer(n)){if(!this._decoder){var r=e("string_decoder").StringDecoder;this._decoder=new r("utf8")}n=this._decoder.write(n)}return this._parser.write(n.toString()),this.emit("data",n),!0},c.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},c.prototype.on=function(e,t){var n=this;return n._parser["on"+e]||A.indexOf(e)===-1||(n._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),n.emit.apply(n,t)}),P.prototype.on.call(n,e,t)};var R="\r\n\t ",k="0124356789",N="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",I="'\"",D=k+N+"#",O=R+">",B="[CDATA[",j="DOCTYPE",L="http://www.w3.org/XML/1998/namespace",F="http://www.w3.org/2000/xmlns/",z={xml:L,xmlns:F};R=u(R),k=u(k),N=u(N);var U=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,$=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;I=u(I),D=u(D),O=u(O);var V=0;n.STATE={BEGIN:V++,TEXT:V++,TEXT_ENTITY:V++,OPEN_WAKA:V++,SGML_DECL:V++,SGML_DECL_QUOTED:V++,DOCTYPE:V++,DOCTYPE_QUOTED:V++,DOCTYPE_DTD:V++,DOCTYPE_DTD_QUOTED:V++,COMMENT_STARTING:V++,COMMENT:V++,COMMENT_ENDING:V++,COMMENT_ENDED:V++,CDATA:V++,CDATA_ENDING:V++,CDATA_ENDING_2:V++,PROC_INST:V++,PROC_INST_BODY:V++,PROC_INST_ENDING:V++,OPEN_TAG:V++,OPEN_TAG_SLASH:V++,ATTRIB:V++,ATTRIB_NAME:V++,ATTRIB_NAME_SAW_WHITE:V++,ATTRIB_VALUE:V++,ATTRIB_VALUE_QUOTED:V++,ATTRIB_VALUE_CLOSED:V++,ATTRIB_VALUE_UNQUOTED:V++,ATTRIB_VALUE_ENTITY_Q:V++,ATTRIB_VALUE_ENTITY_U:V++,CLOSE_TAG:V++,CLOSE_TAG_SAW_WHITE:V++,SCRIPT:V++,SCRIPT_ENDING:V++},n.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(n.ENTITIES).forEach(function(e){var t=n.ENTITIES[e],r="number"==typeof t?String.fromCharCode(t):t;n.ENTITIES[e]=r});for(var V in n.STATE)n.STATE[n.STATE[V]]=V;V=n.STATE,String.fromCodePoint||!function(){var e=String.fromCharCode,t=Math.floor,n=function(){var n,r,i=16384,o=[],a=-1,s=arguments.length;if(!s)return"";for(var c="";++a<s;){var u=Number(arguments[a]);if(!isFinite(u)||u<0||u>1114111||t(u)!=u)throw RangeError("Invalid code point: "+u);u<=65535?o.push(u):(u-=65536,n=(u>>10)+55296,r=u%1024+56320,o.push(n,r)),(a+1==s||o.length>i)&&(c+=e.apply(null,o),o.length=0)}return c};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:n,configurable:!0,writable:!0}):String.fromCodePoint=n}()}("undefined"==typeof n?sax={}:n)}).call(this,void 0)},{undefined:void 0}],436:[function(t,n,r){!function(i,o){if("function"==typeof e&&e.amd)e(["eve"],function(e){return o(i,e)});else if("undefined"!=typeof r){var a=t(254);n.exports=o(i,a)}else o(i,i.eve)}(window||this,function(e,t){var n=function(t){var n={},r=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e){setTimeout(e,16)},i=Array.isArray||function(e){return e instanceof Array||"[object Array]"==Object.prototype.toString.call(e)},o=0,a="M"+(+new Date).toString(36),s=function(){return a+(o++).toString(36)},c=Date.now||function(){return+new Date},u=function(e){var t=this;if(null==e)return t.s;var n=t.s-e;t.b+=t.dur*n,t.B+=t.dur*n,t.s=e},l=function(e){var t=this;return null==e?t.spd:void(t.spd=e)},p=function(e){var t=this;return null==e?t.dur:(t.s=t.s*e/t.dur,void(t.dur=e))},d=function(){var e=this;delete n[e.id],e.update(),t("mina.stop."+e.id,e)},f=function(){var e=this;e.pdif||(delete n[e.id],e.update(),e.pdif=e.get()-e.b)},h=function(){var e=this;e.pdif&&(e.b=e.get()-e.pdif,delete e.pdif,n[e.id]=e)},m=function(){var e,t=this;if(i(t.start)){e=[];for(var n=0,r=t.start.length;n<r;n++)e[n]=+t.start[n]+(t.end[n]-t.start[n])*t.easing(t.s)}else e=+t.start+(t.end-t.start)*t.easing(t.s);t.set(e)},g=function(){var e=0;for(var i in n)if(n.hasOwnProperty(i)){var o=n[i],a=o.get();e++,o.s=(a-o.b)/(o.dur/o.spd),o.s>=1&&(delete n[i],o.s=1,e--,function(e){setTimeout(function(){t("mina.finish."+e.id,e)})}(o)),o.update()}e&&r(g)},v=function(e,t,i,o,a,c,y){var x={id:s(),start:e,end:t,b:i,s:0,dur:o-i,spd:1,get:a,set:c,easing:y||v.linear,status:u,speed:l,duration:p,stop:d,pause:f,resume:h,update:m};n[x.id]=x;var _,b=0;for(_ in n)if(n.hasOwnProperty(_)&&(b++,2==b))break;return 1==b&&r(g),x};return v.time=c,v.getById=function(e){return n[e]||null},v.linear=function(e){return e},v.easeout=function(e){
return Math.pow(e,1.7)},v.easein=function(e){return Math.pow(e,.48)},v.easeinout=function(e){if(1==e)return 1;if(0==e)return 0;var t=.48-e/1.04,n=Math.sqrt(.1734+t*t),r=n-t,i=Math.pow(Math.abs(r),1/3)*(r<0?-1:1),o=-n-t,a=Math.pow(Math.abs(o),1/3)*(o<0?-1:1),s=i+a+.5;return 3*(1-s)*s*s+s*s*s},v.backin=function(e){if(1==e)return 1;var t=1.70158;return e*e*((t+1)*e-t)},v.backout=function(e){if(0==e)return 0;e-=1;var t=1.70158;return e*e*((t+1)*e+t)+1},v.elastic=function(e){return e==!!e?e:Math.pow(2,-10*e)*Math.sin((e-.075)*(2*Math.PI)/.3)+1},v.bounce=function(e){var t,n=7.5625,r=2.75;return e<1/r?t=n*e*e:e<2/r?(e-=1.5/r,t=n*e*e+.75):e<2.5/r?(e-=2.25/r,t=n*e*e+.9375):(e-=2.625/r,t=n*e*e+.984375),t},e.mina=v,v}("undefined"==typeof t?function(){}:t),r=function(e){function n(e,t){if(e){if(e.tagName)return w(e);if(i(e,"array")&&n.set)return n.set.apply(n,e);if(e instanceof y)return e;if(null==t)return e=E.doc.querySelector(e),w(e)}return e=null==e?"100%":e,t=null==t?"100%":t,new b(e,t)}function r(e,t){if(t){if("#text"==e&&(e=E.doc.createTextNode(t.text||"")),"string"==typeof e&&(e=r(e)),"string"==typeof t)return"xlink:"==t.substring(0,6)?e.getAttributeNS(G,t.substring(6)):"xml:"==t.substring(0,4)?e.getAttributeNS(H,t.substring(4)):e.getAttribute(t);for(var n in t)if(t[C](n)){var i=S(t[n]);i?"xlink:"==n.substring(0,6)?e.setAttributeNS(G,n.substring(6),i):"xml:"==n.substring(0,4)?e.setAttributeNS(H,n.substring(4),i):e.setAttribute(n,i):e.removeAttribute(n)}}else e=E.doc.createElementNS(H,e);return e}function i(e,t){return t=S.prototype.toLowerCase.call(t),"finite"==t?isFinite(e):!("array"!=t||!(e instanceof Array||Array.isArray&&Array.isArray(e)))||("null"==t&&null===e||t==typeof e&&null!==e||"object"==t&&e===Object(e)||D.call(e).slice(8,-1).toLowerCase()==t)}function o(e){if("function"==typeof e||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)e[C](n)&&(t[n]=o(e[n]));return t}function a(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}function s(e,t,n){function r(){var i=Array.prototype.slice.call(arguments,0),o=i.join("␀"),s=r.cache=r.cache||{},c=r.count=r.count||[];return s[C](o)?(a(c,o),n?n(s[o]):s[o]):(c.length>=1e3&&delete s[c.shift()],c.push(o),s[o]=e.apply(t,i),n?n(s[o]):s[o])}return r}function c(e,t,n,r,i,o){if(null==i){var a=e-n,s=t-r;return a||s?(180+180*P.atan2(-s,-a)/N+360)%360:0}return c(e,t,i,o)-c(n,r,i,o)}function u(e){return e%360*N/180}function l(e){return 180*e/N%360}function p(e){var t=[];return e=e.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,function(e,n,r){return r=r.split(/\s*,\s*|\s+/),"rotate"==n&&1==r.length&&r.push(0,0),"scale"==n&&(r.length>2?r=r.slice(0,2):2==r.length&&r.push(0,0),1==r.length&&r.push(r[0],0,0)),"skewX"==n?t.push(["m",1,0,P.tan(u(r[0])),1,0,0]):"skewY"==n?t.push(["m",1,P.tan(u(r[0])),0,1,0,0]):t.push([n.charAt(0)].concat(r)),e}),t}function d(e,t){var r=J(e),i=new n.Matrix;if(r)for(var o=0,a=r.length;o<a;o++){var s,c,u,l,p,d=r[o],f=d.length,h=S(d[0]).toLowerCase(),m=d[0]!=h,g=m?i.invert():0;"t"==h&&2==f?i.translate(d[1],0):"t"==h&&3==f?m?(s=g.x(0,0),c=g.y(0,0),u=g.x(d[1],d[2]),l=g.y(d[1],d[2]),i.translate(u-s,l-c)):i.translate(d[1],d[2]):"r"==h?2==f?(p=p||t,i.rotate(d[1],p.x+p.width/2,p.y+p.height/2)):4==f&&(m?(u=g.x(d[2],d[3]),l=g.y(d[2],d[3]),i.rotate(d[1],u,l)):i.rotate(d[1],d[2],d[3])):"s"==h?2==f||3==f?(p=p||t,i.scale(d[1],d[f-1],p.x+p.width/2,p.y+p.height/2)):4==f?m?(u=g.x(d[2],d[3]),l=g.y(d[2],d[3]),i.scale(d[1],d[1],u,l)):i.scale(d[1],d[1],d[2],d[3]):5==f&&(m?(u=g.x(d[3],d[4]),l=g.y(d[3],d[4]),i.scale(d[1],d[2],u,l)):i.scale(d[1],d[2],d[3],d[4])):"m"==h&&7==f&&i.add(d[1],d[2],d[3],d[4],d[5],d[6])}return i}function f(e){var t=e.node.ownerSVGElement&&w(e.node.ownerSVGElement)||e.node.parentNode&&w(e.node.parentNode)||n.select("svg")||n(0,0),r=t.select("defs"),i=null!=r&&r.node;return i||(i=_("defs",t.node).node),i}function h(e){return e.node.ownerSVGElement&&w(e.node.ownerSVGElement)||n.select("svg")}function m(e,t,n){function i(e){if(null==e)return I;if(e==+e)return e;r(u,{width:e});try{return u.getBBox().width}catch(e){return 0}}function o(e){if(null==e)return I;if(e==+e)return e;r(u,{height:e});try{return u.getBBox().height}catch(e){return 0}}function a(r,i){null==t?c[r]=i(e.attr(r)||0):r==t&&(c=i(null==n?e.attr(r)||0:n))}var s=h(e).node,c={},u=s.querySelector(".svg---mgr");switch(u||(u=r("rect"),r(u,{x:-9e9,y:-9e9,width:10,height:10,class:"svg---mgr",fill:"none"}),s.appendChild(u)),e.type){case"rect":a("rx",i),a("ry",o);case"image":a("width",i),a("height",o);case"text":a("x",i),a("y",o);break;case"circle":a("cx",i),a("cy",o),a("r",i);break;case"ellipse":a("cx",i),a("cy",o),a("rx",i),a("ry",o);break;case"line":a("x1",i),a("x2",i),a("y1",o),a("y2",o);break;case"marker":a("refX",i),a("markerWidth",i),a("refY",o),a("markerHeight",o);break;case"radialGradient":a("fx",i),a("fy",o);break;case"tspan":a("dx",i),a("dy",o);break;default:a(t,i)}return s.removeChild(u),c}function v(e){i(e,"array")||(e=Array.prototype.slice.call(arguments,0));for(var t=0,n=0,r=this.node;this[t];)delete this[t++];for(t=0;t<e.length;t++)"set"==e[t].type?e[t].forEach(function(e){r.appendChild(e.node)}):r.appendChild(e[t].node);var o=r.childNodes;for(t=0;t<o.length;t++)this[n++]=w(o[t]);return this}function y(e){if(e.snap in W)return W[e.snap];var t;try{t=e.ownerSVGElement}catch(e){}this.node=e,t&&(this.paper=new b(t)),this.type=e.tagName;var n=this.id=V(this);if(this.anims={},this._={transform:[]},e.snap=n,W[n]=this,"g"==this.type&&(this.add=v),this.type in{g:1,mask:1,pattern:1,symbol:1})for(var r in b.prototype)b.prototype[C](r)&&(this[r]=b.prototype[r])}function x(e){this.node=e}function _(e,t){var n=r(e);t.appendChild(n);var i=w(n);return i}function b(e,t){var n,i,o,a=b.prototype;if(e&&"svg"==e.tagName){if(e.snap in W)return W[e.snap];var s=e.ownerDocument;n=new y(e),i=e.getElementsByTagName("desc")[0],o=e.getElementsByTagName("defs")[0],i||(i=r("desc"),i.appendChild(s.createTextNode("Created with Snap")),n.node.appendChild(i)),o||(o=r("defs"),n.node.appendChild(o)),n.defs=o;for(var c in a)a[C](c)&&(n[c]=a[c]);n.paper=n.root=n}else n=_("svg",E.doc.body),r(n.node,{height:t,version:1.1,width:e,xmlns:H});return n}function w(e){return e?e instanceof y||e instanceof x?e:e.tagName&&"svg"==e.tagName.toLowerCase()?new b(e):e.tagName&&"object"==e.tagName.toLowerCase()&&"image/svg+xml"==e.type?new b(e.contentDocument.getElementsByTagName("svg")[0]):new y(e):e}n.version="0.3.0",n.toString=function(){return"Snap v"+this.version},n._={};var E={win:e.window,doc:e.window.document};n._.glob=E;var C="hasOwnProperty",S=String,T=parseFloat,M=parseInt,P=Math,A=P.max,R=P.min,k=P.abs,N=(P.pow,P.PI),I=(P.round,""),D=Object.prototype.toString,O=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,B=(n._.separator=/[,\s]+/,/[\s]*,[\s]*/),j={hs:1,rg:1},L=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,F=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,z=/(-?\d*\.?\d*(?:e[\-+]?\\d+)?)[\s]*,?[\s]*/gi,U=0,$="S"+(+new Date).toString(36),V=function(e){return(e&&e.type?e.type:I)+$+(U++).toString(36)},G="http://www.w3.org/1999/xlink",H="http://www.w3.org/2000/svg",W={};n.url=function(e){return"url('#"+e+"')"};n._.$=r,n._.id=V,n.format=function(){var e=/\{([^\}]+)\}/g,t=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,n=function(e,n,r){var i=r;return n.replace(t,function(e,t,n,r,o){t=t||r,i&&(t in i&&(i=i[t]),"function"==typeof i&&o&&(i=i()))}),i=(null==i||i==r?e:i)+""};return function(t,r){return S(t).replace(e,function(e,t){return n(e,t,r)})}}(),n._.clone=o,n._.cacher=s,n.rad=u,n.deg=l,n.angle=c,n.is=i,n.snapTo=function(e,t,n){if(n=i(n,"finite")?n:10,i(e,"array")){for(var r=e.length;r--;)if(k(e[r]-t)<=n)return e[r]}else{e=+e;var o=t%e;if(o<n)return t-o;if(o>e-n)return t-o+e}return t},n.getRGB=s(function(e){if(!e||(e=S(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:K};if("none"==e)return{r:-1,g:-1,b:-1,hex:"none",toString:K};if(!(j[C](e.toLowerCase().substring(0,2))||"#"==e.charAt())&&(e=q(e)),!e)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:K};var t,r,o,a,s,c,u=e.match(O);return u?(u[2]&&(o=M(u[2].substring(5),16),r=M(u[2].substring(3,5),16),t=M(u[2].substring(1,3),16)),u[3]&&(o=M((s=u[3].charAt(3))+s,16),r=M((s=u[3].charAt(2))+s,16),t=M((s=u[3].charAt(1))+s,16)),u[4]&&(c=u[4].split(B),t=T(c[0]),"%"==c[0].slice(-1)&&(t*=2.55),r=T(c[1]),"%"==c[1].slice(-1)&&(r*=2.55),o=T(c[2]),"%"==c[2].slice(-1)&&(o*=2.55),"rgba"==u[1].toLowerCase().slice(0,4)&&(a=T(c[3])),c[3]&&"%"==c[3].slice(-1)&&(a/=100)),u[5]?(c=u[5].split(B),t=T(c[0]),"%"==c[0].slice(-1)&&(t/=100),r=T(c[1]),"%"==c[1].slice(-1)&&(r/=100),o=T(c[2]),"%"==c[2].slice(-1)&&(o/=100),("deg"==c[0].slice(-3)||"°"==c[0].slice(-1))&&(t/=360),"hsba"==u[1].toLowerCase().slice(0,4)&&(a=T(c[3])),c[3]&&"%"==c[3].slice(-1)&&(a/=100),n.hsb2rgb(t,r,o,a)):u[6]?(c=u[6].split(B),t=T(c[0]),"%"==c[0].slice(-1)&&(t/=100),r=T(c[1]),"%"==c[1].slice(-1)&&(r/=100),o=T(c[2]),"%"==c[2].slice(-1)&&(o/=100),("deg"==c[0].slice(-3)||"°"==c[0].slice(-1))&&(t/=360),"hsla"==u[1].toLowerCase().slice(0,4)&&(a=T(c[3])),c[3]&&"%"==c[3].slice(-1)&&(a/=100),n.hsl2rgb(t,r,o,a)):(t=R(P.round(t),255),r=R(P.round(r),255),o=R(P.round(o),255),a=R(A(a,0),1),u={r:t,g:r,b:o,toString:K},u.hex="#"+(16777216|o|r<<8|t<<16).toString(16).slice(1),u.opacity=i(a,"finite")?a:1,u)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:K}},n),n.hsb=s(function(e,t,r){return n.hsb2rgb(e,t,r).hex}),n.hsl=s(function(e,t,r){return n.hsl2rgb(e,t,r).hex}),n.rgb=s(function(e,t,n,r){if(i(r,"finite")){var o=P.round;return"rgba("+[o(e),o(t),o(n),+r.toFixed(2)]+")"}return"#"+(16777216|n|t<<8|e<<16).toString(16).slice(1)});var q=function(e){var t=E.doc.getElementsByTagName("head")[0]||E.doc.getElementsByTagName("svg")[0],n="rgb(255, 0, 0)";return(q=s(function(e){if("red"==e.toLowerCase())return n;t.style.color=n,t.style.color=e;var r=E.doc.defaultView.getComputedStyle(t,I).getPropertyValue("color");return r==n?null:r}))(e)},Y=function(){return"hsb("+[this.h,this.s,this.b]+")"},X=function(){return"hsl("+[this.h,this.s,this.l]+")"},K=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},Q=function(e,t,r){if(null==t&&i(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(r=e.b,t=e.g,e=e.r),null==t&&i(e,string)){var o=n.getRGB(e);e=o.r,t=o.g,r=o.b}return(e>1||t>1||r>1)&&(e/=255,t/=255,r/=255),[e,t,r]},Z=function(e,t,r,o){e=P.round(255*e),t=P.round(255*t),r=P.round(255*r);var a={r:e,g:t,b:r,opacity:i(o,"finite")?o:1,hex:n.rgb(e,t,r),toString:K};return i(o,"finite")&&(a.opacity=o),a};n.color=function(e){var t;return i(e,"object")&&"h"in e&&"s"in e&&"b"in e?(t=n.hsb2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.opacity=1,e.hex=t.hex):i(e,"object")&&"h"in e&&"s"in e&&"l"in e?(t=n.hsl2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.opacity=1,e.hex=t.hex):(i(e,"string")&&(e=n.getRGB(e)),i(e,"object")&&"r"in e&&"g"in e&&"b"in e&&!("error"in e)?(t=n.rgb2hsl(e),e.h=t.h,e.s=t.s,e.l=t.l,t=n.rgb2hsb(e),e.v=t.b):(e={hex:"none"},e.r=e.g=e.b=e.h=e.s=e.v=e.l=-1,e.error=1)),e.toString=K,e},n.hsb2rgb=function(e,t,n,r){i(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(n=e.b,t=e.s,e=e.h,r=e.o),e*=360;var o,a,s,c,u;return e=e%360/60,u=n*t,c=u*(1-k(e%2-1)),o=a=s=n-u,e=~~e,o+=[u,c,0,0,c,u][e],a+=[c,u,u,c,0,0][e],s+=[0,0,c,u,u,c][e],Z(o,a,s,r)},n.hsl2rgb=function(e,t,n,r){i(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(n=e.l,t=e.s,e=e.h),(e>1||t>1||n>1)&&(e/=360,t/=100,n/=100),e*=360;var o,a,s,c,u;return e=e%360/60,u=2*t*(n<.5?n:1-n),c=u*(1-k(e%2-1)),o=a=s=n-u/2,e=~~e,o+=[u,c,0,0,c,u][e],a+=[c,u,u,c,0,0][e],s+=[0,0,c,u,u,c][e],Z(o,a,s,r)},n.rgb2hsb=function(e,t,n){n=Q(e,t,n),e=n[0],t=n[1],n=n[2];var r,i,o,a;return o=A(e,t,n),a=o-R(e,t,n),r=0==a?null:o==e?(t-n)/a:o==t?(n-e)/a+2:(e-t)/a+4,r=(r+360)%6*60/360,i=0==a?0:a/o,{h:r,s:i,b:o,toString:Y}},n.rgb2hsl=function(e,t,n){n=Q(e,t,n),e=n[0],t=n[1],n=n[2];var r,i,o,a,s,c;return a=A(e,t,n),s=R(e,t,n),c=a-s,r=0==c?null:a==e?(t-n)/c:a==t?(n-e)/c+2:(e-t)/c+4,r=(r+360)%6*60/360,o=(a+s)/2,i=0==c?0:o<.5?c/(2*o):c/(2-2*o),{h:r,s:i,l:o,toString:X}},n.parsePathString=function(e){if(!e)return null;var t=n.path(e);if(t.arr)return n.path.clone(t.arr);var r={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},o=[];return i(e,"array")&&i(e[0],"array")&&(o=n.path.clone(e)),o.length||S(e).replace(L,function(e,t,n){var i=[],a=t.toLowerCase();if(n.replace(z,function(e,t){t&&i.push(+t)}),"m"==a&&i.length>2&&(o.push([t].concat(i.splice(0,2))),a="l",t="m"==t?"l":"L"),"o"==a&&1==i.length&&o.push([t,i[0]]),"r"==a)o.push([t].concat(i));else for(;i.length>=r[a]&&(o.push([t].concat(i.splice(0,r[a]))),r[a]););}),o.toString=n.path.toString,t.arr=n.path.clone(o),o};var J=n.parseTransformString=function(e){if(!e)return null;var t=[];return i(e,"array")&&i(e[0],"array")&&(t=n.path.clone(e)),t.length||S(e).replace(F,function(e,n,r){var i=[];n.toLowerCase();r.replace(z,function(e,t){t&&i.push(+t)}),t.push([n].concat(i))}),t.toString=n.path.toString,t};n._.svgTransform2string=p,n._.rgTransform=/^[a-z][\s]*-?\.?\d/i,n._.transform2matrix=d,n._unit2px=m;E.doc.contains||E.doc.compareDocumentPosition?function(e,t){var n=9==e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e==r||!(!r||1!=r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t;)if(t=t.parentNode,t==e)return!0;return!1};n._.getSomeDefs=f,n._.getSomeSVG=h,n.select=function(e){return e=S(e).replace(/([^\\]):/g,"$1\\:"),w(E.doc.querySelector(e))},n.selectAll=function(e){for(var t=E.doc.querySelectorAll(e),r=(n.set||Array)(),i=0;i<t.length;i++)r.push(w(t[i]));return r},setInterval(function(){for(var e in W)if(W[C](e)){var t=W[e],n=t.node;("svg"!=t.type&&!n.ownerSVGElement||"svg"==t.type&&(!n.parentNode||"ownerSVGElement"in n.parentNode&&!n.ownerSVGElement))&&delete W[e]}},1e4),y.prototype.attr=function(e,n){var r=this;r.node;if(!e)return r;if(i(e,"string")){if(!(arguments.length>1))return t("snap.util.getattr."+e,r).firstDefined();var o={};o[e]=n,e=o}for(var a in e)e[C](a)&&t("snap.util.attr."+a,r,e[a]);return r},n.parse=function(e){var t=E.doc.createDocumentFragment(),n=!0,r=E.doc.createElement("div");if(e=S(e),e.match(/^\s*<\s*svg(?:\s|>)/)||(e="<svg>"+e+"</svg>",n=!1),r.innerHTML=e,e=r.getElementsByTagName("svg")[0])if(n)t=e;else{for(;e.firstChild;)t.appendChild(e.firstChild);r.innerHTML=I}return new x(t)},n.fragment=function(){for(var e=Array.prototype.slice.call(arguments,0),t=E.doc.createDocumentFragment(),r=0,i=e.length;r<i;r++){var o=e[r];o.node&&o.node.nodeType&&t.appendChild(o.node),o.nodeType&&t.appendChild(o),"string"==typeof o&&t.appendChild(n.parse(o).node)}return new x(t)},n._.make=_,n._.wrap=w,b.prototype.el=function(e,t){var n=_(e,this.node);return t&&n.attr(t),n},t.on("snap.util.getattr",function(){var e=t.nt();e=e.substring(e.lastIndexOf(".")+1);var n=e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});return ee[C](n)?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(n):r(this.node,e)});var ee={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};t.on("snap.util.attr",function(e){var n=t.nt(),i={};n=n.substring(n.lastIndexOf(".")+1),i[n]=e;var o=n.replace(/-(\w)/gi,function(e,t){return t.toUpperCase()}),a=n.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});ee[C](a)?this.node.style[o]=null==e?I:e:r(this.node,i)}),function(e){}(b.prototype),n.ajax=function(e,n,r,o){var a=new XMLHttpRequest,s=V();if(a){if(i(n,"function"))o=r,r=n,n=null;else if(i(n,"object")){var c=[];for(var u in n)n.hasOwnProperty(u)&&c.push(encodeURIComponent(u)+"="+encodeURIComponent(n[u]));n=c.join("&")}return a.open(n?"POST":"GET",e,!0),n&&(a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.setRequestHeader("Content-type","application/x-www-form-urlencoded")),r&&(t.once("snap.ajax."+s+".0",r),t.once("snap.ajax."+s+".200",r),t.once("snap.ajax."+s+".304",r)),a.onreadystatechange=function(){4==a.readyState&&t("snap.ajax."+s+"."+a.status,o,a)},4==a.readyState?a:(a.send(n),a)}},n.load=function(e,t,r){n.ajax(e,function(e){var i=n.parse(e.responseText);r?t.call(r,i):t(i)})};var te=function(e){var t=e.getBoundingClientRect(),n=e.ownerDocument,r=n.body,i=n.documentElement,o=i.clientTop||r.clientTop||0,a=i.clientLeft||r.clientLeft||0,s=t.top+(g.win.pageYOffset||i.scrollTop||r.scrollTop)-o,c=t.left+(g.win.pageXOffset||i.scrollLeft||r.scrollLeft)-a;return{y:s,x:c}};return n.getElementByPoint=function(e,t){var n=this,r=(n.canvas,E.doc.elementFromPoint(e,t));if(E.win.opera&&"svg"==r.tagName){var i=te(r),o=r.createSVGRect();o.x=e-i.x,o.y=t-i.y,o.width=o.height=1;var a=r.getIntersectionList(o,null);a.length&&(r=a[a.length-1])}return r?w(r):null},n.plugin=function(e){e(n,y,b,E,x)},E.win.Snap=n,n}(e||this);return r.plugin(function(r,i,o,a,s){function c(e,t){if(null==t){var n=!0;if(t="linearGradient"==e.type||"radialGradient"==e.type?e.node.getAttribute("gradientTransform"):"pattern"==e.type?e.node.getAttribute("patternTransform"):e.node.getAttribute("transform"),!t)return new r.Matrix;t=r._.svgTransform2string(t)}else t=r._.rgTransform.test(t)?h(t).replace(/\.{3}|\u2026/g,e._.transform||E):r._.svgTransform2string(t),f(t,"array")&&(t=r.path?r.path.toString.call(t):h(t)),e._.transform=t;var i=r._.transform2matrix(t,e.getBBox(1));return n?i:void(e.matrix=i)}function u(e){function t(e,t){var n=g(e.node,t);n=n&&n.match(o),n=n&&n[2],n&&"#"==n.charAt()&&(n=n.substring(1),n&&(s[n]=(s[n]||[]).concat(function(n){var r={};r[t]=URL(n),g(e.node,r)})))}function n(e){var t=g(e.node,"xlink:href");t&&"#"==t.charAt()&&(t=t.substring(1),t&&(s[t]=(s[t]||[]).concat(function(t){e.attr("xlink:href","#"+t)})))}for(var r,i=e.selectAll("*"),o=/^\s*url\(("|'|)(.*)\1\)\s*$/,a=[],s={},c=0,u=i.length;c<u;c++){r=i[c],t(r,"fill"),t(r,"stroke"),t(r,"filter"),t(r,"mask"),t(r,"clip-path"),n(r);var l=g(r.node,"id");l&&(g(r.node,{id:r.id}),a.push({old:l,id:r.id}))}for(c=0,u=a.length;c<u;c++){var p=s[a[c].old];if(p)for(var d=0,f=p.length;d<f;d++)p[d](a[c].id)}}function l(e,t,n){return function(r){var i=r.slice(e,t);return 1==i.length&&(i=i[0]),n?n(i):i}}function p(e){return function(){var t=e?"<"+this.type:"",n=this.node.attributes,r=this.node.childNodes;if(e)for(var i=0,o=n.length;i<o;i++)t+=" "+n[i].name+'="'+n[i].value.replace(/"/g,'\\"')+'"';if(r.length){for(e&&(t+=">"),i=0,o=r.length;i<o;i++)3==r[i].nodeType?t+=r[i].nodeValue:1==r[i].nodeType&&(t+=_(r[i]).toString());e&&(t+="</"+this.type+">")}else e&&(t+="/>");return t}}var d=i.prototype,f=r.is,h=String,m=r._unit2px,g=r._.$,v=r._.make,y=r._.getSomeDefs,x="hasOwnProperty",_=r._.wrap;d.getBBox=function(e){if(!r.Matrix||!r.path)return this.node.getBBox();var t=this,n=new r.Matrix;if(t.removed)return r._.box();for(;"use"==t.type;)if(e||(n=n.add(t.transform().localMatrix.translate(t.attr("x")||0,t.attr("y")||0))),t.original)t=t.original;else{var i=t.attr("xlink:href");t=t.original=t.node.ownerDocument.getElementById(i.substring(i.indexOf("#")+1))}var o=t._,a=r.path.get[t.type]||r.path.get.deflt;try{return e?(o.bboxwt=a?r.path.getBBox(t.realPath=a(t)):r._.box(t.node.getBBox()),r._.box(o.bboxwt)):(t.realPath=a(t),t.matrix=t.transform().localMatrix,o.bbox=r.path.getBBox(r.path.map(t.realPath,n.add(t.matrix))),r._.box(o.bbox))}catch(e){return r._.box()}};var b=function(){return this.string};d.transform=function(e){var t=this._;if(null==e){for(var n,i=this,o=new r.Matrix(this.node.getCTM()),a=c(this),s=[a],u=new r.Matrix,l=a.toTransformString(),p=h(a)==h(this.matrix)?h(t.transform):l;"svg"!=i.type&&(i=i.parent());)s.push(c(i));for(n=s.length;n--;)u.add(s[n]);return{string:p,globalMatrix:o,totalMatrix:u,localMatrix:a,diffMatrix:o.clone().add(a.invert()),global:o.toTransformString(),total:u.toTransformString(),local:l,toString:b}}return e instanceof r.Matrix?(this.matrix=e,this._.transform=e.toTransformString()):c(this,e),this.node&&("linearGradient"==this.type||"radialGradient"==this.type?g(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?g(this.node,{patternTransform:this.matrix}):g(this.node,{transform:this.matrix})),this},d.parent=function(){return _(this.node.parentNode)},d.append=d.add=function(e){if(e){if("set"==e.type){var t=this;return e.forEach(function(e){t.add(e)}),this}e=_(e),this.node.appendChild(e.node),e.paper=this.paper}return this},d.appendTo=function(e){return e&&(e=_(e),e.append(this)),this},d.prepend=function(e){if(e){if("set"==e.type){var t,n=this;return e.forEach(function(e){t?t.after(e):n.prepend(e),t=e}),this}e=_(e);var r=e.parent();this.node.insertBefore(e.node,this.node.firstChild),this.add&&this.add(),e.paper=this.paper,this.parent()&&this.parent().add(),r&&r.add()}return this},d.prependTo=function(e){return e=_(e),e.prepend(this),this},d.before=function(e){if("set"==e.type){var t=this;return e.forEach(function(e){var n=e.parent();t.node.parentNode.insertBefore(e.node,t.node),n&&n.add()}),this.parent().add(),this}e=_(e);var n=e.parent();return this.node.parentNode.insertBefore(e.node,this.node),this.parent()&&this.parent().add(),n&&n.add(),e.paper=this.paper,this},d.after=function(e){e=_(e);var t=e.parent();return this.node.nextSibling?this.node.parentNode.insertBefore(e.node,this.node.nextSibling):this.node.parentNode.appendChild(e.node),this.parent()&&this.parent().add(),t&&t.add(),e.paper=this.paper,this},d.insertBefore=function(e){e=_(e);var t=this.parent();return e.node.parentNode.insertBefore(this.node,e.node),this.paper=e.paper,t&&t.add(),e.parent()&&e.parent().add(),this},d.insertAfter=function(e){e=_(e);var t=this.parent();return e.node.parentNode.insertBefore(this.node,e.node.nextSibling),this.paper=e.paper,t&&t.add(),e.parent()&&e.parent().add(),this},d.remove=function(){var e=this.parent();return this.node.parentNode&&this.node.parentNode.removeChild(this.node),delete this.paper,this.removed=!0,e&&e.add(),this},d.select=function(e){return e=h(e).replace(/([^\\]):/g,"$1\\:"),_(this.node.querySelector(e))},d.selectAll=function(e){for(var t=this.node.querySelectorAll(e),n=(r.set||Array)(),i=0;i<t.length;i++)n.push(_(t[i]));return n},d.asPX=function(e,t){return null==t&&(t=this.attr(e)),+m(this,e,t)},d.use=function(){var e,t=this.node.id;return t||(t=this.id,g(this.node,{id:t})),e="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?v(this.type,this.node.parentNode):v("use",this.node.parentNode),g(e.node,{"xlink:href":"#"+t}),e.original=this,e},d.clone=function(){var e=_(this.node.cloneNode(!0));return g(e.node,"id")&&g(e.node,{id:e.id}),u(e),e.insertAfter(this),e},d.toDefs=function(){var e=y(this);return e.appendChild(this.node),this},d.pattern=d.toPattern=function(e,t,n,r){var i=v("pattern",y(this));return null==e&&(e=this.getBBox()),f(e,"object")&&"x"in e&&(t=e.y,n=e.width,r=e.height,e=e.x),g(i.node,{x:e,y:t,width:n,height:r,patternUnits:"userSpaceOnUse",id:i.id,viewBox:[e,t,n,r].join(" ")}),i.node.appendChild(this.node),i},d.marker=function(e,t,n,r,i,o){var a=v("marker",y(this));return null==e&&(e=this.getBBox()),f(e,"object")&&"x"in e&&(t=e.y,n=e.width,r=e.height,i=e.refX||e.cx,o=e.refY||e.cy,e=e.x),g(a.node,{viewBox:[e,t,n,r].join(" "),markerWidth:n,markerHeight:r,orient:"auto",refX:i||0,refY:o||0,id:a.id}),a.node.appendChild(this.node),a};var w=function(e,t,r,i){"function"!=typeof r||r.length||(i=r,r=n.linear),this.attr=e,this.dur=t,r&&(this.easing=r),i&&(this.callback=i)};r._.Animation=w,r.animation=function(e,t,n,r){return new w(e,t,n,r)},d.inAnim=function(){var e=this,t=[];for(var n in e.anims)e.anims[x](n)&&!function(e){t.push({anim:new w(e._attrs,e.dur,e.easing,e._callback),mina:e,curStatus:e.status(),status:function(t){return e.status(t)},stop:function(){e.stop()}})}(e.anims[n]);return t},r.animate=function(e,r,i,o,a,s){"function"!=typeof a||a.length||(s=a,a=n.linear);var c=n.time(),u=n(e,r,c,c+o,n.time,i,a);return s&&t.once("mina.finish."+u.id,s),u},d.stop=function(){for(var e=this.inAnim(),t=0,n=e.length;t<n;t++)e[t].stop();return this},d.animate=function(e,r,i,o){"function"!=typeof i||i.length||(o=i,i=n.linear),e instanceof w&&(o=e.callback,i=e.easing,r=i.dur,e=e.attr);var a,s,c,u,p=[],d=[],m={},g=this;for(var v in e)if(e[x](v)){g.equal?(u=g.equal(v,h(e[v])),a=u.from,s=u.to,c=u.f):(a=+g.attr(v),s=+e[v]);var y=f(a,"array")?a.length:1;m[v]=l(p.length,p.length+y,c),p=p.concat(a),d=d.concat(s)}var _=n.time(),b=n(p,d,_,_+r,n.time,function(e){var t={};for(var n in m)m[x](n)&&(t[n]=m[n](e));g.attr(t)},i);return g.anims[b.id]=b,b._attrs=e,b._callback=o,t("snap.animcreated."+g.id,b),t.once("mina.finish."+b.id,function(){delete g.anims[b.id],o&&o.call(g)}),t.once("mina.stop."+b.id,function(){delete g.anims[b.id]}),g};var C={};d.data=function(e,n){var i=C[this.id]=C[this.id]||{};if(0==arguments.length)return t("snap.data.get."+this.id,this,i,null),i;if(1==arguments.length){if(r.is(e,"object")){for(var o in e)e[x](o)&&this.data(o,e[o]);return this}return t("snap.data.get."+this.id,this,i[e],e),i[e]}return i[e]=n,t("snap.data.set."+this.id,this,n,e),this},d.removeData=function(e){return null==e?C[this.id]={}:C[this.id]&&delete C[this.id][e],this},d.outerSVG=d.toString=p(1),d.innerSVG=p(),d.toDataURL=function(){if(e&&e.btoa){var t=this.getBBox(),n=r.format('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="{width}" height="{height}" viewBox="{x} {y} {width} {height}">{contents}</svg>',{x:+t.x.toFixed(3),y:+t.y.toFixed(3),width:+t.width.toFixed(3),height:+t.height.toFixed(3),contents:this.outerSVG()});return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(n)))}},s.prototype.select=d.select,s.prototype.selectAll=d.selectAll}),r.plugin(function(e,t,n,r,i){function o(e,t,n,r,i,o){return null==t&&"[object SVGMatrix]"==a.call(e)?(this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.e=e.e,void(this.f=e.f)):void(null!=e?(this.a=+e,this.b=+t,this.c=+n,this.d=+r,this.e=+i,this.f=+o):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0))}var a=Object.prototype.toString,s=String,c=Math,u="";!function(t){function n(e){return e[0]*e[0]+e[1]*e[1]}function r(e){var t=c.sqrt(n(e));e[0]&&(e[0]/=t),e[1]&&(e[1]/=t)}t.add=function(e,t,n,r,i,a){var s,c,u,l,p=[[],[],[]],d=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],f=[[e,n,i],[t,r,a],[0,0,1]];for(e&&e instanceof o&&(f=[[e.a,e.c,e.e],[e.b,e.d,e.f],[0,0,1]]),s=0;s<3;s++)for(c=0;c<3;c++){for(l=0,u=0;u<3;u++)l+=d[s][u]*f[u][c];p[s][c]=l}return this.a=p[0][0],this.b=p[1][0],this.c=p[0][1],this.d=p[1][1],this.e=p[0][2],this.f=p[1][2],this},t.invert=function(){var e=this,t=e.a*e.d-e.b*e.c;return new o(e.d/t,-e.b/t,-e.c/t,e.a/t,(e.c*e.f-e.d*e.e)/t,(e.b*e.e-e.a*e.f)/t)},t.clone=function(){return new o(this.a,this.b,this.c,this.d,this.e,this.f)},t.translate=function(e,t){return this.add(1,0,0,1,e,t)},t.scale=function(e,t,n,r){return null==t&&(t=e),(n||r)&&this.add(1,0,0,1,n,r),this.add(e,0,0,t,0,0),(n||r)&&this.add(1,0,0,1,-n,-r),this},t.rotate=function(t,n,r){t=e.rad(t),n=n||0,r=r||0;var i=+c.cos(t).toFixed(9),o=+c.sin(t).toFixed(9);return this.add(i,o,-o,i,n,r),this.add(1,0,0,1,-n,-r)},t.x=function(e,t){return e*this.a+t*this.c+this.e},t.y=function(e,t){return e*this.b+t*this.d+this.f},t.get=function(e){return+this[s.fromCharCode(97+e)].toFixed(4)},t.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"},t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},t.determinant=function(){return this.a*this.d-this.b*this.c},t.split=function(){var t={};t.dx=this.e,t.dy=this.f;var i=[[this.a,this.c],[this.b,this.d]];t.scalex=c.sqrt(n(i[0])),r(i[0]),t.shear=i[0][0]*i[1][0]+i[0][1]*i[1][1],i[1]=[i[1][0]-i[0][0]*t.shear,i[1][1]-i[0][1]*t.shear],t.scaley=c.sqrt(n(i[1])),r(i[1]),t.shear/=t.scaley,this.determinant()<0&&(t.scalex=-t.scalex);var o=-i[0][1],a=i[1][1];return a<0?(t.rotate=e.deg(c.acos(a)),o<0&&(t.rotate=360-t.rotate)):t.rotate=e.deg(c.asin(o)),t.isSimple=!(+t.shear.toFixed(9)||t.scalex.toFixed(9)!=t.scaley.toFixed(9)&&t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t},t.toTransformString=function(e){var t=e||this.split();return+t.shear.toFixed(9)?"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]:(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[+t.dx.toFixed(4),+t.dy.toFixed(4)]:u)+(1!=t.scalex||1!=t.scaley?"s"+[t.scalex,t.scaley,0,0]:u)+(t.rotate?"r"+[+t.rotate.toFixed(4),0,0]:u))}}(o.prototype),e.Matrix=o,e.matrix=function(e,t,n,r,i,a){return new o(e,t,n,r,i,a)}}),r.plugin(function(e,n,r,i,o){function a(r){return function(i){if(t.stop(),i instanceof o&&1==i.node.childNodes.length&&("radialGradient"==i.node.firstChild.tagName||"linearGradient"==i.node.firstChild.tagName||"pattern"==i.node.firstChild.tagName)&&(i=i.node.firstChild,f(this).appendChild(i),i=p(i)),i instanceof n)if("radialGradient"==i.type||"linearGradient"==i.type||"pattern"==i.type){i.node.id||m(i.node,{id:i.id});var a=g(i.node.id)}else a=i.attr(r);else if(a=e.color(i),a.error){var s=e(f(this).ownerSVGElement).gradient(i);s?(s.node.id||m(s.node,{id:s.id}),a=g(s.node.id)):a=i}else a=v(a);var c={};c[r]=a,m(this.node,c),this.node.style[r]=x}}function s(e){t.stop(),e==+e&&(e+="px"),this.node.style.fontSize=e}function c(e){for(var t=[],n=e.childNodes,r=0,i=n.length;r<i;r++){var o=n[r];3==o.nodeType&&t.push(o.nodeValue),"tspan"==o.tagName&&(1==o.childNodes.length&&3==o.firstChild.nodeType?t.push(o.firstChild.nodeValue):t.push(c(o)))}return t}function u(){return t.stop(),this.node.style.fontSize}var l=e._.make,p=e._.wrap,d=e.is,f=e._.getSomeDefs,h=/^url\(#?([^)]+)\)$/,m=e._.$,g=e.url,v=String,y=e._.separator,x="";t.on("snap.util.attr.mask",function(e){if(e instanceof n||e instanceof o){if(t.stop(),e instanceof o&&1==e.node.childNodes.length&&(e=e.node.firstChild,f(this).appendChild(e),e=p(e)),"mask"==e.type)var r=e;else r=l("mask",f(this)),r.node.appendChild(e.node);!r.node.id&&m(r.node,{id:r.id}),m(this.node,{mask:g(r.id)})}}),function(e){t.on("snap.util.attr.clip",e),t.on("snap.util.attr.clip-path",e),t.on("snap.util.attr.clipPath",e)}(function(e){if(e instanceof n||e instanceof o){if(t.stop(),"clipPath"==e.type)var r=e;else r=l("clipPath",f(this)),r.node.appendChild(e.node),!r.node.id&&m(r.node,{id:r.id});m(this.node,{"clip-path":g(r.node.id||r.id)})}}),t.on("snap.util.attr.fill",a("fill")),t.on("snap.util.attr.stroke",a("stroke"));var _=/^([lr])(?:\(([^)]*)\))?(.*)$/i;t.on("snap.util.grad.parse",function(e){e=v(e);var t=e.match(_);if(!t)return null;var n=t[1],r=t[2],i=t[3];return r=r.split(/\s*,\s*/).map(function(e){return+e==e?+e:e}),1==r.length&&0==r[0]&&(r=[]),i=i.split("-"),i=i.map(function(e){e=e.split(":");var t={color:e[0]};return e[1]&&(t.offset=parseFloat(e[1])),t}),{type:n,params:r,stops:i
}}),t.on("snap.util.attr.d",function(n){t.stop(),d(n,"array")&&d(n[0],"array")&&(n=e.path.toString.call(n)),n=v(n),n.match(/[ruo]/i)&&(n=e.path.toAbsolute(n)),m(this.node,{d:n})})(-1),t.on("snap.util.attr.#text",function(e){t.stop(),e=v(e);for(var n=i.doc.createTextNode(e);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(n)})(-1),t.on("snap.util.attr.path",function(e){t.stop(),this.attr({d:e})})(-1),t.on("snap.util.attr.class",function(e){t.stop(),this.node.className.baseVal=e})(-1),t.on("snap.util.attr.viewBox",function(e){var n;n=d(e,"object")&&"x"in e?[e.x,e.y,e.width,e.height].join(" "):d(e,"array")?e.join(" "):e,m(this.node,{viewBox:n}),t.stop()})(-1),t.on("snap.util.attr.transform",function(e){this.transform(e),t.stop()})(-1),t.on("snap.util.attr.r",function(e){"rect"==this.type&&(t.stop(),m(this.node,{rx:e,ry:e}))})(-1),t.on("snap.util.attr.textpath",function(e){if(t.stop(),"text"==this.type){var r,i,o;if(!e&&this.textPath){for(i=this.textPath;i.node.firstChild;)this.node.appendChild(i.node.firstChild);return i.remove(),void delete this.textPath}if(d(e,"string")){var a=f(this),s=p(a.parentNode).path(e);a.appendChild(s.node),r=s.id,s.attr({id:r})}else e=p(e),e instanceof n&&(r=e.attr("id"),r||(r=e.id,e.attr({id:r})));if(r)if(i=this.textPath,o=this.node,i)i.attr({"xlink:href":"#"+r});else{for(i=m("textPath",{"xlink:href":"#"+r});o.firstChild;)i.appendChild(o.firstChild);o.appendChild(i),this.textPath=p(i)}}})(-1),t.on("snap.util.attr.text",function(e){if("text"==this.type){for(var n=this.node,r=function(e){var t=m("tspan");if(d(e,"array"))for(var n=0;n<e.length;n++)t.appendChild(r(e[n]));else t.appendChild(i.doc.createTextNode(e));return t.normalize&&t.normalize(),t};n.firstChild;)n.removeChild(n.firstChild);for(var o=r(e);o.firstChild;)n.appendChild(o.firstChild)}t.stop()})(-1),t.on("snap.util.attr.fontSize",s)(-1),t.on("snap.util.attr.font-size",s)(-1),t.on("snap.util.getattr.transform",function(){return t.stop(),this.transform()})(-1),t.on("snap.util.getattr.textpath",function(){return t.stop(),this.textPath})(-1),function(){function n(n){return function(){t.stop();var r=i.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+n);return"none"==r?r:e(i.doc.getElementById(r.match(h)[1]))}}function r(e){return function(n){t.stop();var r="marker"+e.charAt(0).toUpperCase()+e.substring(1);if(""==n||!n)return void(this.node.style[r]="none");if("marker"==n.type){var i=n.node.id;return i||m(n.node,{id:n.id}),void(this.node.style[r]=g(i))}}}t.on("snap.util.getattr.marker-end",n("end"))(-1),t.on("snap.util.getattr.markerEnd",n("end"))(-1),t.on("snap.util.getattr.marker-start",n("start"))(-1),t.on("snap.util.getattr.markerStart",n("start"))(-1),t.on("snap.util.getattr.marker-mid",n("mid"))(-1),t.on("snap.util.getattr.markerMid",n("mid"))(-1),t.on("snap.util.attr.marker-end",r("end"))(-1),t.on("snap.util.attr.markerEnd",r("end"))(-1),t.on("snap.util.attr.marker-start",r("start"))(-1),t.on("snap.util.attr.markerStart",r("start"))(-1),t.on("snap.util.attr.marker-mid",r("mid"))(-1),t.on("snap.util.attr.markerMid",r("mid"))(-1)}(),t.on("snap.util.getattr.r",function(){if("rect"==this.type&&m(this.node,"rx")==m(this.node,"ry"))return t.stop(),m(this.node,"rx")})(-1),t.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){t.stop();var e=c(this.node);return 1==e.length?e[0]:e}})(-1),t.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1),t.on("snap.util.getattr.viewBox",function(){t.stop();var n=m(this.node,"viewBox");return n?(n=n.split(y),e._.box(+n[0],+n[1],+n[2],+n[3])):void 0})(-1),t.on("snap.util.getattr.points",function(){var e=m(this.node,"points");return t.stop(),e?e.split(y):void 0})(-1),t.on("snap.util.getattr.path",function(){var e=m(this.node,"d");return t.stop(),e})(-1),t.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1),t.on("snap.util.getattr.fontSize",u)(-1),t.on("snap.util.getattr.font-size",u)(-1)}),r.plugin(function(n,r,i,o,a){var s=i.prototype,c=n.is;s.rect=function(e,t,n,r,i,o){var a;return null==o&&(o=i),c(e,"object")&&"[object Object]"==e?a=e:null!=e&&(a={x:e,y:t,width:n,height:r},null!=i&&(a.rx=i,a.ry=o)),this.el("rect",a)},s.circle=function(e,t,n){var r;return c(e,"object")&&"[object Object]"==e?r=e:null!=e&&(r={cx:e,cy:t,r:n}),this.el("circle",r)};var u=function(){function e(){this.parentNode.removeChild(this)}return function(t,n){var r=o.doc.createElement("img"),i=o.doc.body;r.style.cssText="position:absolute;left:-9999em;top:-9999em",r.onload=function(){n.call(r),r.onload=r.onerror=null,i.removeChild(r)},r.onerror=e,i.appendChild(r),r.src=t}}();s.image=function(e,t,r,i,o){var a=this.el("image");if(c(e,"object")&&"src"in e)a.attr(e);else if(null!=e){var s={"xlink:href":e,preserveAspectRatio:"none"};null!=t&&null!=r&&(s.x=t,s.y=r),null!=i&&null!=o?(s.width=i,s.height=o):u(e,function(){n._.$(a.node,{width:this.offsetWidth,height:this.offsetHeight})}),n._.$(a.node,s)}return a},s.ellipse=function(e,t,n,r){var i;return c(e,"object")&&"[object Object]"==e?i=e:null!=e&&(i={cx:e,cy:t,rx:n,ry:r}),this.el("ellipse",i)},s.path=function(e){var t;return c(e,"object")&&!c(e,"array")?t=e:e&&(t={d:e}),this.el("path",t)},s.group=s.g=function(e){var t=this.el("g");return 1==arguments.length&&e&&!e.type?t.attr(e):arguments.length&&t.add(Array.prototype.slice.call(arguments,0)),t},s.svg=function(e,t,n,r,i,o,a,s){var u={};return c(e,"object")&&null==t?u=e:(null!=e&&(u.x=e),null!=t&&(u.y=t),null!=n&&(u.width=n),null!=r&&(u.height=r),null!=i&&null!=o&&null!=a&&null!=s&&(u.viewBox=[i,o,a,s])),this.el("svg",u)},s.mask=function(e){var t=this.el("mask");return 1==arguments.length&&e&&!e.type?t.attr(e):arguments.length&&t.add(Array.prototype.slice.call(arguments,0)),t},s.ptrn=function(e,t,n,r,i,o,a,s){if(c(e,"object"))var u=e;else u={patternUnits:"userSpaceOnUse"},e&&(u.x=e),t&&(u.y=t),null!=n&&(u.width=n),null!=r&&(u.height=r),null!=i&&null!=o&&null!=a&&null!=s&&(u.viewBox=[i,o,a,s]);return this.el("pattern",u)},s.use=function(e){return null!=e?(e instanceof r&&(e.attr("id")||e.attr({id:n._.id(e)}),e=e.attr("id")),"#"==String(e).charAt()&&(e=e.substring(1)),this.el("use",{"xlink:href":"#"+e})):r.prototype.use.call(this)},s.symbol=function(e,t,n,r){var i={};return null!=e&&null!=t&&null!=n&&null!=r&&(i.viewBox=[e,t,n,r]),this.el("symbol",i)},s.text=function(e,t,n){var r={};return c(e,"object")?r=e:null!=e&&(r={x:e,y:t,text:n||""}),this.el("text",r)},s.line=function(e,t,n,r){var i={};return c(e,"object")?i=e:null!=e&&(i={x1:e,x2:n,y1:t,y2:r}),this.el("line",i)},s.polyline=function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments,0));var t={};return c(e,"object")&&!c(e,"array")?t=e:null!=e&&(t={points:e}),this.el("polyline",t)},s.polygon=function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments,0));var t={};return c(e,"object")&&!c(e,"array")?t=e:null!=e&&(t={points:e}),this.el("polygon",t)},function(){function r(){return this.selectAll("stop")}function i(e,t){var r=l("stop"),i={offset:+t+"%"};return e=n.color(e),i["stop-color"]=e.hex,e.opacity<1&&(i["stop-opacity"]=e.opacity),l(r,i),this.node.appendChild(r),this}function o(){if("linearGradient"==this.type){var e=l(this.node,"x1")||0,t=l(this.node,"x2")||1,r=l(this.node,"y1")||0,i=l(this.node,"y2")||0;return n._.box(e,r,math.abs(t-e),math.abs(i-r))}var o=this.node.cx||.5,a=this.node.cy||.5,s=this.node.r||0;return n._.box(o-s,a-s,2*s,2*s)}function a(e,n){function r(e,t){for(var n=(t-p)/(e-d),r=d;r<e;r++)a[r].offset=+(+p+n*(r-d)).toFixed(2);d=e,p=t}var i,o=t("snap.util.grad.parse",null,n).firstDefined();if(!o)return null;o.params.unshift(e),i="l"==o.type.toLowerCase()?c.apply(0,o.params):u.apply(0,o.params),o.type!=o.type.toLowerCase()&&l(i.node,{gradientUnits:"userSpaceOnUse"});var a=o.stops,s=a.length,p=0,d=0;s--;for(var f=0;f<s;f++)"offset"in a[f]&&r(f,a[f].offset);for(a[s].offset=a[s].offset||100,r(s,a[s].offset),f=0;f<=s;f++){var h=a[f];i.addStop(h.color,h.offset)}return i}function c(e,t,a,s,c){var u=n._.make("linearGradient",e);return u.stops=r,u.addStop=i,u.getBBox=o,null!=t&&l(u.node,{x1:t,y1:a,x2:s,y2:c}),u}function u(e,t,a,s,c,u){var p=n._.make("radialGradient",e);return p.stops=r,p.addStop=i,p.getBBox=o,null!=t&&l(p.node,{cx:t,cy:a,r:s}),null!=c&&null!=u&&l(p.node,{fx:c,fy:u}),p}var l=n._.$;s.gradient=function(e){return a(this.defs,e)},s.gradientLinear=function(e,t,n,r){return c(this.defs,e,t,n,r)},s.gradientRadial=function(e,t,n,r,i){return u(this.defs,e,t,n,r,i)},s.toString=function(){var e,t=this.node.ownerDocument,r=t.createDocumentFragment(),i=t.createElement("div"),o=this.node.cloneNode(!0);return r.appendChild(i),i.appendChild(o),n._.$(o,{xmlns:"http://www.w3.org/2000/svg"}),e=i.innerHTML,r.removeChild(r.firstChild),e},s.toDataURL=function(){if(e&&e.btoa)return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(this)))},s.clear=function(){for(var e,t=this.node.firstChild;t;)e=t.nextSibling,"defs"!=t.tagName?t.parentNode.removeChild(t):s.clear.call({node:t}),t=e}}()}),r.plugin(function(e,t,n,r){function i(e){var t=i.ps=i.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var n in t)t[L](n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])}),t[e]}function o(e,t,n,r){return null==e&&(e=t=n=r=0),null==t&&(t=e.y,n=e.width,r=e.height,e=e.x),{x:e,y:t,width:n,w:n,height:r,h:r,x2:e+n,y2:t+r,cx:e+n/2,cy:t+r/2,r1:U.min(n,r)/2,r2:U.max(n,r)/2,r0:U.sqrt(n*n+r*r)/2,path:C(e,t,n,r),vb:[e,t,n,r].join(" ")}}function a(){return this.join(",").replace(F,"$1")}function s(e){var t=j(e);return t.toString=a,t}function c(e,t,n,r,i,o,a,s,c){return null==c?m(e,t,n,r,i,o,a,s):l(e,t,n,r,i,o,a,s,g(e,t,n,r,i,o,a,s,c))}function u(n,r){function i(e){return+(+e).toFixed(3)}return e._.cacher(function(e,o,a){e instanceof t&&(e=e.attr("d")),e=N(e);for(var s,u,p,d,f,h="",m={},g=0,v=0,y=e.length;v<y;v++){if(p=e[v],"M"==p[0])s=+p[1],u=+p[2];else{if(d=c(s,u,p[1],p[2],p[3],p[4],p[5],p[6]),g+d>o){if(r&&!m.start){if(f=c(s,u,p[1],p[2],p[3],p[4],p[5],p[6],o-g),h+=["C"+i(f.start.x),i(f.start.y),i(f.m.x),i(f.m.y),i(f.x),i(f.y)],a)return h;m.start=h,h=["M"+i(f.x),i(f.y)+"C"+i(f.n.x),i(f.n.y),i(f.end.x),i(f.end.y),i(p[5]),i(p[6])].join(),g+=d,s=+p[5],u=+p[6];continue}if(!n&&!r)return f=c(s,u,p[1],p[2],p[3],p[4],p[5],p[6],o-g)}g+=d,s=+p[5],u=+p[6]}h+=p.shift()+p}return m.end=h,f=n?g:r?m:l(s,u,p[0],p[1],p[2],p[3],p[4],p[5],1)},null,e._.clone)}function l(e,t,n,r,i,o,a,s,c){var u=1-c,l=H(u,3),p=H(u,2),d=c*c,f=d*c,h=l*e+3*p*c*n+3*u*c*c*i+f*a,m=l*t+3*p*c*r+3*u*c*c*o+f*s,g=e+2*c*(n-e)+d*(i-2*n+e),v=t+2*c*(r-t)+d*(o-2*r+t),y=n+2*c*(i-n)+d*(a-2*i+n),x=r+2*c*(o-r)+d*(s-2*o+r),_=u*e+c*n,b=u*t+c*r,w=u*i+c*a,E=u*o+c*s,C=90-180*U.atan2(g-y,v-x)/$;return{x:h,y:m,m:{x:g,y:v},n:{x:y,y:x},start:{x:_,y:b},end:{x:w,y:E},alpha:C}}function p(t,n,r,i,a,s,c,u){e.is(t,"array")||(t=[t,n,r,i,a,s,c,u]);var l=k.apply(null,t);return o(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y)}function d(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function f(e,t){return e=o(e),t=o(t),d(t,e.x,e.y)||d(t,e.x2,e.y)||d(t,e.x,e.y2)||d(t,e.x2,e.y2)||d(e,t.x,t.y)||d(e,t.x2,t.y)||d(e,t.x,t.y2)||d(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function h(e,t,n,r,i){var o=-3*t+9*n-9*r+3*i,a=e*o+6*t-12*n+6*r;return e*a-3*t+3*n}function m(e,t,n,r,i,o,a,s,c){null==c&&(c=1),c=c>1?1:c<0?0:c;for(var u=c/2,l=12,p=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],d=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],f=0,m=0;m<l;m++){var g=u*p[m]+u,v=h(g,e,n,i,a),y=h(g,t,r,o,s),x=v*v+y*y;f+=d[m]*U.sqrt(x)}return u*f}function g(e,t,n,r,i,o,a,s,c){if(!(c<0||m(e,t,n,r,i,o,a,s)<c)){var u,l=1,p=l/2,d=l-p,f=.01;for(u=m(e,t,n,r,i,o,a,s,d);W(u-c)>f;)p/=2,d+=(u<c?1:-1)*p,u=m(e,t,n,r,i,o,a,s,d);return d}}function v(e,t,n,r,i,o,a,s){if(!(G(e,n)<V(i,a)||V(e,n)>G(i,a)||G(t,r)<V(o,s)||V(t,r)>G(o,s))){var c=(e*r-t*n)*(i-a)-(e-n)*(i*s-o*a),u=(e*r-t*n)*(o-s)-(t-r)*(i*s-o*a),l=(e-n)*(o-s)-(t-r)*(i-a);if(l){var p=c/l,d=u/l,f=+p.toFixed(2),h=+d.toFixed(2);if(!(f<+V(e,n).toFixed(2)||f>+G(e,n).toFixed(2)||f<+V(i,a).toFixed(2)||f>+G(i,a).toFixed(2)||h<+V(t,r).toFixed(2)||h>+G(t,r).toFixed(2)||h<+V(o,s).toFixed(2)||h>+G(o,s).toFixed(2)))return{x:p,y:d}}}}function y(e,t,n){var r=p(e),i=p(t);if(!f(r,i))return n?0:[];for(var o=m.apply(0,e),a=m.apply(0,t),s=~~(o/8),c=~~(a/8),u=[],d=[],h={},g=n?0:[],y=0;y<s+1;y++){var x=l.apply(0,e.concat(y/s));u.push({x:x.x,y:x.y,t:y/s})}for(y=0;y<c+1;y++)x=l.apply(0,t.concat(y/c)),d.push({x:x.x,y:x.y,t:y/c});for(y=0;y<s;y++)for(var _=0;_<c;_++){var b=u[y],w=u[y+1],E=d[_],C=d[_+1],S=W(w.x-b.x)<.001?"y":"x",T=W(C.x-E.x)<.001?"y":"x",M=v(b.x,b.y,w.x,w.y,E.x,E.y,C.x,C.y);if(M){if(h[M.x.toFixed(4)]==M.y.toFixed(4))continue;h[M.x.toFixed(4)]=M.y.toFixed(4);var P=b.t+W((M[S]-b[S])/(w[S]-b[S]))*(w.t-b.t),A=E.t+W((M[T]-E[T])/(C[T]-E[T]))*(C.t-E.t);P>=0&&P<=1&&A>=0&&A<=1&&(n?g++:g.push({x:M.x,y:M.y,t1:P,t2:A}))}}return g}function x(e,t){return b(e,t)}function _(e,t){return b(e,t,1)}function b(e,t,n){e=N(e),t=N(t);for(var r,i,o,a,s,c,u,l,p,d,f=n?0:[],h=0,m=e.length;h<m;h++){var g=e[h];if("M"==g[0])r=s=g[1],i=c=g[2];else{"C"==g[0]?(p=[r,i].concat(g.slice(1)),r=p[6],i=p[7]):(p=[r,i,r,i,s,c,s,c],r=s,i=c);for(var v=0,x=t.length;v<x;v++){var _=t[v];if("M"==_[0])o=u=_[1],a=l=_[2];else{"C"==_[0]?(d=[o,a].concat(_.slice(1)),o=d[6],a=d[7]):(d=[o,a,o,a,u,l,u,l],o=u,a=l);var b=y(p,d,n);if(n)f+=b;else{for(var w=0,E=b.length;w<E;w++)b[w].segment1=h,b[w].segment2=v,b[w].bez1=p,b[w].bez2=d;f=f.concat(b)}}}}}return f}function w(e,t,n){var r=E(e);return d(r,t,n)&&b(e,[["M",t,n],["H",r.x2+10]],1)%2==1}function E(e){var t=i(e);if(t.bbox)return j(t.bbox);if(!e)return o();e=N(e);for(var n,r=0,a=0,s=[],c=[],u=0,l=e.length;u<l;u++)if(n=e[u],"M"==n[0])r=n[1],a=n[2],s.push(r),c.push(a);else{var p=k(r,a,n[1],n[2],n[3],n[4],n[5],n[6]);s=s.concat(p.min.x,p.max.x),c=c.concat(p.min.y,p.max.y),r=n[5],a=n[6]}var d=V.apply(0,s),f=V.apply(0,c),h=G.apply(0,s),m=G.apply(0,c),g=o(d,f,h-d,m-f);return t.bbox=j(g),g}function C(e,t,n,r,i){if(i)return[["M",+e+ +i,t],["l",n-2*i,0],["a",i,i,0,0,1,i,i],["l",0,r-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-n,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-r],["a",i,i,0,0,1,i,-i],["z"]];var o=[["M",e,t],["l",n,0],["l",0,r],["l",-n,0],["z"]];return o.toString=a,o}function S(e,t,n,r,i){if(null==i&&null==r&&(r=n),e=+e,t=+t,n=+n,r=+r,null!=i)var o=Math.PI/180,s=e+n*Math.cos(-r*o),c=e+n*Math.cos(-i*o),u=t+n*Math.sin(-r*o),l=t+n*Math.sin(-i*o),p=[["M",s,u],["A",n,n,0,+(i-r>180),0,c,l]];else p=[["M",e,t],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]];return p.toString=a,p}function T(t){var n=i(t),r=String.prototype.toLowerCase;if(n.rel)return s(n.rel);e.is(t,"array")&&e.is(t&&t[0],"array")||(t=e.parsePathString(t));var o=[],c=0,u=0,l=0,p=0,d=0;"M"==t[0][0]&&(c=t[0][1],u=t[0][2],l=c,p=u,d++,o.push(["M",c,u]));for(var f=d,h=t.length;f<h;f++){var m=o[f]=[],g=t[f];if(g[0]!=r.call(g[0]))switch(m[0]=r.call(g[0]),m[0]){case"a":m[1]=g[1],m[2]=g[2],m[3]=g[3],m[4]=g[4],m[5]=g[5],m[6]=+(g[6]-c).toFixed(3),m[7]=+(g[7]-u).toFixed(3);break;case"v":m[1]=+(g[1]-u).toFixed(3);break;case"m":l=g[1],p=g[2];default:for(var v=1,y=g.length;v<y;v++)m[v]=+(g[v]-(v%2?c:u)).toFixed(3)}else{m=o[f]=[],"m"==g[0]&&(l=g[1]+c,p=g[2]+u);for(var x=0,_=g.length;x<_;x++)o[f][x]=g[x]}var b=o[f].length;switch(o[f][0]){case"z":c=l,u=p;break;case"h":c+=+o[f][b-1];break;case"v":u+=+o[f][b-1];break;default:c+=+o[f][b-2],u+=+o[f][b-1]}}return o.toString=a,n.rel=s(o),o}function M(t){var n=i(t);if(n.abs)return s(n.abs);if(B(t,"array")&&B(t&&t[0],"array")||(t=e.parsePathString(t)),!t||!t.length)return[["M",0,0]];var r,o=[],c=0,u=0,l=0,p=0,d=0;"M"==t[0][0]&&(c=+t[0][1],u=+t[0][2],l=c,p=u,d++,o[0]=["M",c,u]);for(var f,h,m=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),g=d,v=t.length;g<v;g++){if(o.push(f=[]),h=t[g],r=h[0],r!=r.toUpperCase())switch(f[0]=r.toUpperCase(),f[0]){case"A":f[1]=h[1],f[2]=h[2],f[3]=h[3],f[4]=h[4],f[5]=h[5],f[6]=+h[6]+c,f[7]=+h[7]+u;break;case"V":f[1]=+h[1]+u;break;case"H":f[1]=+h[1]+c;break;case"R":for(var y=[c,u].concat(h.slice(1)),x=2,_=y.length;x<_;x++)y[x]=+y[x]+c,y[++x]=+y[x]+u;o.pop(),o=o.concat(D(y,m));break;case"O":o.pop(),y=S(c,u,h[1],h[2]),y.push(y[0]),o=o.concat(y);break;case"U":o.pop(),o=o.concat(S(c,u,h[1],h[2],h[3])),f=["U"].concat(o[o.length-1].slice(-2));break;case"M":l=+h[1]+c,p=+h[2]+u;default:for(x=1,_=h.length;x<_;x++)f[x]=+h[x]+(x%2?c:u)}else if("R"==r)y=[c,u].concat(h.slice(1)),o.pop(),o=o.concat(D(y,m)),f=["R"].concat(h.slice(-2));else if("O"==r)o.pop(),y=S(c,u,h[1],h[2]),y.push(y[0]),o=o.concat(y);else if("U"==r)o.pop(),o=o.concat(S(c,u,h[1],h[2],h[3])),f=["U"].concat(o[o.length-1].slice(-2));else for(var b=0,w=h.length;b<w;b++)f[b]=h[b];if(r=r.toUpperCase(),"O"!=r)switch(f[0]){case"Z":c=+l,u=+p;break;case"H":c=f[1];break;case"V":u=f[1];break;case"M":l=f[f.length-2],p=f[f.length-1];default:c=f[f.length-2],u=f[f.length-1]}}return o.toString=a,n.abs=s(o),o}function P(e,t,n,r){return[e,t,n,r,n,r]}function A(e,t,n,r,i,o){var a=1/3,s=2/3;return[a*e+s*n,a*t+s*r,a*i+s*n,a*o+s*r,i,o]}function R(t,n,r,i,o,a,s,c,u,l){var p,d=120*$/180,f=$/180*(+o||0),h=[],m=e._.cacher(function(e,t,n){var r=e*U.cos(n)-t*U.sin(n),i=e*U.sin(n)+t*U.cos(n);return{x:r,y:i}});if(l)C=l[0],S=l[1],w=l[2],E=l[3];else{p=m(t,n,-f),t=p.x,n=p.y,p=m(c,u,-f),c=p.x,u=p.y;var g=(U.cos($/180*o),U.sin($/180*o),(t-c)/2),v=(n-u)/2,y=g*g/(r*r)+v*v/(i*i);y>1&&(y=U.sqrt(y),r=y*r,i=y*i);var x=r*r,_=i*i,b=(a==s?-1:1)*U.sqrt(W((x*_-x*v*v-_*g*g)/(x*v*v+_*g*g))),w=b*r*v/i+(t+c)/2,E=b*-i*g/r+(n+u)/2,C=U.asin(((n-E)/i).toFixed(9)),S=U.asin(((u-E)/i).toFixed(9));C=t<w?$-C:C,S=c<w?$-S:S,C<0&&(C=2*$+C),S<0&&(S=2*$+S),s&&C>S&&(C-=2*$),!s&&S>C&&(S-=2*$)}var T=S-C;if(W(T)>d){var M=S,P=c,A=u;S=C+d*(s&&S>C?1:-1),c=w+r*U.cos(S),u=E+i*U.sin(S),h=R(c,u,r,i,o,0,s,P,A,[S,M,w,E])}T=S-C;var k=U.cos(C),N=U.sin(C),I=U.cos(S),D=U.sin(S),O=U.tan(T/4),B=4/3*r*O,j=4/3*i*O,L=[t,n],F=[t+B*N,n-j*k],z=[c+B*D,u-j*I],V=[c,u];if(F[0]=2*L[0]-F[0],F[1]=2*L[1]-F[1],l)return[F,z,V].concat(h);h=[F,z,V].concat(h).join().split(",");for(var G=[],H=0,q=h.length;H<q;H++)G[H]=H%2?m(h[H-1],h[H],f).y:m(h[H],h[H+1],f).x;return G}function k(e,t,n,r,i,o,a,s){for(var c,u,l,p,d,f,h,m,g=[],v=[[],[]],y=0;y<2;++y)if(0==y?(u=6*e-12*n+6*i,c=-3*e+9*n-9*i+3*a,l=3*n-3*e):(u=6*t-12*r+6*o,c=-3*t+9*r-9*o+3*s,l=3*r-3*t),W(c)<1e-12){if(W(u)<1e-12)continue;p=-l/u,0<p&&p<1&&g.push(p)}else h=u*u-4*l*c,m=U.sqrt(h),h<0||(d=(-u+m)/(2*c),0<d&&d<1&&g.push(d),f=(-u-m)/(2*c),0<f&&f<1&&g.push(f));for(var x,_=g.length,b=_;_--;)p=g[_],x=1-p,v[0][_]=x*x*x*e+3*x*x*p*n+3*x*p*p*i+p*p*p*a,v[1][_]=x*x*x*t+3*x*x*p*r+3*x*p*p*o+p*p*p*s;return v[0][b]=e,v[1][b]=t,v[0][b+1]=a,v[1][b+1]=s,v[0].length=v[1].length=b+2,{min:{x:V.apply(0,v[0]),y:V.apply(0,v[1])},max:{x:G.apply(0,v[0]),y:G.apply(0,v[1])}}}function N(e,t){var n=!t&&i(e);if(!t&&n.curve)return s(n.curve);for(var r=M(e),o=t&&M(t),a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},c={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},u=(function(e,t,n){var r,i;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(R.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":"C"==n||"S"==n?(r=2*t.x-t.bx,i=2*t.y-t.by):(r=t.x,i=t.y),e=["C",r,i].concat(e.slice(1));break;case"T":"Q"==n||"T"==n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(A(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(A(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(P(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(P(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(P(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(P(t.x,t.y,t.X,t.Y))}return e}),l=function(e,t){if(e[t].length>7){e[t].shift();for(var n=e[t];n.length;)d[t]="A",o&&(f[t]="A"),e.splice(t++,0,["C"].concat(n.splice(0,6)));e.splice(t,1),v=G(r.length,o&&o.length||0)}},p=function(e,t,n,i,a){e&&t&&"M"==e[a][0]&&"M"!=t[a][0]&&(t.splice(a,0,["M",i.x,i.y]),n.bx=0,n.by=0,n.x=e[a][1],n.y=e[a][2],v=G(r.length,o&&o.length||0))},d=[],f=[],h="",m="",g=0,v=G(r.length,o&&o.length||0);g<v;g++){r[g]&&(h=r[g][0]),"C"!=h&&(d[g]=h,g&&(m=d[g-1])),r[g]=u(r[g],a,m),"A"!=d[g]&&"C"==h&&(d[g]="C"),l(r,g),o&&(o[g]&&(h=o[g][0]),"C"!=h&&(f[g]=h,g&&(m=f[g-1])),o[g]=u(o[g],c,m),"A"!=f[g]&&"C"==h&&(f[g]="C"),l(o,g)),p(r,o,a,c,g),p(o,r,c,a,g);var y=r[g],x=o&&o[g],_=y.length,b=o&&x.length;a.x=y[_-2],a.y=y[_-1],a.bx=z(y[_-4])||a.x,a.by=z(y[_-3])||a.y,c.bx=o&&(z(x[b-4])||c.x),c.by=o&&(z(x[b-3])||c.y),c.x=o&&x[b-2],c.y=o&&x[b-1]}return o||(n.curve=s(r)),o?[r,o]:r}function I(e,t){if(!t)return e;var n,r,i,o,a,s,c;for(e=N(e),i=0,a=e.length;i<a;i++)for(c=e[i],o=1,s=c.length;o<s;o+=2)n=t.x(c[o],c[o+1]),r=t.y(c[o],c[o+1]),c[o]=n,c[o+1]=r;return e}function D(e,t){for(var n=[],r=0,i=e.length;i-2*!t>r;r+=2){var o=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];t?r?i-4==r?o[3]={x:+e[0],y:+e[1]}:i-2==r&&(o[2]={x:+e[0],y:+e[1]},o[3]={x:+e[2],y:+e[3]}):o[0]={x:+e[i-2],y:+e[i-1]}:i-4==r?o[3]=o[2]:r||(o[0]={x:+e[r],y:+e[r+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n}var O=t.prototype,B=e.is,j=e._.clone,L="hasOwnProperty",F=/,?([a-z]),?/gi,z=parseFloat,U=Math,$=U.PI,V=U.min,G=U.max,H=U.pow,W=U.abs,q=u(1),Y=u(),X=u(0,1),K=e._unit2px,Q={path:function(e){return e.attr("path")},circle:function(e){var t=K(e);return S(t.cx,t.cy,t.r)},ellipse:function(e){var t=K(e);return S(t.cx||0,t.cy||0,t.rx,t.ry)},rect:function(e){var t=K(e);return C(t.x||0,t.y||0,t.width,t.height,t.rx,t.ry)},image:function(e){var t=K(e);return C(t.x||0,t.y||0,t.width,t.height)},line:function(e){return"M"+[e.attr("x1")||0,e.attr("y1")||0,e.attr("x2"),e.attr("y2")]},polyline:function(e){return"M"+e.attr("points")},polygon:function(e){return"M"+e.attr("points")+"z"},deflt:function(e){var t=e.node.getBBox();return C(t.x,t.y,t.width,t.height)}};e.path=i,e.path.getTotalLength=q,e.path.getPointAtLength=Y,e.path.getSubpath=function(e,t,n){if(this.getTotalLength(e)-n<1e-6)return X(e,t).end;var r=X(e,n,1);return t?X(r,t).end:r},O.getTotalLength=function(){if(this.node.getTotalLength)return this.node.getTotalLength()},O.getPointAtLength=function(e){return Y(this.attr("d"),e)},O.getSubpath=function(t,n){return e.path.getSubpath(this.attr("d"),t,n)},e._.box=o,e.path.findDotsAtSegment=l,e.path.bezierBBox=p,e.path.isPointInsideBBox=d,e.path.isBBoxIntersect=f,e.path.intersection=x,e.path.intersectionNumber=_,e.path.isPointInside=w,e.path.getBBox=E,e.path.get=Q,e.path.toRelative=T,e.path.toAbsolute=M,e.path.toCubic=N,e.path.map=I,e.path.toString=a,e.path.clone=s}),r.plugin(function(e,n,r,i){for(var o=n.prototype,a="hasOwnProperty",s=("createTouch"in i.doc),c=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],u={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},l=(function(e,t){var n="y"==e?"scrollTop":"scrollLeft",r=t&&t.node?t.node.ownerDocument:i.doc;return r[n in r.documentElement?"documentElement":"body"][n]}),p=function(){this.returnValue=!1},d=function(){return this.originalEvent.preventDefault()},f=function(){this.cancelBubble=!0},h=function(){return this.originalEvent.stopPropagation()},m=function(){return i.doc.addEventListener?function(e,t,n,r){var i=s&&u[t]?u[t]:t,o=function(i){var o=l("y",r),c=l("x",r);if(s&&u[a](t))for(var p=0,f=i.targetTouches&&i.targetTouches.length;p<f;p++)if(i.targetTouches[p].target==e||e.contains(i.targetTouches[p].target)){var m=i;i=i.targetTouches[p],i.originalEvent=m,i.preventDefault=d,i.stopPropagation=h;break}var g=i.clientX+c,v=i.clientY+o;return n.call(r,i,g,v)};return t!==i&&e.addEventListener(t,o,!1),e.addEventListener(i,o,!1),function(){return t!==i&&e.removeEventListener(t,o,!1),e.removeEventListener(i,o,!1),!0}}:i.doc.attachEvent?function(e,t,n,r){var i=function(e){e=e||r.node.ownerDocument.window.event;var t=l("y",r),i=l("x",r),o=e.clientX+i,a=e.clientY+t;return e.preventDefault=e.preventDefault||p,e.stopPropagation=e.stopPropagation||f,n.call(r,e,o,a)};e.attachEvent("on"+t,i);var o=function(){return e.detachEvent("on"+t,i),!0};return o}:void 0}(),g=[],v=function(e){for(var n,r=e.clientX,i=e.clientY,o=l("y"),a=l("x"),c=g.length;c--;){if(n=g[c],s){for(var u,p=e.touches&&e.touches.length;p--;)if(u=e.touches[p],u.identifier==n.el._drag.id||n.el.node.contains(u.target)){r=u.clientX,i=u.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();var d=n.el.node;d.nextSibling,d.parentNode,d.style.display;r+=a,i+=o,t("snap.drag.move."+n.el.id,n.move_scope||n.el,r-n.el._drag.x,i-n.el._drag.y,r,i,e)}},y=function(n){e.unmousemove(v).unmouseup(y);for(var r,i=g.length;i--;)r=g[i],r.el._drag={},t("snap.drag.end."+r.el.id,r.end_scope||r.start_scope||r.move_scope||r.el,n);g=[]},x=c.length;x--;)!function(t){e[t]=o[t]=function(n,r){return e.is(n,"function")&&(this.events=this.events||[],this.events.push({name:t,f:n,unbind:m(this.node||document,t,n,r||this)})),this},e["un"+t]=o["un"+t]=function(e){for(var n=this.events||[],r=n.length;r--;)if(n[r].name==t&&(n[r].f==e||!e))return n[r].unbind(),n.splice(r,1),!n.length&&delete this.events,this;return this}}(c[x]);o.hover=function(e,t,n,r){return this.mouseover(e,n).mouseout(t,r||n)},o.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var _=[];o.drag=function(n,r,i,o,a,s){function c(c,u,l){(c.originalEvent||c).preventDefault(),this._drag.x=u,this._drag.y=l,this._drag.id=c.identifier,!g.length&&e.mousemove(v).mouseup(y),g.push({el:this,move_scope:o,start_scope:a,end_scope:s}),r&&t.on("snap.drag.start."+this.id,r),n&&t.on("snap.drag.move."+this.id,n),i&&t.on("snap.drag.end."+this.id,i),t("snap.drag.start."+this.id,a||o||this,u,l,c)}if(!arguments.length){var u;return this.drag(function(e,t){this.attr({transform:u+(u?"T":"t")+[e,t]})},function(){u=this.transform().local})}return this._drag={},_.push({el:this,start:c}),this.mousedown(c),this},o.undrag=function(){for(var n=_.length;n--;)_[n].el==this&&(this.unmousedown(_[n].start),_.splice(n,1),t.unbind("snap.drag.*."+this.id));return!_.length&&e.unmousemove(v).unmouseup(y),this}}),r.plugin(function(e,n,r,i){var o=(n.prototype,r.prototype),a=/^\s*url\((.+)\)/,s=String,c=e._.$;e.filter={},o.filter=function(t){var r=this;"svg"!=r.type&&(r=r.paper);var i=e.parse(s(t)),o=e._.id(),a=(r.node.offsetWidth,r.node.offsetHeight,c("filter"));return c(a,{id:o,filterUnits:"userSpaceOnUse"}),a.appendChild(i.node),r.defs.appendChild(a),new n(a)},t.on("snap.util.getattr.filter",function(){t.stop();var n=c(this.node,"filter");if(n){var r=s(n).match(a);return r&&e.select(r[1])}}),t.on("snap.util.attr.filter",function(r){if(r instanceof n&&"filter"==r.type){t.stop();var i=r.node.id;i||(c(r.node,{id:r.id}),i=r.id),c(this.node,{filter:e.url(i)})}r&&"none"!=r||(t.stop(),this.node.removeAttribute("filter"))}),e.filter.blur=function(t,n){null==t&&(t=2);var r=null==n?t:[t,n];return e.format('<feGaussianBlur stdDeviation="{def}"/>',{def:r})},e.filter.blur.toString=function(){return this()},e.filter.shadow=function(t,n,r,i,o){return"string"==typeof r&&(i=r,o=i,r=4),"string"!=typeof i&&(o=i,i="#000"),i=i||"#000",null==r&&(r=4),null==o&&(o=1),null==t&&(t=0,n=2),null==n&&(n=t),i=e.color(i),e.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>',{color:i,dx:t,dy:n,blur:r,opacity:o})},e.filter.shadow.toString=function(){return this()},e.filter.grayscale=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-t),b:.7152-.7152*(1-t),c:.0722-.0722*(1-t),d:.2126-.2126*(1-t),e:.7152+.2848*(1-t),f:.0722-.0722*(1-t),g:.2126-.2126*(1-t),h:.0722+.9278*(1-t)})},e.filter.grayscale.toString=function(){return this()},e.filter.sepia=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-t),b:.769-.769*(1-t),c:.189-.189*(1-t),d:.349-.349*(1-t),e:.686+.314*(1-t),f:.168-.168*(1-t),g:.272-.272*(1-t),h:.534-.534*(1-t),i:.131+.869*(1-t)})},e.filter.sepia.toString=function(){return this()},e.filter.saturate=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-t})},e.filter.saturate.toString=function(){return this()},e.filter.hueRotate=function(t){return t=t||0,e.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:t})},e.filter.hueRotate.toString=function(){return this()},e.filter.invert=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:t,amount2:1-t})},e.filter.invert.toString=function(){return this()},e.filter.brightness=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:t})},e.filter.brightness.toString=function(){return this()},e.filter.contrast=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>',{amount:t,amount2:.5-t/2})},e.filter.contrast.toString=function(){return this()}}),r})},{254:254}],437:[function(t,n,r){!function(t){"use strict";function i(){this.data=[null],this.top=0}function o(){return new i}i.prototype.clear=function(){return this.data=[null],this.top=0,this},i.prototype.length=function(){return this.top},i.prototype.peek=function(){return this.data[this.top]},i.prototype.pop=function(){return this.top>0?(this.top--,this.data.pop()):void 0},i.prototype.push=function(e){return this.data[++this.top]=e,this},"undefined"!=typeof r?n.exports=o:"function"==typeof e?e(function(){return o}):t.stack=o}(this)},{}]},{},[1])(1)});